webpackJsonp([2,0],{0:function(t,e,n){"use strict";n(122),n(123),n(120),n(118),n(119),n(121),n(238),n(237),n(117)},117:function(t,e){"use strict";function n(t){var e=null;if(document.cookie&&""!=document.cookie)for(var n=document.cookie.split(";"),i=0;i<n.length;i++){var o=jQuery.trim(n[i]);if(o.substring(0,t.length+1)==t+"="){e=decodeURIComponent(o.substring(t.length+1));break}}return e}Object.defineProperty(e,"__esModule",{value:!0}),e.getCookie=n,e.csrftoken=n("csrftoken")},118:function(t,e){},119:118,120:118,121:118,122:118,123:118,237:function(t,e){Ink.createModule("Ink.Autoload",1,["Ink.Dom.Selector_1","Ink.Util.Array_1","Ink.Dom.Loaded_1","Ink.UI.SmoothScroller_1","Ink.UI.Close_1","Ink.UI.Drawer_1"],function(t,e,n,i,o,r){"use strict";function s(e){try{t.select(e,a)}catch(t){return Ink.error(t),!1}return!0}var a=document.createElement("div"),l={selectors:{Animate_1:".ink-animate",Carousel_1:".ink-carousel",DatePicker_1:".ink-datepicker",DragDrop_1:".ink-dragdrop",Draggable_1:".ink-draggable",Dropdown_1:".ink-dropdown","Droppable_1.add":".ink-droppable",FormValidator_2:".ink-formvalidator",Gallery_1:"ul.ink-gallery-source",LazyLoad_1:".ink-lazyload",Modal_1:".ink-modal",ProgressBar_1:".ink-progress-bar",SortableList_1:".ink-sortable-list",Spy_1:'[data-spy="true"]',Stacker_1:".ink-stacker",Sticky_1:".ink-sticky, .sticky",Table_1:".ink-table",Tabs_1:".ink-tabs",Toggle_1:".ink-toggle, .toggle",Tooltip_1:".ink-tooltip, .tooltip",TreeView_1:".ink-tree-view"},defaultOptions:{},run:function(n,s){function a(i){var o;/\./.test(i)&&(i=i.split("."),o=i[1],i=i[0]);var r="Ink.UI."+i,a=t.select(s.selectors[i],n);a=e.filter(a,h),a.length&&Ink.requireModules([r],function(t){e.forEach(a,function(e){"function"==typeof t.getInstance&&null!=t.getInstance(e)||(o?t[o](e,l.defaultOptions[i]):new t(e,l.defaultOptions[i]))})})}function h(t){return s.forceAutoload===!0||("function"==typeof t.getAttribute||"object"==typeof t.getAttribute?"false"!==t.getAttribute("data-autoload"):void 0)}s=Ink.extendObj({selectors:l.selectors},s||{});for(var u in s.selectors)s.selectors.hasOwnProperty(u)&&a(u);s.createClose!==!1&&new o,s.createSmoothScroller!==!1&&i.init(),s.createDrawer!==!1&&(!t.matchesSelector(document.body,".ink-drawer")||r.getInstance&&r.getInstance(document.body)||new r(document.body))},add:function(t,e){return!!s(e)&&void(l.selectors[t]?l.selectors[t]+=", "+e:l.selectors[t]=e)},remove:function(t){delete l.selectors[t]}};for(var h in l.selectors)l.selectors.hasOwnProperty(h)&&(l.defaultOptions[h]={});return window.INK_NO_AUTO_LOAD||n.run(function(){l.run(document,{createSmoothScroller:!0,createClose:!0}),l.firstRunDone=!0}),l})},238:function(module,exports){!function(t,e){"use strict";if(!("Ink"in t&&"function"==typeof Ink.requireModules)){var n={},i={},o=[],r={},s=[],a={},l=Function.prototype.apply,h=function(t){if("object"!=typeof t)return!1;for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};t.Ink={VERSION:"3.1.10",_checkPendingRequireModules:function(){var t,e,n,o,r,a,l=[],h=[];for(t=0,e=s.length;t<e;++t)if(n=s[t]){for(o in n.left)n.left.hasOwnProperty(o)&&(r=i[o],r&&(n.args[n.left[o]]=r,delete n.left[o],--n.remaining));if(n.remaining>0)l.push(n);else{if(a=n.cb,!a)continue;delete n.cb,h.push([a,n.args])}}s=l;for(var u=0;u<h.length;u++)h[u][0].apply(!1,h[u][1]);s.length>0&&setTimeout(function(){Ink._checkPendingRequireModules()},0)},getPath:function(t,e){var i,o,r,s,a=t.split(/[._]/g);for(o=a.length;o>=0;o-=1)if(i=a.slice(0,o+1).join("."),n[i]){r=i;break}return r in n?(s=n[r],/\/$/.test(s)||(s+="/"),o<a.length&&(s+=a.slice(o+1).join("/")+"/"),e||(s+="lib.js"),s):null},setPath:function(t,e){n[t.replace(/_/,".")]=e},loadScript:function(t,n){if(t.indexOf("/")===-1){var i=t;if(t=this.getPath(t),null===t)throw new Error('Could not load script "'+i+'". Path not found in the registry. Did you misspell the name, or forgot to call setPath()?')}var o=e.createElement("script");o.setAttribute("type",n||"text/javascript"),o.setAttribute("src",t),"onerror"in o&&(o.onerror=function(){Ink.error(["Failed to load script from ",t,"."].join(""))});var r=e.head||e.getElementsByTagName("head")[0];if(r)return r.appendChild(o)},_loadLater:function(t){setTimeout(function(){i[t]||r[t]||a[t]||(r[t]=!0,Ink.loadScript(t))},0)},namespace:function(e,n){if(!e||!e.length)return null;for(var i,o=e.split("."),r=t,s=0,a=o.length;s<a;++s)r[o[s]]=r[o[s]]||{},i=r,r=r[o[s]];return n?[i,o[s-1]]:r},getModule:function(t,e){var n=e?[t,"_",e].join(""):t;return i[n]},createModule:function(e,n,s,l){if("string"!=typeof e)throw new Error("module name must be a string!");if(!("number"==typeof n||"string"==typeof n&&n.length>0))throw new Error("version number missing!");var u=[e,"_",n].join("");a[u]=!0;var c=function(){if(!i[u]){delete r[u],delete r[e];var s=Array.prototype.slice.call(arguments),c=l.apply(t,s);o.push(u),"object"==typeof c?c._version=n:"function"==typeof c&&(c.prototype._version=n,c._version=n);var d,p=0===e.indexOf("Ink.");p&&(d=Ink.namespace(e,!0)),i[u]=c,delete a[u],p&&(d[0][d[1]+"_"+n]=c),i[e]=c,p&&h(d[0][d[1]])&&(d[0][d[1]]=c),this&&Ink._checkPendingRequireModules()}};this.requireModules(s,c)},requireModules:function(t,e){var n,o,a,l,h;if(o=t&&t.length,a={args:new Array(o),left:{},remaining:o,cb:e},"object"!=typeof t||void 0===t.length)throw new Error("Dependency list should be an array!");if("function"!=typeof e)throw new Error("Callback should be a function!");for(n=0;n<o;++n)Ink._moduleRenames[t[n]]?(Ink.warn(t[n]+" was renamed to "+Ink._moduleRenames[t[n]]),l=Ink._moduleRenames[t[n]]):l=t[n],l?(h=i[l],h?(a.args[n]=h,--a.remaining):(r[l]||Ink._loadLater(l),a.left[l]=n)):--a.remaining;a.remaining>0?s.push(a):e.apply(!0,a.args)},_moduleRenames:{"Ink.UI.Aux_1":"Ink.UI.Common_1"},getModulesLoadOrder:function(){return o.slice()},getModuleScripts:function(){var t=this.getModulesLoadOrder();return t.unshift("Ink_1"),t=t.map(function(t){return["<scr",'ipt type="text/javascript" src="',Ink.getModuleURL(t),'"></scr',"ipt>"].join("")}),t.join("\n")},createExt:function(t,e,n,i){return Ink.createModule("Ink.Ext."+t,e,n,i)},bind:function(t,e){var n=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments),o=n.concat(i);return t.apply(e===!1?this:e,o)}},bindMethod:function(t,e){return Ink.bind.apply(Ink,[t[e],t].concat([].slice.call(arguments,2)))},bindEvent:function(e,n){var i=Array.prototype.slice.call(arguments,2);return function(o){var r=i.slice();return r.unshift(o||t.event),e.apply(n===!1?this:n,r)}},i:function(t){return"string"==typeof t?e.getElementById(t)||null:t},ss:function(t,n){if("undefined"==typeof Ink.Dom||"undefined"==typeof Ink.Dom.Selector)throw new Error("This method requires Ink.Dom.Selector");return Ink.Dom.Selector.select(t,n||e)},s:function(t,n){if("undefined"==typeof Ink.Dom||"undefined"==typeof Ink.Dom.Selector)throw new Error("This method requires Ink.Dom.Selector");return Ink.Dom.Selector.select(t,n||e)[0]||null},extendObj:function(t){for(var e=[].slice.call(arguments,1),n=0,i=e.length;n<i;n++)if(e[n])for(var o in e[n])Object.prototype.hasOwnProperty.call(e[n],o)&&(t[o]=e[n][o]);return t},log:function(){var e=t.console;e&&e.log&&l.call(e.log,e,arguments)},warn:function(){var e=t.console;e&&e.warn&&l.call(e.warn,e,arguments)},error:function(){var e=t.console;e&&e.error&&l.call(e.error,e,arguments)}}}}(window,document),Ink.createModule("Ink.Net.Ajax","1",[],function(){"use strict";var Ajax=function(t,e){this.init(t,e)};Ajax.globalOptions={parameters:{},requestHeaders:{}};var xMLHttpRequestWithCredentials="XMLHttpRequest"in window&&"withCredentials"in new XMLHttpRequest;return Ajax.prototype={init:function(t,e){if(!t)throw new Error("new Ink.Net.Ajax: Pass a url as the first argument!");var n=Ink.extendObj({asynchronous:!0,contentType:"application/x-www-form-urlencoded",cors:!1,validateCors:!1,debug:!1,delay:0,evalJS:!0,method:"POST",parameters:null,postBody:"",requestHeaders:null,sanitizeJSON:!1,signRequest:!1,timeout:0,useCredentials:!1,xhrProxy:"",onComplete:null,onCreate:null,onException:null,onFailure:null,onHeaders:null,onInit:null,onSuccess:null,onTimeout:null},Ajax.globalOptions);if(e&&"object"==typeof e){if(n=Ink.extendObj(n,e),"object"==typeof e.parameters)n.parameters=Ink.extendObj(Ink.extendObj({},Ajax.globalOptions.parameters),e.parameters);else if(null!==e.parameters){var i=this.paramsObjToStr(Ajax.globalOptions.parameters);i&&(n.parameters=e.parameters+"&"+i)}n.requestHeaders=Ink.extendObj({},Ajax.globalOptions.requestHeaders),n.requestHeaders=Ink.extendObj(n.requestHeaders,e.requestHeaders)}this.options=n,this.safeCall("onInit"),this.url=t;var o=this._locationFromURL(t);this.isHTTP=this._locationIsHTTP(o),this.isCrossDomain=this._locationIsCrossDomain(o,location),this.requestHasBody=n.method.search(/^get|head$/i)<0,this.options.validateCors===!0&&(this.options.cors=this.isCrossDomain),this.options.cors&&(this.isCrossDomain=!1),this.transport=this.getTransport(),this.request()},_locationFromURL:function(t){var e=document.createElementNS?document.createElementNS("http://www.w3.org/1999/xhtml","a"):document.createElement("a");return e.setAttribute("href",t),e},_locationIsHTTP:function(t){return!!t.href.match(/^https?:/i)},_locationIsCrossDomain:function(t,e){if(e=e||window.location,Ajax.prototype._locationIsHTTP(t)&&"widget:"!==e.protocol&&"object"!=typeof window.widget){var n=t.href.split("//"),i=e.href.split("//");if(1===n.length||1===i.length)return!1;var o=n[0],r=i[0],s=/:|\//,a=n[1].split(s)[0],l=i[1].split(s)[0];return o!==r||a!==l}return!1},getTransport:function(){if(!xMLHttpRequestWithCredentials&&this.options.cors&&"XDomainRequest"in window)return this.usingXDomainReq=!0,new XDomainRequest;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"==typeof ActiveXObject)return null;try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){return new ActiveXObject("Microsoft.XMLHTTP")}},setHeaders:function(){if(this.transport)try{var t={Accept:"text/javascript,text/xml,application/xml,application/xhtml+xml,text/html,application/json;q=0.9,text/plain;q=0.8,video/x-mng,image/png,image/jpeg,image/gif;q=0.2,*/*;q=0.1","Accept-Language":navigator.language,"X-Requested-With":"XMLHttpRequest","X-Ink-Version":"3"};if(this.options.cors&&(this.options.signRequest||delete t["X-Requested-With"],delete t["X-Ink-Version"]),this.options.requestHeaders&&"object"==typeof this.options.requestHeaders)for(var e in this.options.requestHeaders)this.options.requestHeaders.hasOwnProperty(e)&&(t[e]=this.options.requestHeaders[e]);this.transport.overrideMimeType&&(navigator.userAgent.match(/Gecko\/(\d{4})/)||[0,2005])[1]<2005&&(t.Connection="close");for(var n in t)t.hasOwnProperty(n)&&this.transport.setRequestHeader(n,t[n])}catch(t){}},paramsObjToStr:function(t){var e,n,i,o,r=[];if("object"!=typeof t)return t;for(i in t)if(t.hasOwnProperty(i))if(o=t[i],"[object Array]"!==Object.prototype.toString.call(o)||isNaN(o.length))r=r.concat([encodeURIComponent(i),"=",encodeURIComponent(o),"&"]);else for(e=0,n=o.length;e<n;e++)r=r.concat([encodeURIComponent(i),"[]","=",encodeURIComponent(o[e]),"&"]);return r.length>0&&r.pop(),r.join("")},setParams:function(){var t=null,e=this.options.parameters;t="object"==typeof e?this.paramsObjToStr(e):""+e,t&&(this.url.indexOf("?")>-1?this.url=this.url.split("#")[0]+"&"+t:this.url=this.url.split("#")[0]+"?"+t)},getHeader:function(t){if(this.usingXDomainReq&&"Content-Type"===t)return this.transport.contentType;try{return this.transport.getResponseHeader(t)}catch(t){return null}},getAllHeaders:function(){try{return this.transport.getAllResponseHeaders()}catch(t){return null}},getResponse:function(){var t=this.transport,e={headerJSON:null,responseJSON:null,getHeader:this.getHeader,getAllHeaders:this.getAllHeaders,request:this,transport:t,timeTaken:new Date-this.startTime,requestedUrl:this.url};e.readyState=t.readyState;try{e.responseText=t.responseText}catch(t){}try{e.responseXML=t.responseXML}catch(t){}try{e.status=t.status}catch(t){e.status=0}try{e.statusText=t.statusText}catch(t){e.statusText=""}return e},abort:function(){if(this.transport){clearTimeout(this.delayTimeout),clearTimeout(this.stoTimeout),this._aborted=!0;try{this.transport.abort()}catch(t){}this.finish()}},runStateChange:function(){if(!this._aborted){var t=this.transport.readyState;if(3===t)this.isHTTP&&this.safeCall("onHeaders");else if(4===t||this.usingXDomainReq){if(this.options.asynchronous&&this.options.delay&&this.startTime+this.options.delay>(new Date).getTime())return void(this.delayTimeout=setTimeout(Ink.bind(this.runStateChange,this),this.options.delay+this.startTime-(new Date).getTime()));var e,n=this.transport.responseText,i=this.getResponse(),o=this.transport.status;this.isHTTP&&!this.options.asynchronous&&this.safeCall("onHeaders"),clearTimeout(this.stoTimeout),0===o?this.isHTTP?this.safeCall("onException",new Error("Ink.Net.Ajax: network error! (HTTP status 0)")):o=n?200:404:304===o&&(o=200);var r=this.usingXDomainReq||200<=o&&o<300,s=this.getHeader("Content-Type")||"";if(this.options.evalJS&&(s.indexOf("application/json")>=0||"force"===this.options.evalJS))try{e=this.evalJSON(n,this.sanitizeJSON),e&&(n=i.responseJSON=e)}catch(t){r&&this.safeCall("onException",t)}if(this.usingXDomainReq&&s.indexOf("xml")!==-1&&"DOMParser"in window){var a;switch(s){case"application/xml":case"application/xhtml+xml":case"image/svg+xml":a=s;break;default:a="text/xml"}var l=(new DOMParser).parseFromString(this.transport.responseText,a);this.transport.responseXML=l,i.responseXML=l}null!=this.transport.responseXML&&null==i.responseJSON&&""!==this.transport.responseXML.xml&&(n=this.transport.responseXML),(o||this.usingXDomainReq)&&(r?this.safeCall("onSuccess",i,n):this.safeCall("onFailure",i,n),this.safeCall("on"+o,i,n)),this.finish(i,n)}}},finish:function(t,e){if(t&&this.safeCall("onComplete",t,e),clearTimeout(this.stoTimeout),this.transport){try{this.transport.onreadystatechange=null}catch(t){}"function"==typeof this.transport.destroy&&this.transport.destroy(),this.transport=null}},safeCall:function(t){var e=arguments[1]instanceof Error?arguments[1]:null;if("function"==typeof this.options[t])try{this.options[t].apply(this,[].slice.call(arguments,1))}catch(e){Ink.error("Ink.Net.Ajax: an error was raised while executing "+t+".",e)}else e&&Ink.error("Ink.Net.Ajax: "+e)},setRequestHeader:function(t,e){this.options.requestHeaders||(this.options.requestHeaders={}),this.options.requestHeaders[t]=e},request:function(){if(this.transport){var t=null;this.requestHasBody?(null!==this.options.postBody&&""!==this.options.postBody?(t=this.options.postBody,this.setParams()):null!==this.options.parameters&&""!==this.options.parameters&&(t=this.options.parameters),"object"!=typeof t||t.nodeType?"object"!=typeof t&&null!==t&&(t=""+t):t=this.paramsObjToStr(t),this.options.contentType&&this.setRequestHeader("Content-Type",this.options.contentType)):this.setParams();var e=this.url,n=this.options.method,i=this.isCrossDomain;i&&this.options.xhrProxy&&(this.setRequestHeader("X-Url",e),e=this.options.xhrProxy+encodeURIComponent(e),i=!1);try{this.transport.open(n,e,this.options.asynchronous)}catch(t){return this.safeCall("onException",t),this.finish(this.getResponse(),null)}this.setHeaders(),this.safeCall("onCreate"),this.options.timeout&&!isNaN(this.options.timeout)&&(this.stoTimeout=setTimeout(Ink.bind(function(){this.options.onTimeout&&(this.safeCall("onTimeout"),this.abort())},this),1e3*this.options.timeout)),this.options.useCredentials&&!this.usingXDomainReq&&(this.transport.withCredentials=!0),this.options.asynchronous&&!this.usingXDomainReq?this.transport.onreadystatechange=Ink.bind(this.runStateChange,this):this.usingXDomainReq&&(this.transport.onload=Ink.bind(this.runStateChange,this));try{if(i)return void Ink.error("Ink.Net.Ajax: You are attempting to request a URL which is cross-domain from this one. To do this, you *must* enable the `cors` option!");this.startTime=(new Date).getTime(),this.transport.send(t)}catch(t){return this.safeCall("onException",t),this.finish(this.getResponse(),null)}this.options.asynchronous||this.runStateChange()}},isJSON:function(t){return!("string"!=typeof t||!t)&&(t=t.replace(/\\./g,"@").replace(/"[^"\\\n\r]*"/g,""),/^[,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]*$/.test(t))},evalJSON:function(strJSON,sanitize){if(strJSON&&(!sanitize||this.isJSON(strJSON)))try{return"undefined"!=typeof JSON&&"undefined"!=typeof JSON.parse?JSON.parse(strJSON):eval("("+strJSON+")")}catch(t){throw new Error("Ink.Net.Ajax: Bad JSON string. "+t)}return null}},Ajax.load=function(t,e){var n=Ajax.prototype._locationIsCrossDomain(window.location,Ajax.prototype._locationFromURL(t));return new Ajax(t,{method:"GET",cors:n,onSuccess:function(t){e(t.responseJSON||t.responseText,t)}})},Ajax.ping=function(t,e){var n=Ajax.prototype._locationIsCrossDomain(window.location,Ajax.prototype._locationFromURL(t));return new Ajax(t,{method:"HEAD",cors:n,onSuccess:function(t){"function"==typeof e&&e(t)}})},Ajax}),Ink.createModule("Ink.Net.JsonP","1",[],function(){"use strict";var t=function(t,e){this.init(t,e)};return t.prototype={init:function(t,e){if(this.options=Ink.extendObj({onSuccess:void 0,onFailure:void 0,failureObj:{},timeout:10,params:{},callbackParam:"jsoncallback",internalCallback:"_cb",randVar:!1},e||{}),this.options.randVar!==!1?this.randVar=this.options.randVar:this.randVar=parseInt(1e5*Math.random(),10),this.options.internalCallback+=this.randVar,this.uri=t,"function"==typeof this.options.onComplete&&(this.options.onSuccess=this.options.onComplete),"string"!=typeof this.uri)throw new Error("Ink.Net.JsonP: Please define an URI");if("function"!=typeof this.options.onSuccess)throw new Error("Ink.Net.JsonP: please define a callback function on option onSuccess!");Ink.Net.JsonP[this.options.internalCallback]=Ink.bind(function(){this.options.onSuccess(arguments[0]),this._cleanUp()},this),this.timeout=setTimeout(Ink.bind(function(){this.abort(),"function"==typeof this.options.onFailure&&this.options.onFailure(this.options.failureObj)},this),1e3*this.options.timeout),this._addScriptTag()},abort:function(){Ink.Net.JsonP[this.options.internalCallback]=Ink.bindMethod(this,"_cleanUp")},_addParamsToGet:function(t,e){var n,i,o,r=t.indexOf("?")!==-1,s=[t];for(i in e)e.hasOwnProperty(i)&&(r?n="&":(n="?",r=!0),o=e[i],"number"==typeof o||o||(o=""),s=s.concat([n,i,"=",encodeURIComponent(o)]));return s.join("")},_getScriptContainer:function(){return document.body||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0]||document.documentElement},_addScriptTag:function(){this.options.params[this.options.callbackParam]="Ink.Net.JsonP."+this.options.internalCallback,this.options.params.rnd_seed=this.randVar,this.uri=this._addParamsToGet(this.uri,this.options.params),this._scriptEl=document.createElement("script"),this._scriptEl.type="text/javascript",this._scriptEl.src=this.uri;var t=this._getScriptContainer();t.appendChild(this._scriptEl)},_cleanUp:function(){this.timeout&&window.clearTimeout(this.timeout),delete this.options.onSuccess,delete this.options.onFailure,delete Ink.Net.JsonP[this.options.internalCallback],this._removeScriptTag()},_removeScriptTag:function(){this._scriptEl&&(this._scriptEl.parentNode.removeChild(this._scriptEl),delete this._scriptEl)}},t}),Ink.createModule("Ink.Dom.Browser","1",[],function(){"use strict";var t={IE:!1,GECKO:!1,OPERA:!1,SAFARI:!1,KONQUEROR:!1,CHROME:!1,model:!1,version:!1,userAgent:!1,cssPrefix:!1,domPrefix:!1,init:function(){this.detectBrowser(),this.setDimensions(),this.setReferrer()},setDimensions:function(){var t=0,e=0;"number"==typeof window.innerWidth?(t=window.innerWidth,e=window.innerHeight):document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?(t=document.documentElement.clientWidth,e=document.documentElement.clientHeight):document.body&&(document.body.clientWidth||document.body.clientHeight)&&(t=document.body.clientWidth,e=document.body.clientHeight),this.windowWidth=t,this.windowHeight=e},setReferrer:function(){document.referrer&&document.referrer.length?this.referrer=window.escape(document.referrer):this.referrer=!1},detectBrowser:function(){this._sniffUserAgent(navigator.userAgent)},_sniffUserAgent:function(t){if(this.userAgent=t,t=t.toLowerCase(),/applewebkit\//.test(t)&&!/iemobile/.test(t))if(this.cssPrefix="-webkit-",this.domPrefix="Webkit",/(chrome|crios)\//.test(t))this.CHROME=!0,this.model="chrome",this.version=t.replace(/(.*)chrome\/([^\s]+)(.*)/,"$2");else{this.SAFARI=!0,this.model="safari";var e=/version\/([^) ]+)/;e.test(t)?this.version=t.match(e)[1]:this.version=t.replace(/(.*)applewebkit\/([^\s]+)(.*)/,"$2")}else if(/opera/.test(t))this.OPERA=!0,this.model="opera",this.version=t.replace(/(.*)opera.([^\s$]+)(.*)/,"$2"),this.cssPrefix="-o-",this.domPrefix="O";else if(/konqueror/.test(t))this.KONQUEROR=!0,this.model="konqueror",this.version=t.replace(/(.*)konqueror\/([^;]+);(.*)/,"$2"),this.cssPrefix="-khtml-",this.domPrefix="Khtml";else if(/(msie|trident)/i.test(t))this.IE=!0,this.model="ie",/rv:((?:\d|\.)+)/.test(t)?this.version=t.match(/rv:((?:\d|\.)+)/)[1]:this.version=t.replace(/(.*)\smsie\s([^;]+);(.*)/,"$2"),this.cssPrefix="-ms-",this.domPrefix="ms";else if(/gecko/.test(t)){this.cssPrefix="-moz-",this.domPrefix="Moz",this.GECKO=!0;var n=/(camino|chimera|epiphany|minefield|firefox|firebird|phoenix|galeon|iceweasel|k\-meleon|seamonkey|netscape|songbird|sylera)/;if(n.test(t))this.model=t.match(n)[1],this.version=t.replace(new RegExp("(.*)"+this.model+"/([^;\\s$]+)(.*)"),"$2");else{this.model="mozilla";var i=/(.*)rv:([^)]+)(.*)/;i.test(t)&&(this.version=t.replace(i,"$2"))}}},debug:function(){var t="known browsers: (ie, gecko, opera, safari, konqueror) \n";t+=[this.IE,this.GECKO,this.OPERA,this.SAFARI,this.KONQUEROR]+"\n",t+="cssPrefix -> "+this.cssPrefix+"\n",t+="domPrefix -> "+this.domPrefix+"\n",t+="model -> "+this.model+"\n",t+="version -> "+this.version+"\n",t+="\n",t+="original UA -> "+this.userAgent,alert(t)}};return t.init(),t}),Ink.createModule("Ink.Dom.Css",1,[],function(){"use strict";var t="defaultView"in document&&"getComputedStyle"in document.defaultView?document.defaultView.getComputedStyle:window.getComputedStyle,e={addRemoveClassName:function(t,e,n){return n?this.addClassName(t,e):void this.removeClassName(t,e)},addClassName:function(t,n){if(t=Ink.i(t),!t||!n)return null;n=(""+n).split(/[, ]+/);for(var i=0,o=n.length;i<o;i++)n[i].replace(/^\s+|\s+$/g,"")&&("undefined"!=typeof t.classList?t.classList.add(n[i]):e.hasClassName(t,n[i])||(t.className+=(t.className?" ":"")+n[i]))},removeClassName:function(t,e){if(t=Ink.i(t),!t||!e)return null;e=(""+e).split(/[, ]+/);var n=0,i=e.length;if("undefined"!=typeof t.classList)for(;n<i;n++)t.classList.remove(e[n]);else{for(var o,r=t.className||"";n<i;n++)o=new RegExp("(^|\\s+)"+e[n]+"(\\s+|$)"),r=r.replace(o," ");t.className=r.replace(/^\s+/,"").replace(/\s+$/,"")}},setClassName:function(t,e,n){this.addRemoveClassName(t,e,n||!1)},hasClassName:function(t,e,n){if(t=Ink.i(t),!t||!e)return!1;e=(""+e).split(/[, ]+/);for(var i,o,r=0,s=e.length;r<s;r++){if("undefined"!=typeof t.classList)i=t.classList.contains(e[r]);else{var a=t.className;a===e[r]?i=!0:(o=new RegExp("(^|\\s)"+e[r]+"(\\s|$)"),i=o.test(a))}if(i&&!n)return!0;if(!i&&n)return!1}return!!n},blinkClass:function(t,n,i,o){t=Ink.i(t),e.addRemoveClassName(t,n,!o),setTimeout(function(){e.addRemoveClassName(t,n,o)},Number(i)||100)},toggleClassName:function(t,n,i){return!(!t||!n)&&("undefined"!=typeof i?e.addRemoveClassName(t,n,i):void("undefined"==typeof t.classList||/[, ]/.test(n)?e.hasClassName(t,n)?e.removeClassName(t,n):e.addClassName(t,n):(t=Ink.i(t),null!==t&&t.classList.toggle(n))))},setOpacity:function(t,e){if(t=Ink.i(t),null!==t){var n=1;isNaN(Number(e))||(n=e<=0?0:e<=1?e:e<=100?e/100:1),"undefined"!=typeof t.style.opacity?t.style.opacity=n:t.style.filter="alpha(opacity:"+(100*n|0)+")"}},_camelCase:function(t){return t?t.replace(/-(\w)/g,function(t,e){return e.toUpperCase()}):t},getStyle:function(e,n){if(e=Ink.i(e),null!==e&&e.style){n="float"===n?"cssFloat":this._camelCase(n);var i=e.style[n];if(!t||i&&"auto"!==i)!i&&e.currentStyle&&(i=e.currentStyle[n],"auto"!==i||"width"!==n&&"height"!==n||(i=e["offset"+n.charAt(0).toUpperCase()+n.slice(1)]+"px"));else{var o=t(e,null);i=o?o[n]:null}if("opacity"===n)return i?parseFloat(i,10):1;if("borderTopWidth"===n||"borderBottomWidth"===n||"borderRightWidth"===n||"borderLeftWidth"===n){if("thin"===i)return"1px";if("medium"===i)return"3px";if("thick"===i)return"5px"}return"auto"===i?null:i}},setStyle:function(t,e){if(t=Ink.i(t),null!==t)if("string"==typeof e)t.style.cssText+="; "+e,e.indexOf("opacity")!==-1&&this.setOpacity(t,e.match(/opacity:\s*(\d?\.?\d*)/)[1]);else for(var n in e)e.hasOwnProperty(n)&&("opacity"===n?this.setOpacity(t,e[n]):"float"===n||"cssFloat"===n?"undefined"==typeof t.style.styleFloat?t.style.cssFloat=e[n]:t.style.styleFloat=e[n]:t.style[n]=e[n])},show:function(t,e){t=Ink.i(t),null!==t&&(t.style.display=e||"")},hide:function(t){t=Ink.i(t),null!==t&&(t.style.display="none")},showHide:function(t,e){t=Ink.i(t),t&&(t.style.display=e?"":"none")},toggle:function(t,e){t=Ink.i(t),null!==t&&("undefined"!=typeof e?e===!0?this.show(t):this.hide(t):"none"===this.getStyle(t,"display").toLowerCase()?this.show(t):this.hide(t))},_getRefTag:function(t){if(t.firstElementChild)return t.firstElementChild;for(var e=t.firstChild;e;e=e.nextSibling)if(1===e.nodeType)return e;return null},appendStyleTag:function(t,e,n){n=Ink.extendObj({type:"text/css",force:!1},n||{});var i,o,r=document.getElementsByTagName("style"),s=!1,a=!0;for(i=0,o=r.length;i<o;i++)s=r[i].innerHTML,s.indexOf(t)>=0&&(a=!1);if(a){var l=document.createElement("style"),h=document.getElementsByTagName("head")[0],u=!1,c="";l.type=n.type,c+=t+" {",c+=e,c+="} ","undefined"!=typeof l.styleSheet?l.styleSheet.cssText=c:l.appendChild(document.createTextNode(c)),n.force?h.appendChild(l):(u=this._getRefTag(h),u&&h.insertBefore(l,u))}},appendStylesheet:function(t,e){e=Ink.extendObj({media:"screen",type:"text/css",force:!1},e||{});var n,i=document.createElement("link"),o=document.getElementsByTagName("head")[0];i.media=e.media,i.type=e.type,i.href=t,i.rel="Stylesheet",e.force?o.appendChild(i):(n=this._getRefTag(o),n&&o.insertBefore(i,n))},_loadingCSSFiles:{},_loadedCSSFiles:{},appendStylesheetCb:function(t,e){if(!t)return e(t);if(this._loadedCSSFiles[t])return e(t);var n=this._loadingCSSFiles[t];if(n)return n.push(e);this._loadingCSSFiles[t]=[e];var i=document.createElement("link");i.type="text/css",i.rel="stylesheet",i.href=t;var o=document.getElementsByTagName("head")[0];o.appendChild(i);var r=document.createElement("img");r.onerror=Ink.bindEvent(function(t,e){var n=e;this._loadedCSSFiles[n]=!0;for(var i=this._loadingCSSFiles[n],o=0,r=i.length;o<r;++o)i[o](n);delete this._loadingCSSFiles[n]},this,t),r.src=t},decToHex:function(t){var e=function(t){return 1===t.length&&(t="0"+t),t=t.toUpperCase()};if("object"==typeof t){var n=e(parseInt(t.r,10).toString(16)),i=e(parseInt(t.g,10).toString(16)),o=e(parseInt(t.b,10).toString(16));return n+i+o}t+="";var r=t.match(/\((\d+),\s?(\d+),\s?(\d+)\)/);return null!==r?e(parseInt(r[1],10).toString(16))+e(parseInt(r[2],10).toString(16))+e(parseInt(r[3],10).toString(16)):e(parseInt(t,10).toString(16))},hexToDec:function(t){return 0===t.indexOf("#")&&(t=t.substr(1)),6===t.length?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16)}:3===t.length?{r:parseInt(t.charAt(0)+t.charAt(0),16),g:parseInt(t.charAt(1)+t.charAt(1),16),b:parseInt(t.charAt(2)+t.charAt(2),16)}:t.length<=2?parseInt(t,16):void 0},getPropertyFromStylesheet:function(t,e){var n=this.getRuleFromStylesheet(t);return n?n.style[e]:null},getPropertyFromStylesheet2:function(t,e){for(var n,i=this.getRulesFromStylesheet(t),o=0,r=i.length;o<r;o++)if(n=i[o].style[e],null!==n&&void 0!==n)return n;return null},getRuleFromStylesheet:function(t){var e,n,i,o,r,s=document.styleSheets;if(!s)return null;for(var a=0,l=document.styleSheets.length;a<l;++a){if(e=document.styleSheets[a],n=e.rules?e.rules:e.cssRules,!n)return null;for(i=0,o=n.length;i<o;++i)if(r=n[i],r.selectorText&&r.selectorText===t)return r}return null},getRulesFromStylesheet:function(t){var e,n,i,o,r,s=[],a=document.styleSheets;if(!a)return s;for(var l=0,h=document.styleSheets.length;l<h;++l){if(e=document.styleSheets[l],n=e.rules?e.rules:e.cssRules,!n)return null;for(i=0,o=n.length;i<o;++i)r=n[i],r.selectorText&&r.selectorText===t&&s.push(r)}return s},getPropertiesFromRule:function(t){var e,n,i,o=this.getRuleFromStylesheet(t),r={};o=o.style.cssText;var s,a,l,h,u=o.split(";");for(n=0,i=u.length;n<i;++n)" "===u[n].charAt(0)&&(u[n]=u[n].substring(1)),s=u[n].split(":"),e=this._camelCase(s[0].toLowerCase()),a=s[1],a&&(a=a.substring(1),"padding"===e||"margin"===e||"borderWidth"===e?("borderWidth"===e?(l="border",h="Width"):(l=e,h=""),a.indexOf(" ")!==-1?(a=a.split(" "),r[l+"Top"+h]=a[0],r[l+"Bottom"+h]=a[0],r[l+"Left"+h]=a[1],r[l+"Right"+h]=a[1]):(r[l+"Top"+h]=a,r[l+"Bottom"+h]=a,r[l+"Left"+h]=a,r[l+"Right"+h]=a)):"borderRadius"===e?a.indexOf(" ")!==-1?(a=a.split(" "),r.borderTopLeftRadius=a[0],r.borderBottomRightRadius=a[0],r.borderTopRightRadius=a[1],r.borderBottomLeftRadius=a[1]):(r.borderTopLeftRadius=a,r.borderTopRightRadius=a,r.borderBottomLeftRadius=a,r.borderBottomRightRadius=a):r[e]=a);return r},changeFontSize:function(t,e,n,i,o){var r=this;Ink.requireModules(["Ink.Dom.Selector_1"],function(s){var a;if("string"!=typeof t?a="1st argument must be a CSS selector rule.":"number"!=typeof e?a="2nd argument must be a number.":void 0!==n&&"+"!==n&&"*"!==n?a='3rd argument must be one of "+", "*".':void 0!==i&&("number"!=typeof i||i<=0)?a="4th argument must be a positive number.":void 0!==o&&("number"!=typeof o||o<o)&&(a="5th argument must be a positive number greater than minValue."),a)throw new TypeError(a);var l,h,u=s.select(t);void 0===i&&(i=1),n="*"===n?function(t,e){return t*e}:function(t,e){return t+e};for(var c=0,d=u.length;c<d;++c)h=u[c],l=parseFloat(r.getStyle(h,"fontSize")),l=n(l,e),l<i||"number"==typeof o&&l>o||(h.style.fontSize=l+"px")})}};return e}),Ink.createModule("Ink.Dom.Element",1,[],function(){"use strict";function t(t){var e={};try{e=t.getBoundingClientRect()}catch(n){e={top:t.offsetTop,left:t.offsetLeft}}return e}var e="function"==typeof document.createRange&&"function"==typeof window.Range.prototype.createContextualFragment,n="Ink.Dom.Element tbody: "+Math.random(),i=function(){var t=document.createElement("div");return t.innerHTML="<table>",0!==t.getElementsByTagName("tbody").length}(),o={isDOMElement:function(t){return null!==t&&"object"==typeof t&&"nodeType"in t&&1===t.nodeType},get:function(t){return"undefined"!=typeof t?"string"==typeof t?document.getElementById(t):t:null},create:function(t,e){var n=document.createElement(t);if(e)for(var i in e)e.hasOwnProperty(i)&&(i in o?o[i](n,e[i]):"className"===i||"class"===i?n.className=e.className||e.class:n.setAttribute(i,e[i]));return n},remove:function(t){t=Ink.i(t);var e;t&&(e=t.parentNode)&&e.removeChild(t)},scrollTo:function(t){if(t=o.get(t)){if(t.scrollIntoView)return t.scrollIntoView();var e={},n=0,i=0;do n+=t.offsetTop||0,i+=t.offsetLeft||0,t=t.offsetParent;while(t);e={x:i,y:n},window.scrollTo(e.x,e.y)}},offsetTop:function(t){return o.offset(t)[1]},offsetLeft:function(t){return o.offset(t)[0]},positionedOffset:function(t){var e=0,n=0;t=o.get(t);do if(e+=t.offsetTop||0,n+=t.offsetLeft||0,t=t.offsetParent){if("body"===t.tagName.toLowerCase())break;var i=t.style.position;if(!i&&t.currentStyle&&(i=t.currentStyle.position),(!i||"auto"===i)&&"undefined"!=typeof getComputedStyle){var r=getComputedStyle(t,null);i=r?r.position:null}if("relative"===i||"absolute"===i)break}while(t);return[n,e]},offset:function(e){e=Ink.i(e);var n=[0,0],i=e.ownerDocument,o=i.documentElement,r=t(e),s=i.body,a=o.clientTop||s.clientTop||0,l=o.clientLeft||s.clientLeft||0,h=i.pageYOffset||o.scrollTop||s.scrollTop,u=i.pageXOffset||o.scrollLeft||s.scrollLeft,c=r.top+h-a,d=r.left+u-l;
return n=[d,c]},scroll:function(t){return t=t?Ink.i(t):document.body,[window.pageXOffset?window.pageXOffset:t.scrollLeft,window.pageYOffset?window.pageYOffset:t.scrollTop]},_getPropPx:function(t,e){var n,i,o=t.getPropertyValue?t.getPropertyValue(e):t[e];return o?(i=o.indexOf("px"),n=i===-1?0:parseFloat(o,10)):n=0,n},offset2:function(t){return o.offset(t)},hasAttribute:function(t,e){return t=Ink.i(t),t.hasAttribute?t.hasAttribute(e):!!t.getAttribute(e)},insertAfter:function(t,e){(e=o.get(e))&&(null!==e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t))},insertBefore:function(t,e){(e=o.get(e))&&e.parentNode.insertBefore(t,e)},insertTop:function(t,e){(e=o.get(e))&&(e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t))},insertBottom:function(t,e){e=Ink.i(e),e.appendChild(t)},textContent:function(t){t=Ink.i(t);var e,n,i,r;switch(t&&t.nodeType){case 9:return o.textContent(t.documentElement||t.body&&t.body.parentNode||t.body);case 1:if(e="textContent"in t?t.textContent:t.innerText,"undefined"!=typeof e)return e;case 11:if(e=t.textContent,"undefined"!=typeof e)return e;if(t.firstChild===t.lastChild)return o.textContent(t.firstChild);for(e=[],i=t.childNodes,n=0,r=i.length;n<r;++n)e.push(o.textContent(i[n]));return e.join("");case 3:case 4:return t.nodeValue}return""},setTextContent:function(t,e){switch(t=Ink.i(t),t&&t.nodeType){case 1:if("innerText"in t){t.innerText=e;break}case 11:if("textContent"in t){t.textContent=e;break}case 9:for(;t.firstChild;)t.removeChild(t.firstChild);if(""!==e){var n=t.ownerDocument||t;t.appendChild(n.createTextNode(e))}break;case 3:case 4:t.nodeValue=e}},isLink:function(t){var e=t&&1===t.nodeType&&(/^a|area$/i.test(t.tagName)||t.hasAttributeNS&&t.hasAttributeNS("http://www.w3.org/1999/xlink","href"));return!!e},isAncestorOf:function(t,e){if(!e||!t)return!1;if(e.compareDocumentPosition)return 0!==(16&t.compareDocumentPosition(e));for(;e=e.parentNode;)if(e===t)return!0;return!1},descendantOf:function(t,e){return t!==e&&o.isAncestorOf(t,e)},firstElementChild:function(t){if(!t)return null;if("firstElementChild"in t)return t.firstElementChild;for(var e=t.firstChild;e&&1!==e.nodeType;)e=e.nextSibling;return e},lastElementChild:function(t){if(!t)return null;if("lastElementChild"in t)return t.lastElementChild;for(var e=t.lastChild;e&&1!==e.nodeType;)e=e.previousSibling;return e},nextElementSibling:function(t){var e=null;if(!t)return e;if("nextElementSibling"in t)return t.nextElementSibling;for(e=t.nextSibling;e&&1!==e.nodeType;)e=e.nextSibling;return e},previousElementSibling:function(t){var e=null;if(!t)return e;if("previousElementSibling"in t)return t.previousElementSibling;for(e=t.previousSibling;e&&1!==e.nodeType;)e=e.previousSibling;return e},elementWidth:function(t){return"string"==typeof t&&(t=document.getElementById(t)),t.offsetWidth},elementHeight:function(t){return"string"==typeof t&&(t=document.getElementById(t)),t.offsetHeight},elementLeft:function(t){return o.offsetLeft(t)},elementTop:function(t){return o.offsetTop(t)},elementDimensions:function(t){return t=Ink.i(t),[t.offsetWidth,t.offsetHeight]},outerDimensions:function(e){var n=t(e),i=Ink.getModule("Ink.Dom.Css_1"),o=Ink.bindMethod(i,"getStyle",e);return[n.right-n.left+parseFloat(o("marginLeft")||0)+parseFloat(o("marginRight")||0),n.bottom-n.top+parseFloat(o("marginTop")||0)+parseFloat(o("marginBottom")||0)]},inViewport:function(e,n){var i=t(Ink.i(e));return"boolean"==typeof n&&(n={partial:n,margin:0}),n=n||{},n.margin=n.margin||0,n.partial?i.bottom+n.margin>0&&i.left-n.margin<o.viewportWidth()&&i.top-n.margin<o.viewportHeight()&&i.right+n.margin>0:i.top+n.margin>0&&i.right-n.margin<o.viewportWidth()&&i.bottom-n.margin<o.viewportHeight()&&i.left+n.margin>0},isHidden:function(t){var e=t.offsetWidth,n=t.offsetHeight,i="tr"===t.tagName.toLowerCase(),o=Ink.getModule("Ink.Dom.Css_1");return 0===e&&0===n&&!i||!(0!==e&&0!==n&&!i)&&"none"===o.getStyle(t,"display").toLowerCase()},isVisible:function(t){return!this.isHidden(t)},clonePosition:function(t,e){var n=o.offset(e);return t.style.left=n[0]+"px",t.style.top=n[1]+"px",t},ellipsizeText:function(t){(t=Ink.i(t))&&(t.style.overflow="hidden",t.style.whiteSpace="nowrap",t.style.textOverflow="ellipsis")},findUpwardsHaving:function(t,e){for(;t&&1===t.nodeType;){if(e(t))return t;t=t.parentNode}return!1},findUpwardsByClass:function(t,e){var n=new RegExp("(^|\\s)"+e+"(\\s|$)"),i=function(t){var e=t.className;return e&&n.test(e)};return o.findUpwardsHaving(t,i)},findUpwardsByTag:function(t,e){e=e.toUpperCase();var n=function(t){return t.nodeName&&t.nodeName.toUpperCase()===e};return o.findUpwardsHaving(t,n)},findUpwardsById:function(t,e){var n=function(t){return t.id===e};return o.findUpwardsHaving(t,n)},findUpwardsBySelector:function(t,e){var n=Ink.getModule("Ink.Dom.Selector","1");if(!n)throw new Error("This method requires Ink.Dom.Selector");var i=function(t){return n.matchesSelector(t,e)};return o.findUpwardsHaving(t,i)},getChildrenText:function(t,e){var n,i,r,s=t.childNodes,a=s.length,l="";if(!t)return l;for(i=0;i<a;++i)n=s[i],n&&3===n.nodeType&&(r=o._trimString(String(n.data)),r.length>0?(l+=r,e&&t.removeChild(n)):t.removeChild(n));return l},_trimString:function(t){return String.prototype.trim?t.trim():t.replace(/^\s*/,"").replace(/\s*$/,"")},getSelectValues:function(t){for(var e=Ink.i(t),n=[],i=0;i<e.options.length;++i)n.push(e.options[i].value);return n},_normalizeData:function(t){for(var e,n=[],i=0,o=t.length;i<o;++i)e=t[i],e instanceof Array?1===e.length&&e.push(e[0]):e=[e,e],n.push(e);return n},fillSelect:function(t,e,n,i){var r=Ink.i(t);if(r){r.innerHTML="";var s,a;n||(a=document.createElement("option"),a.setAttribute("value",""),r.appendChild(a)),e=o._normalizeData(e);for(var l=0,h=e.length;l<h;++l)s=e[l],a=document.createElement("option"),a.setAttribute("value",s[0]),s.length>2&&a.setAttribute("extra",s[2]),a.appendChild(document.createTextNode(s[1])),s[0]===i&&a.setAttribute("selected","selected"),r.appendChild(a)}},fillRadios:function(t,e,n,i,r,s){t=Ink.i(t);var a=document.createElement("span");o.insertAfter(a,t),n=o._normalizeData(n);var l,h;i||(h=document.createElement("input"),h.setAttribute("type","radio"),h.setAttribute("name",e),h.setAttribute("value",""),a.appendChild(h),s&&a.appendChild(document.createElement(s)));for(var u=0;u<n.length;++u)l=n[u],h=document.createElement("input"),h.setAttribute("type","radio"),h.setAttribute("name",e),h.setAttribute("value",l[0]),a.appendChild(h),a.appendChild(document.createTextNode(l[1])),s&&a.appendChild(document.createElement(s)),l[0]===r&&(h.checked=!0);return a},fillChecks:function(t,e,n,i,r){t=Ink.i(t);var s=document.createElement("span");o.insertAfter(s,t),n=o._normalizeData(n),"]"!==e.substring(e.length-1)&&(e+="[]");for(var a,l,h=0;h<n.length;++h)a=n[h],l=document.createElement("input"),l.setAttribute("type","checkbox"),l.setAttribute("name",e),l.setAttribute("value",a[0]),s.appendChild(l),s.appendChild(document.createTextNode(a[1])),r&&s.appendChild(document.createElement(r)),a[0]===i&&(l.checked=!0);return s},parentIndexOf:function(t,e){if(e||(e=t,t=t.parentNode),!t)return!1;for(var n=0,i=t.children.length;n<i;++n)if(t.children[n]===e)return n;return!1},nextSiblings:function(t){if(t=Ink.i(t),"object"==typeof t&&null!==t&&t.nodeType&&1===t.nodeType){for(var e=[],n=t.parentNode.children,i=o.parentIndexOf(t.parentNode,t),r=++i,s=n.length;r<s;r++)e.push(n[r]);return e}return[]},previousSiblings:function(t){if(t=Ink.i(t),"object"==typeof t&&null!==t&&t.nodeType&&1===t.nodeType){for(var e=[],n=t.parentNode.children,i=o.parentIndexOf(t.parentNode,t),r=0,s=i;r<s;r++)e.push(n[r]);return e}return[]},siblings:function(t){if(t=Ink.i(t),"object"==typeof t&&null!==t&&t.nodeType&&1===t.nodeType){for(var e=[],n=t.parentNode.children,i=0,o=n.length;i<o;i++)t!==n[i]&&e.push(n[i]);return e}return[]},childElementCount:function(t){return t=Ink.i(t),"childElementCount"in t?t.childElementCount:t?o.siblings(t).length+1:0},_wrapElements:{TABLE:function(t,e){return i?t.innerHTML="<table>"+e+"<tbody><tr><td>"+n+"</tr></td></tbody></table>":t.innerHTML="<table>"+e+"</table>",t.firstChild},TBODY:function(t,e){return t.innerHTML="<table><tbody>"+e+"</tbody></table>",t.firstChild.getElementsByTagName("tbody")[0]},THEAD:function(t,e){return t.innerHTML="<table><thead>"+e+"</thead><tbody></tbody></table>",t.firstChild.getElementsByTagName("thead")[0]},TFOOT:function(t,e){return t.innerHTML="<table><tfoot>"+e+"</tfoot><tbody></tbody></table>",t.firstChild.getElementsByTagName("tfoot")[0]},TR:function(t,e){return t.innerHTML="<table><tbody><tr>"+e+"</tr></tbody></table>",t.firstChild.firstChild.firstChild}},_getWrapper:function(t,e){var r=t.nodeName&&t.nodeName.toUpperCase(),s=document.createElement("div"),a=o._wrapElements[r];if(!a)return s.innerHTML=e,s;if(s=a(s,e),i&&"TABLE"===r)for(var l=s.getElementsByTagName("td"),h=0,u=l.length;h<u;h++)if(l[h].innerHTML===n){var c=l[h].parentNode.parentNode;c.parentNode.removeChild(c)}return s},appendHTML:function(t,e){if(t=Ink.i(t),null!==t)for(var n=o._getWrapper(t,e);n.firstChild;)t.appendChild(n.firstChild)},prependHTML:function(t,e){if(t=Ink.i(t),null!==t)for(var n=o._getWrapper(t,e);n.lastChild;)t.insertBefore(n.lastChild,t.firstChild)},setHTML:function(t,e){if(t=Ink.i(t),null!==t)try{t.innerHTML=e}catch(n){o.clear(t),o.appendHTML(t,e)}},wrap:function(t,e){t=Ink.i(t),e=Ink.i(e);var n=t.nextSibling,i=t.parentNode;return e.appendChild(t),null!==n?i.insertBefore(e,n):i.appendChild(e),e},unwrap:function(t,e){t=Ink.i(t);var n;n="string"==typeof e?o.findUpwardsBySelector(t,e):"object"==typeof e&&e.tagName?o.findUpwardsHaving(t,function(t){return t===e}):t.parentNode,n&&n.parentNode&&o.insertBefore(t,n)},replace:function(t,e){t=Ink.i(t),null!==t&&t.parentNode.replaceChild(e,t)},removeTextNodeChildren:function(t){if(t=Ink.i(t),null!==t){var e,n,i=t;for(t=t.firstChild;t;)n=3===t.nodeType,e=t,t=t.nextSibling,n&&i.removeChild(e)}},htmlToFragment:e?function(t){var e;return"string"!=typeof t?document.createDocumentFragment():(e=document.createRange(),e.selectNode(document.body),e.createContextualFragment(t))}:function(t){var e,n,i=document.createDocumentFragment();if("string"!=typeof t)return i;for(e=document.createElement("div"),e.innerHTML=t;n=e.firstChild;)i.appendChild(n);return i},_camelCase:function(t){return t?t.replace(/-(\w)/g,function(t,e){return e.toUpperCase()}):t},data:function(t){var e;if("object"!=typeof t&&"string"!=typeof t)throw"[Ink.Dom.Element.data] :: Invalid selector defined";if("object"==typeof t)e=t;else{var n=Ink.getModule("Ink.Dom.Selector",1);if(!n)throw"[Ink.Dom.Element.data] :: this method requires Ink.Dom.Selector - v1";if(e=n.select(t),e.length<=0)throw"[Ink.Dom.Element.data] :: Can't find any element with the specified selector";e=e[0]}var i,r,s,a={},l=e.attributes||[];if(l)for(var h=0,u=l.length;h<u;++h)i=l[h],r=i.name,s=i.value,r&&0===r.indexOf("data-")&&(a[o._camelCase(r.replace("data-",""))]=s);return a},clear:function(t,e){for(;e=t.lastChild;)t.removeChild(e)},moveCursorTo:function(t,e){if(t=Ink.i(t),null!==t)if(t.setSelectionRange)t.setSelectionRange(e,e);else{var n=t.createTextRange();n.collapse(!0),n.moveEnd("character",e),n.moveStart("character",e),n.select()}},pageWidth:function(){var t;t=window.innerWidth&&window.scrollMaxX?window.innerWidth+window.scrollMaxX:document.body.scrollWidth>document.body.offsetWidth?document.body.scrollWidth:document.body.offsetWidth;var e;return window.self.innerWidth?e=document.documentElement.clientWidth?document.documentElement.clientWidth:window.self.innerWidth:document.documentElement&&document.documentElement.clientWidth?e=document.documentElement.clientWidth:document.body&&(e=document.body.clientWidth),t<e?t:e},pageHeight:function(){var t;t=window.innerHeight&&window.scrollMaxY?window.innerHeight+window.scrollMaxY:document.body.scrollHeight>document.body.offsetHeight?document.body.scrollHeight:document.body.offsetHeight;var e;return window.self.innerHeight?e=window.self.innerHeight:document.documentElement&&document.documentElement.clientHeight?e=document.documentElement.clientHeight:document.body&&(e=document.body.clientHeight),t<e?e:t},viewportWidth:function(){return"undefined"!=typeof window.innerWidth?window.innerWidth:document.documentElement&&"undefined"!=typeof document.documentElement.offsetWidth?document.documentElement.offsetWidth:void 0},viewportHeight:function(){return"undefined"!=typeof window.innerHeight?window.innerHeight:document.documentElement&&"undefined"!=typeof document.documentElement.offsetHeight?document.documentElement.offsetHeight:void 0},scrollWidth:function(){return"undefined"!=typeof window.self.pageXOffset?window.self.pageXOffset:"undefined"!=typeof document.documentElement&&"undefined"!=typeof document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft},scrollHeight:function(){return"undefined"!=typeof window.self.pageYOffset?window.self.pageYOffset:"undefined"!=typeof document.body&&"undefined"!=typeof document.body.scrollTop&&"undefined"!=typeof document.documentElement&&"undefined"!=typeof document.documentElement.scrollTop?document.body.scrollTop||document.documentElement.scrollTop:"undefined"!=typeof document.documentElement&&"undefined"!=typeof document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop}};return o}),Ink.createModule("Ink.Dom.Event",1,[],function(){/*!
	      * Bean - copyright (c) Jacob Thornton 2011-2012
	      * https://github.com/fat/bean
	      * MIT license
	      */
var t=function(t,e,n){return n()}("bean",this,function(t,e){t=t||"bean",e=e||this;var n,i=window,o=e[t],r=/[^\.]*(?=\..*)\.|.*/,s=/\..*/,a="addEventListener",l="removeEventListener",h=document||{},u=h.documentElement||{},c=u[a],d=c?a:"attachEvent",p={},f=Array.prototype.slice,m=function(t,e){return t.split(e||" ")},_=function(t){return"string"==typeof t},g=function(t){return"function"==typeof t},v="click dblclick mouseup mousedown contextmenu mousewheel mousemultiwheel DOMMouseScroll mouseover mouseout mousemove selectstart selectend keydown keypress keyup orientationchange focus blur change reset select submit load unload beforeunload resize move DOMContentLoaded readystatechange message error abort scroll ",y="show input invalid touchstart touchmove touchend touchcancel gesturestart gesturechange gestureend textinputreadystatechange pageshow pagehide popstate hashchange offline online afterprint beforeprint dragstart dragenter dragover dragleave drag drop dragend loadstart progress suspend emptied stalled loadmetadata loadeddata canplay canplaythrough playing waiting seeking seeked ended durationchange timeupdate play pause ratechange volumechange cuechange checking noupdate downloading cached updateready obsolete ",b=function(t,e,n){for(n=0;n<e.length;n++)e[n]&&(t[e[n]]=1);return t}({},m(v+(c?y:""))),k=function(){var t="compareDocumentPosition"in u?function(t,e){return e.compareDocumentPosition&&16===(16&e.compareDocumentPosition(t))}:"contains"in u?function(t,e){return e=9===e.nodeType||e===window?u:e,e!==t&&e.contains(t)}:function(t,e){for(;t=t.parentNode;)if(t===e)return 1;return 0},e=function(e){var n=e.relatedTarget;return n?n!==this&&"xul"!==n.prefix&&!/document/.test(this.toString())&&!t(n,this):null==n};return{mouseenter:{base:"mouseover",condition:e},mouseleave:{base:"mouseout",condition:e},mousewheel:{base:/Firefox/.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel"}}}(),I=function(){var t=m("altKey attrChange attrName bubbles cancelable ctrlKey currentTarget detail eventPhase getModifierState isTrusted metaKey relatedNode relatedTarget shiftKey srcElement target timeStamp type view which propertyName path"),e=t.concat(m("button buttons clientX clientY dataTransfer fromElement offsetX offsetY pageX pageY screenX screenY toElement movementX movementY region")),n=e.concat(m("wheelDelta wheelDeltaX wheelDeltaY wheelDeltaZ axis")),o=t.concat(m("char charCode key keyCode keyIdentifier keyLocation location isComposing code")),r=t.concat(m("data")),s=t.concat(m("touches targetTouches changedTouches scale rotation")),a=t.concat(m("data origin source")),l=t.concat(m("state")),c=/over|out/,d=[{reg:/key/i,fix:function(t,e){return e.keyCode=t.keyCode||t.which,o}},{reg:/click|mouse(?!(.*wheel|scroll))|menu|drag|drop/i,fix:function(t,n,i){return n.rightClick=3===t.which||2===t.button,n.pos={x:0,y:0},t.pageX||t.pageY?(n.clientX=t.pageX,n.clientY=t.pageY):(t.clientX||t.clientY)&&(n.clientX=t.clientX+h.body.scrollLeft+u.scrollLeft,n.clientY=t.clientY+h.body.scrollTop+u.scrollTop),c.test(i)&&(n.relatedTarget=t.relatedTarget||t[("mouseover"==i?"from":"to")+"Element"]),e}},{reg:/mouse.*(wheel|scroll)/i,fix:function(){return n}},{reg:/^text/i,fix:function(){return r}},{reg:/^touch|^gesture/i,fix:function(){return s}},{reg:/^message$/i,fix:function(){return a}},{reg:/^popstate$/i,fix:function(){return l}},{reg:/.*/,fix:function(){return t}}],p={},f=function(t,e,n){if(arguments.length&&(t=t||((e.ownerDocument||e.document||e).parentWindow||i).event,this.originalEvent=t,this.isNative=n,this.isBean=!0,t)){var o,r,s,a,l,h=t.type,u=t.target||t.srcElement;if(this.target=u&&3===u.nodeType?u.parentNode:u,n){if(l=p[h],!l)for(o=0,r=d.length;o<r;o++)if(d[o].reg.test(h)){p[h]=l=d[o].fix;break}for(a=l(t,this,h),o=a.length;o--;)!((s=a[o])in this)&&s in t&&(this[s]=t[s])}}};return f.prototype.preventDefault=function(){if(this.originalEvent.preventDefault)this.originalEvent.preventDefault();else try{this.originalEvent.returnValue=!1}catch(t){}},f.prototype.stopPropagation=function(){this.originalEvent.stopPropagation?this.originalEvent.stopPropagation():this.originalEvent.cancelBubble=!0},f.prototype.stop=function(){this.preventDefault(),this.stopPropagation(),this.stopped=!0},f.prototype.stopImmediatePropagation=function(){this.originalEvent.stopImmediatePropagation&&this.originalEvent.stopImmediatePropagation(),this.isImmediatePropagationStopped=function(){return!0}},f.prototype.isImmediatePropagationStopped=function(){return this.originalEvent.isImmediatePropagationStopped&&this.originalEvent.isImmediatePropagationStopped()},f.prototype.clone=function(t){var e=new f(this,this.element,this.isNative);return e.currentTarget=t,e},f}(),C=function(t,e){return c||e||t!==h&&t!==i?t:u},w=function(){var t=function(t,e,n,i){var o=function(n,o){return e.apply(t,i?f.call(o,n?0:1).concat(i):o)},r=function(n,i){return e.__beanDel?e.__beanDel.ft(n.target,t):i},s=n?function(t){var e=r(t,this);if(n.apply(e,arguments))return t&&(t.currentTarget=e),o(t,arguments)}:function(t){return e.__beanDel&&(t=t.clone(r(t))),o(t,arguments)};return s.__beanDel=e.__beanDel,s},e=function(e,n,i,o,r,s,a){var l,h=k[n];"unload"==n&&(i=T(N,e,n,i,o)),h&&(h.condition&&(i=t(e,i,h.condition,s)),n=h.base||n),this.isNative=l=b[n]&&!!e[d],this.customType=!c&&!l&&n,this.element=e,this.type=n,this.original=o,this.namespaces=r,this.eventType=c||l?n:"propertychange",this.target=C(e,l),this[d]=!!this.target[d],this.root=a,this.handler=t(e,i,null,s)};return e.prototype.inNamespaces=function(t){var e,n,i=0;if(!t)return!0;if(!this.namespaces)return!1;for(e=t.length;e--;)for(n=this.namespaces.length;n--;)t[e]==this.namespaces[n]&&i++;return t.length===i},e.prototype.matches=function(t,e,n){return!(this.element!==t||e&&this.original!==e||n&&this.handler!==n)},e}(),E=function(){var t={},e=function(n,i,o,r,s,a){var l=s?"r":"$";if(i&&"*"!=i){var h,u=0,c=t[l+i],d="*"==n;if(!c)return;for(h=c.length;u<h;u++)if((d||c[u].matches(n,o,r))&&!a(c[u],c,u,i))return}else for(var p in t)p.charAt(0)==l&&e(n,p.substr(1),o,r,s,a)},n=function(e,n,i,o){var r,s=t[(o?"r":"$")+n];if(s)for(r=s.length;r--;)if(!s[r].root&&s[r].matches(e,i,null))return!0;return!1},i=function(t,n,i,o){var r=[];return e(t,n,i,null,o,function(t){return r.push(t)}),r},o=function(e){var n=!e.root&&!this.has(e.element,e.type,null,!1),i=(e.root?"r":"$")+e.type;return(t[i]||(t[i]=[])).push(e),n},r=function(n){e(n.element,n.type,null,n.handler,n.root,function(e,n,i){return n.splice(i,1),e.removed=!0,0===n.length&&delete t[(e.root?"r":"$")+e.type],!1})},s=function(){var e,n=[];for(e in t)"$"==e.charAt(0)&&(n=n.concat(t[e]));return n};return{has:n,get:i,put:o,del:r,entries:s}}(),S=function(t){n=arguments.length?t:h.querySelectorAll?function(t,e){return e.querySelectorAll(t)}:function(){throw new Error("Bean: No selector engine installed")}},D=function(t,e){if(c||!e||!t||t.propertyName=="_on"+e){var n=E.get(this,e||t.type,null,!1),i=n.length,o=0;for(t=new I(t,this,!0),e&&(t.type=e);o<i&&!t.isImmediatePropagationStopped();o++)n[o].removed||n[o].handler.call(this,t)}},x=c?function(t,e,n){t[n?a:l](e,D,!1)}:function(t,e,n,i){var o;n?(E.put(o=new w(t,i||e,function(e){D.call(t,e,i)},D,null,null,!0)),i&&null==t["_on"+i]&&(t["_on"+i]=0),o.target.attachEvent("on"+o.eventType,o.handler)):(o=E.get(t,i||e,D,!0)[0],o&&(o.target.detachEvent("on"+o.eventType,o.handler),E.del(o)))},T=function(t,e,n,i,o){return function(){i.apply(this,arguments),t(e,n,o)}},N=function(t,e,n,i){var o,r,a=e&&e.replace(s,""),l=E.get(t,a,null,!1),h={};for(o=0,r=l.length;o<r;o++)n&&l[o].original!==n||!l[o].inNamespaces(i)||(E.del(l[o]),!h[l[o].eventType]&&l[o][d]&&(h[l[o].eventType]={t:l[o].eventType,c:l[o].type}));for(o in h)h.hasOwnProperty(o)&&(E.has(t,h[o].t,null,!1)||x(t,h[o].t,!1,h[o].c))},O=function(t,e){var i=function(e,i){for(var o,r=_(t)?n(t,i):t;e&&e!==i;e=e.parentNode)for(o=r.length;o--;)if(r[o]===e)return e},o=function(t){var n=i(t.target,this);n&&e.apply(n,arguments)};return o.__beanDel={ft:i,selector:t},o},M=c?function(t,e,n){var o=h.createEvent(t?"HTMLEvents":"UIEvents");o[t?"initEvent":"initUIEvent"](e,!0,!0,i,1),n.dispatchEvent(o)}:function(t,e,n){n=C(n,t),t?n.fireEvent("on"+e,h.createEventObject()):n["_on"+e]++},A=function(t,e,n){var i,o,a,l,h=_(e);if(h&&e.indexOf(" ")>0){for(e=m(e),l=e.length;l--;)A(t,e[l],n);return t}if(o=h&&e.replace(s,""),o&&k[o]&&(o=k[o].base),!e||h)(a=h&&e.replace(r,""))&&(a=m(a,".")),N(t,o,n,a);else if(g(e))N(t,null,e);else for(i in e)e.hasOwnProperty(i)&&A(t,i,e[i]);return t},P=function(t,e,i,o){var a,l,h,u,c,_,v;if(void 0!==i||"object"!=typeof e){for(g(i)?(c=f.call(arguments,3),o=a=i):(a=o,c=f.call(arguments,4),o=O(i,a,n)),h=m(e),this===p&&(o=T(A,t,e,o,a)),u=h.length;u--;)v=E.put(_=new w(t,h[u].replace(s,""),o,a,m(h[u].replace(r,""),"."),c,!1)),_[d]&&v&&x(t,_.eventType,!0,_.customType);return t}for(l in e)e.hasOwnProperty(l)&&P.call(this,t,l,e[l])},L=function(t,e,n,i){return P.apply(null,_(n)?[t,n,e,i].concat(arguments.length>3?f.call(arguments,5):[]):f.call(arguments))},U=function(){return P.apply(p,arguments)},F=function(t,e,n){var i,o,a,l,h,u=m(e);for(i=u.length;i--;)if(e=u[i].replace(s,""),(l=u[i].replace(r,""))&&(l=m(l,".")),l||n||!t[d])for(h=E.get(t,e,null,!1),n=[!1].concat(n),o=0,a=h.length;o<a;o++)h[o].inNamespaces(l)&&h[o].handler.apply(t,n);else M(b[e],e,t);return t},B=function(t,e,n){for(var i,o,r=E.get(e,n,null,!1),s=r.length,a=0;a<s;a++)r[a].original&&(i=[t,r[a].type],(o=r[a].handler.__beanDel)&&i.push(o.selector),i.push(r[a].original),P.apply(null,i));return t},R={on:P,add:L,one:U,off:A,remove:A,clone:B,fire:F,Event:I,setSelectorEngine:S,noConflict:function(){return e[t]=o,this}};if(i.attachEvent){var H=function(){var t,e=E.entries();for(t in e)e[t].type&&"unload"!==e[t].type&&A(e[t].element,e[t].type);i.detachEvent("onunload",H),i.CollectGarbage&&i.CollectGarbage()};i.attachEvent("onunload",H)}return S(Ink.ss),R}),e={KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_SPACE:32,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,KEY_HOME:36,KEY_END:35,KEY_PAGEUP:33,KEY_PAGEDOWN:34,KEY_INSERT:45,throttle:function(t,e,n){function i(s){var a=+new Date,l=a-r;if(n.preventDefault&&s&&"function"==typeof s.preventDefault&&s.preventDefault(),l>=e)return r=a,t.apply("bind"in n?n.bind:this,[].slice.call(arguments));var h=this,u=[].slice.call(arguments);o&&clearTimeout(o),o=setTimeout(function(){return o=null,i.apply(h,u)},e-l)}e=e||0,n=n||{};var o,r=0;return i},element:function(t){var e=t.delegationTarget||t.target||"mouseout"===t.type&&t.fromElement||"mouseleave"===t.type&&t.fromElement||"mouseover"===t.type&&t.toElement||"mouseenter"===t.type&&t.toElement||t.srcElement||null;return!e||3!==e.nodeType&&4!==e.nodeType?e:e.parentNode},relatedTarget:function(t){var e=t.relatedTarget||"mouseout"===t.type&&t.toElement||"mouseleave"===t.type&&t.toElement||"mouseover"===t.type&&t.fromElement||"mouseenter"===t.type&&t.fromElement||null;return!e||3!==e.nodeType&&4!==e.nodeType?e:e.parentNode},findElement:function(t,e,n){for(var i=this.element(t);;){if(i.nodeName.toLowerCase()===e.toLowerCase())return i;if(i=i.parentNode,!i)return!n&&document;if(!i.parentNode)return!n&&document}},observe:function(t,e,n,i){if(t=Ink.i(t))return t.addEventListener?t.addEventListener(e,n,!!i):t.attachEvent("on"+e,n=Ink.bind(n,t)),n},observeOnce:function(t,n,i,o){var r=function(){return e.stopObserving(t,n,s),i.apply(this,arguments)},s=e.observe(t,n,r,o);return s},observeMulti:function(t,e,n,i){if("string"==typeof t?t=Ink.ss(t):t&&1===t.nodeType&&(t=[t]),!t[0])return!1;for(var o=0,r=t.length;o<r;o++)this.observe(t[o],e,n,i);return n},observeDelegated:function(t,n,i,o){return e.observe(t,n,function(n){var r=e.element(n);if(r&&r!==t)for(var s=r;s!==t&&s!==document&&s;){if(Ink.Dom.Selector_1.matchesSelector(s,i))return n.delegationTarget=s,o(n);s=s.parentNode}})},stopObserving:function(t,e,n,i){t=Ink.i(t),t&&(t.removeEventListener?t.removeEventListener(e,n,!!i):t.detachEvent("on"+e,n))},stop:function(t){null!==t.cancelBubble&&(t.cancelBubble=!0),t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),window.attachEvent&&(t.returnValue=!1),null!==t.cancel&&(t.cancel=!0)},stopPropagation:function(t){null!==t.cancelBubble&&(t.cancelBubble=!0),t.stopPropagation&&t.stopPropagation()},stopDefault:function(t){t.preventDefault&&t.preventDefault(),window.attachEvent&&(t.returnValue=!1),null!==t.cancel&&(t.cancel=!0)},pointer:function(t){return{x:this.pointerX(t),y:this.pointerY(t)}},pointerX:function(t){return t.touches&&t.touches[0]&&t.touches[0].pageX||t.pageX||t.clientX},pointerY:function(t){return t.touches&&t.touches[0]&&t.touches[0].pageY||t.pageY||t.clientY},isLeftClick:function(t){if(window.addEventListener){if(0===t.button)return!0;if("touchend"===t.type&&null===t.button)return!0}else if(1===t.button)return!0;return!1},isRightClick:function(t){return 2===t.button},isMiddleClick:function(t){return window.addEventListener?1===t.button:4===t.button},getCharFromKeyboardEvent:function(t,e){var n=t.keyCode,i=String.fromCharCode(n),o=t.shiftKey;if(n>=65&&n<=90)return"boolean"==typeof e&&(o=e),o?i:i.toLowerCase();if(n>=96&&n<=105)return String.fromCharCode(48+(n-96));switch(n){case 109:case 189:return"-";case 107:case 187:return"+"}return i},debug:function(){}};return Ink.extendObj(e,t)}),Ink.createModule("Ink.Dom.FormSerialize",1,["Ink.Util.Array_1","Ink.Dom.Element_1","Ink.Dom.Selector_1"],function(t,e,n){"use strict";function i(n){return null!=n&&!e.isDOMElement(n)&&(t.isArray(n)||"string"!=typeof n&&"number"==typeof n.length)}function o(t){return i(t)?t:[t]}var r={serialize:function(e,n){n=n||{};var i={},o={},s=this.asPairs(e,{elements:!0,emptyArray:o,outputUnchecked:n.outputUnchecked});return null==s?s:(t.forEach(s,function(t){var e=/\[\]$/.test(t[0]),n=t[0].replace(/\[\]$/,""),s=t[1],a=t[2];s===o?i[n]=[]:r._resultsInArray(a)||e?n in i?(i[n]instanceof Array||(i[n]=[i[n]]),i[n].push(s)):e?i[n]=[s]:i[n]=s:i[n]=s}),i)},asPairs:function(e,i){function o(t,e,n){i.elements?a.push([t,e,n]):a.push([t,e])}function s(e){var r=e.nodeName.toLowerCase(),s=(e.type+"").toLowerCase();if("select"===r&&e.multiple){var a=!1;t.forEach(n.select("option:checked",e),function(t){o(e.name,t.value,e),a=!0}),!a&&"emptyArray"in i&&o(e.name,i.emptyArray,e)}else"input"!==r||"checkbox"!==s&&"radio"!==s||!i.outputUnchecked?o(e.name,e.value,e):o(e.name,null,e)}var a=[];if(i=i||{},e=Ink.i(e)){for(var l=t.filter(e.elements,function(t){return r._isSerialized(t,i)}),h=0,u=l.length;h<u;h++)s(l[h]);return a}return null},fillIn:function(t,e){if(!(t=Ink.i(t)))return null;var n;if("object"!=typeof e||i(e)){if(!i(e))return null;n=e}else n=r._objToPairs(e);return r._fillInPairs(t,n)},_objToPairs:function(t){var e,n=[];for(var i in t)if(t.hasOwnProperty(i)){e=o(t[i]);for(var r=0,s=e.length;r<s;r++)n.push([i,e[r]]);0===s&&n.push([i,[]])}return n},_fillInPairs:function(e,n){n=t.groupBy(n,{key:function(t){return t[0].replace(/\[\]$/,"")},adjacentGroups:!0}),n=t.map(n,function(e){var n=t.reduce(e,function(t,e){return[null,t[1].concat([e[1]])]},[null,[]])[1];return[e[0][0],n]});for(var i,s,a,l=0,h=n.length;l<h;l++){if(i=n[l][0],i in e)s=e[i];else{if(!(i+"[]"in e))continue;s=e[i+"[]"],i+="[]"}s=o(s),a=n[l][1],r._fillInOne(i,s,a)}},_fillInOne:function(t,n,i){var o=n[0],s=o.nodeName.toLowerCase(),a=o.getAttribute("type");a=a&&a.toLowerCase();var l="select"===s&&e.hasAttribute(o,"multiple");if("checkbox"===a||"radio"===a)r._fillInBoolean(n,i,"checked");else if(l)r._fillInBoolean(n[0].options,i,"selected");else{n.length!==i.length&&Ink.warn("Form had "+n.length+' inputs named "'+t+'", but received '+i.length+" values.");for(var h=0,u=Math.min(n.length,i.length);h<u;h+=1)n[h].value=i[h]}},_fillInBoolean:function(e,n,i){t.forEach(e,function(e){var o=t.inArray(e.value,n);e[i]=o})},_resultsInArray:function(t){var n=t.getAttribute("type"),i=t.nodeName.toLowerCase();return"checkbox"===n||"select"===i&&e.hasAttribute(t,"multiple")},_isSerialized:function(t,n){if(n=n||{},!e.isDOMElement(t))return!1;if(!e.hasAttribute(t,"name"))return!1;var i=t.nodeName.toLowerCase();return!(!i||"fieldset"===i||("checkbox"===t.type||"radio"===t.type)&&!n.outputUnchecked&&!t.checked)}};return r}),Ink.createModule("Ink.Dom.Loaded",1,[],function(){"use strict";var t={_contexts:[],run:function(t,e){e||(e=t,t=window);for(var n,i=0,o=this._contexts.length;i<o;i++)if(this._contexts[i][0]===t){n=this._contexts[i][1];break}n||(n={cbQueue:[],win:t,doc:t.document,root:t.document.documentElement,done:!1,top:!0},n.handlers={checkState:Ink.bindEvent(this._checkState,this,n),poll:Ink.bind(this._poll,this,n)},this._contexts.push([t,n]));var r=n.doc.addEventListener;n.add=r?"addEventListener":"attachEvent",n.rem=r?"removeEventListener":"detachEvent",n.pre=r?"":"on",n.det=r?"DOMContentLoaded":"onreadystatechange",n.wet=n.pre+"load";var s=n.handlers.checkState,a=/complete|loaded/.test(n.doc.readyState)&&"about:blank"!==n.win.location.toString();if(a)setTimeout(Ink.bind(function(){e.call(n.win,"lazy")},this),0);else{n.cbQueue.push(e),n.doc[n.add](n.det,s),n.win[n.add](n.wet,s);var l=1;try{l=n.win.frameElement}catch(t){}if(!r&&n.root&&n.root.doScroll){try{n.top=!l}catch(t){}n.top&&this._poll(n)}}},_checkState:function(t,e){if(t&&("readystatechange"!==t.type||/complete|loaded/.test(e.doc.readyState))){var n="load"===t.type?e.win:e.doc;n[e.rem](e.pre+t.type,e.handlers.checkState,!1),this._ready(e)}},_poll:function(t){try{t.root.doScroll("left")}catch(e){return setTimeout(t.handlers.poll,50)}this._ready(t)},_ready:function(t){if(!t.done){t.done=!0;for(var e=0;e<t.cbQueue.length;++e)t.cbQueue[e].call(t.win);t.cbQueue=[]}}};return t}),Ink.createModule("Ink.Dom.Selector",1,[],function(){"use strict";function t(t){return ft.test(t+"")}function e(){var t,e=[];return t=function(n,i){return e.push(n+=" ")>I.cacheLength&&delete t[e.shift()],t[n]=i}}function n(t){return t[F]=!0,t}function i(t){var e=N.createElement("div");try{return!!t(e)}catch(t){return!1}finally{e=null}}function o(t,e,n,i){var o,r,s,a,l,c,d,p,f,m;if((e?e.ownerDocument||e:B)!==N&&T(e),e=e||N,n=n||[],!t||"string"!=typeof t)return n;if(1!==(a=e.nodeType)&&9!==a)return[];if(M&&!i){if(o=mt.exec(t))if(s=o[1]){if(9===a){if(r=e.getElementById(s),!r||!r.parentNode)return n;if(r.id===s)return n.push(r),n}else if(e.ownerDocument&&(r=e.ownerDocument.getElementById(s))&&U(e,r)&&r.id===s)return n.push(r),n}else{if(o[2])return Q.apply(n,e.getElementsByTagName(t)),n;if((s=o[3])&&R.getElementsByClassName&&e.getElementsByClassName)return Q.apply(n,e.getElementsByClassName(s)),n}if(R.qsa&&!A.test(t)){if(d=!0,p=F,f=e,m=9===a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(c=h(t),(d=e.getAttribute("id"))?p=d.replace(vt,"\\$&"):e.setAttribute("id",p),p="[id='"+p+"'] ",l=c.length;l--;)c[l]=p+u(c[l]);f=pt.test(t)&&e.parentNode||e,m=c.join(",")}if(m)try{return Q.apply(n,f.querySelectorAll(m)),n}catch(t){}finally{d||e.removeAttribute("id")}}}return v(t.replace(at,"$1"),e,n,i)}function r(t,e){var n=e&&t,i=n&&(~e.sourceIndex||J)-(~t.sourceIndex||J);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function s(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function a(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function l(t){return n(function(e){return e=+e,n(function(n,i){for(var o,r=t([],n.length,e),s=r.length;s--;)n[o=r[s]]&&(n[o]=!(i[o]=n[o]))})})}function h(t,e){var n,i,r,s,a,l,h,u=V[t+" "];if(u)return e?0:u.slice(0);for(a=t,l=[],h=I.preFilter;a;){n&&!(i=lt.exec(a))||(i&&(a=a.slice(i[0].length)||a),l.push(r=[])),n=!1,(i=ht.exec(a))&&(n=i.shift(),r.push({value:n,type:i[0].replace(at," ")}),a=a.slice(n.length));for(s in I.filter)!(i=dt[s].exec(a))||h[s]&&!(i=h[s](i))||(n=i.shift(),r.push({value:n,type:s,matches:i}),a=a.slice(n.length));if(!n)break}return e?a.length:a?o.error(t):V(t,l).slice(0)}function u(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function c(t,e,n){var i=e.dir,o=n&&"parentNode"===i,r=j++;return e.first?function(e,n,r){for(;e=e[i];)if(1===e.nodeType||o)return t(e,n,r)}:function(e,n,s){var a,l,h,u=H+" "+r;if(s){for(;e=e[i];)if((1===e.nodeType||o)&&t(e,n,s))return!0}else for(;e=e[i];)if(1===e.nodeType||o)if(h=e[F]||(e[F]={}),(l=h[i])&&l[0]===u){if((a=l[1])===!0||a===k)return a===!0}else if(l=h[i]=[u],l[1]=t(e,n,s)||k,l[1]===!0)return!0}}function d(t){return t.length>1?function(e,n,i){for(var o=t.length;o--;)if(!t[o](e,n,i))return!1;return!0}:t[0]}function p(t,e,n,i,o){for(var r,s=[],a=0,l=t.length,h=null!=e;a<l;a++)(r=t[a])&&(n&&!n(r,i,o)||(s.push(r),h&&e.push(a)));return s}function f(t,e,i,o,r,s){return o&&!o[F]&&(o=f(o)),r&&!r[F]&&(r=f(r,s)),n(function(n,s,a,l){var h,u,c,d=[],f=[],m=s.length,_=n||g(e||"*",a.nodeType?[a]:a,[]),v=!t||!n&&e?_:p(_,d,t,a,l),y=i?r||(n?t:m||o)?[]:s:v;if(i&&i(v,y,a,l),o)for(h=p(y,f),o(h,[],a,l),u=h.length;u--;)(c=h[u])&&(y[f[u]]=!(v[f[u]]=c));if(n){if(r||t){if(r){for(h=[],u=y.length;u--;)(c=y[u])&&h.push(v[u]=c);r(null,y=[],h,l)}for(u=y.length;u--;)(c=y[u])&&(h=r?tt.call(n,c):d[u])>-1&&(n[h]=!(s[h]=c))}}else y=p(y===s?y.splice(m,y.length):y),r?r(null,s,y,l):Q.apply(s,y)})}function m(t){for(var e,n,i,o=t.length,r=I.relative[t[0].type],s=r||I.relative[" "],a=r?1:0,l=c(function(t){return t===e},s,!0),h=c(function(t){return tt.call(e,t)>-1},s,!0),p=[function(t,n,i){return!r&&(i||n!==S)||((e=n).nodeType?l(t,n,i):h(t,n,i))}];a<o;a++)if(n=I.relative[t[a].type])p=[c(d(p),n)];else{if(n=I.filter[t[a].type].apply(null,t[a].matches),n[F]){for(i=++a;i<o&&!I.relative[t[i].type];i++);return f(a>1&&d(p),a>1&&u(t.slice(0,a-1)).replace(at,"$1"),n,a<i&&m(t.slice(a,i)),i<o&&m(t=t.slice(i)),i<o&&u(t))}p.push(n)}return d(p)}function _(t,e){var i=0,r=e.length>0,s=t.length>0,a=function(n,a,l,h,u){var c,d,f,m=[],_=0,g="0",v=n&&[],y=null!=u,b=S,C=n||s&&I.find.TAG("*",u&&a.parentNode||a),w=H+=null==b?1:Math.random()||.1;for(y&&(S=a!==N&&a,k=i);null!=(c=C[g]);g++){if(s&&c){for(d=0;f=t[d++];)if(f(c,a,l)){h.push(c);break}y&&(H=w,k=++i)}r&&((c=!f&&c)&&_--,n&&v.push(c))}if(_+=g,r&&g!==_){for(d=0;f=e[d++];)f(v,m,a,l);if(n){if(_>0)for(;g--;)v[g]||m[g]||(m[g]=G.call(h));m=p(m)}Q.apply(h,m),y&&!n&&m.length>0&&_+e.length>1&&o.uniqueSort(h)}return y&&(H=w,S=b),v};return r?n(a):a}function g(t,e,n){for(var i=0,r=e.length;i<r;i++)o(t,e[i],n);return n}function v(t,e,n,i){var o,r,s,a,l,c=h(t);if(!i&&1===c.length){if(r=c[0]=c[0].slice(0),r.length>2&&"ID"===(s=r[0]).type&&9===e.nodeType&&M&&I.relative[r[1].type]){if(e=(I.find.ID(s.matches[0].replace(bt,kt),e)||[])[0],!e)return n;t=t.slice(r.shift().value.length)}for(o=dt.needsContext.test(t)?0:r.length;o--&&(s=r[o],!I.relative[a=s.type]);)if((l=I.find[a])&&(i=l(s.matches[0].replace(bt,kt),pt.test(r[0].type)&&e.parentNode||e))){if(r.splice(o,1),t=i.length&&u(r),!t)return Q.apply(n,i),n;break}}return E(t,c)(i,e,!M,n,pt.test(t)),n}function y(){}/*!
	 * Sizzle CSS Selector Engine
	 * Copyright 2013 jQuery Foundation and other contributors
	 * Released under the MIT license
	 * http://sizzlejs.com/
	 */
var b,k,I,C,w,E,S,D,x,T,N,O,M,A,P,L,U,F="sizzle"+-new Date,B=window.document,R={},H=0,j=0,z=e(),V=e(),q=e(),W=!1,Y=function(){return 0},$="undefined",J=1<<31,X=[],G=X.pop,K=X.push,Q=X.push,Z=X.slice,tt=X.indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(this[e]===t)return e;return-1},et="[\\x20\\t\\r\\n\\f]",nt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",it=nt.replace("w","w#"),ot="([*^$|!~]?=)",rt="\\["+et+"*("+nt+")"+et+"*(?:"+ot+et+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+it+")|)|)"+et+"*\\]",st=":("+nt+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+rt.replace(3,8)+")*)|.*)\\)|)",at=new RegExp("^"+et+"+|((?:^|[^\\\\])(?:\\\\.)*)"+et+"+$","g"),lt=new RegExp("^"+et+"*,"+et+"*"),ht=new RegExp("^"+et+"*([\\x20\\t\\r\\n\\f>+~])"+et+"*"),ut=new RegExp(st),ct=new RegExp("^"+it+"$"),dt={ID:new RegExp("^#("+nt+")"),CLASS:new RegExp("^\\.("+nt+")"),NAME:new RegExp("^\\[name=['\"]?("+nt+")['\"]?\\]"),TAG:new RegExp("^("+nt.replace("w","w*")+")"),ATTR:new RegExp("^"+rt),PSEUDO:new RegExp("^"+st),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+et+"*(even|odd|(([+-]|)(\\d*)n|)"+et+"*(?:([+-]|)"+et+"*(\\d+)|))"+et+"*\\)|)","i"),needsContext:new RegExp("^"+et+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+et+"*((?:-\\d)?\\d*)"+et+"*\\)|)(?=[^-]|$)","i")},pt=/[\x20\t\r\n\f]*[+~]/,ft=/^[^{]+\{\s*\[native code/,mt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,_t=/^(?:input|select|textarea|button)$/i,gt=/^h\d$/i,vt=/'|\\/g,yt=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,bt=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,kt=function(t,e){var n="0x"+e-65536;return n!==n?e:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)};try{Q.apply(X=Z.call(B.childNodes),B.childNodes),X[B.childNodes.length].nodeType}catch(t){Q={apply:X.length?function(t,e){K.apply(t,Z.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}w=o.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},T=o.setDocument=function(e){var n=e?e.ownerDocument||e:B;return n!==N&&9===n.nodeType&&n.documentElement?(N=n,O=n.documentElement,M=!w(n),R.getElementsByTagName=i(function(t){return t.appendChild(n.createComment("")),!t.getElementsByTagName("*").length}),R.attributes=i(function(t){t.innerHTML="<select></select>";var e=typeof t.lastChild.getAttribute("multiple");return"boolean"!==e&&"string"!==e}),R.getElementsByClassName=i(function(t){return t.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!(!t.getElementsByClassName||!t.getElementsByClassName("e").length)&&(t.lastChild.className="e",2===t.getElementsByClassName("e").length)}),R.getByName=i(function(t){t.id=F+0,t.appendChild(N.createElement("a")).setAttribute("name",F),t.appendChild(N.createElement("i")).setAttribute("name",F),O.appendChild(t);var e=n.getElementsByName&&n.getElementsByName(F).length===2+n.getElementsByName(F+0).length;return O.removeChild(t),e}),R.sortDetached=i(function(t){return t.compareDocumentPosition&&1&t.compareDocumentPosition(N.createElement("div"))}),I.attrHandle=i(function(t){return t.innerHTML="<a href='#'></a>",t.firstChild&&typeof t.firstChild.getAttribute!==$&&"#"===t.firstChild.getAttribute("href")})?{}:{href:function(t){return t.getAttribute("href",2)},type:function(t){return t.getAttribute("type")}},R.getByName?(I.find.ID=function(t,e){if(typeof e.getElementById!==$&&M){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},I.filter.ID=function(t){var e=t.replace(bt,kt);return function(t){return t.getAttribute("id")===e}}):(I.find.ID=function(t,e){if(typeof e.getElementById!==$&&M){var n=e.getElementById(t);return n?n.id===t||typeof n.getAttributeNode!==$&&n.getAttributeNode("id").value===t?[n]:void 0:[]}},I.filter.ID=function(t){var e=t.replace(bt,kt);return function(t){var n=typeof t.getAttributeNode!==$&&t.getAttributeNode("id");return n&&n.value===e}}),I.find.TAG=R.getElementsByTagName?function(t,e){if(typeof e.getElementsByTagName!==$)return e.getElementsByTagName(t)}:function(t,e){var n,i=[],o=0,r=e.getElementsByTagName(t);if("*"===t){for(;n=r[o++];)1===n.nodeType&&i.push(n);return i}return r},I.find.NAME=R.getByName&&function(t,e){if(typeof e.getElementsByName!==$)return e.getElementsByName(name)},I.find.CLASS=R.getElementsByClassName&&function(t,e){if(typeof e.getElementsByClassName!==$&&M)return e.getElementsByClassName(t)},P=[],A=[":focus"],(R.qsa=t(n.querySelectorAll))&&(i(function(t){t.innerHTML="<select><option selected=''></option></select>",t.querySelectorAll("[selected]").length||A.push("\\["+et+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),t.querySelectorAll(":checked").length||A.push(":checked")}),i(function(t){t.innerHTML="<input type='hidden' i=''/>",t.querySelectorAll("[i^='']").length&&A.push("[*^$]="+et+"*(?:\"\"|'')"),t.querySelectorAll(":enabled").length||A.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),A.push(",.*:")})),(R.matchesSelector=t(L=O.matchesSelector||O.mozMatchesSelector||O.webkitMatchesSelector||O.oMatchesSelector||O.msMatchesSelector))&&i(function(t){R.disconnectedMatch=L.call(t,"div"),L.call(t,"[s!='']:x"),P.push("!=",st)}),A=new RegExp(A.join("|")),P=P.length&&new RegExp(P.join("|")),U=t(O.contains)||O.compareDocumentPosition?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},Y=O.compareDocumentPosition?function(t,e){if(t===e)return W=!0,0;var i=e.compareDocumentPosition&&t.compareDocumentPosition&&t.compareDocumentPosition(e);return i?1&i||D&&e.compareDocumentPosition(t)===i?t===n||U(B,t)?-1:e===n||U(B,e)?1:x?tt.call(x,t)-tt.call(x,e):0:4&i?-1:1:t.compareDocumentPosition?-1:1}:function(t,e){var i,o=0,s=t.parentNode,a=e.parentNode,l=[t],h=[e];if(t===e)return W=!0,0;if(!s||!a)return t===n?-1:e===n?1:s?-1:a?1:0;if(s===a)return r(t,e);for(i=t;i=i.parentNode;)l.unshift(i);for(i=e;i=i.parentNode;)h.unshift(i);for(;l[o]===h[o];)o++;return o?r(l[o],h[o]):l[o]===B?-1:h[o]===B?1:0},N):N},o.matches=function(t,e){return o(t,null,null,e)},o.matchesSelector=function(t,e){if((t.ownerDocument||t)!==N&&T(t),e=e.replace(yt,"='$1']"),R.matchesSelector&&M&&(!P||!P.test(e))&&!A.test(e))try{var n=L.call(t,e);if(n||R.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){}return o(e,N,null,[t]).length>0},o.contains=function(t,e){return(t.ownerDocument||t)!==N&&T(t),U(t,e)},o.attr=function(t,e){var n;return(t.ownerDocument||t)!==N&&T(t),M&&(e=e.toLowerCase()),(n=I.attrHandle[e])?n(t):!M||R.attributes?t.getAttribute(e):((n=t.getAttributeNode(e))||t.getAttribute(e))&&t[e]===!0?e:n&&n.specified?n.value:null},o.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},o.uniqueSort=function(t){var e,n=[],i=0,o=0;if(W=!R.detectDuplicates,D=!R.sortDetached,x=!R.sortStable&&t.slice(0),t.sort(Y),W){for(;e=t[o++];)e===t[o]&&(i=n.push(o));for(;i--;)t.splice(n[i],1)}return t},C=o.getText=function(t){var e,n="",i=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=C(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[i];i++)n+=C(e);return n},I=o.selectors={cacheLength:50,createPseudo:n,match:dt,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(bt,kt),t[3]=(t[4]||t[5]||"").replace(bt,kt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||o.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&o.error(t[0]),t},PSEUDO:function(t){var e,n=!t[5]&&t[2];return dt.CHILD.test(t[0])?null:(t[4]?t[2]=t[4]:n&&ut.test(n)&&(e=h(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){return"*"===t?function(){return!0}:(t=t.replace(bt,kt).toLowerCase(),function(e){return e.nodeName&&e.nodeName.toLowerCase()===t})},CLASS:function(t){var e=z[t+" "];return e||(e=new RegExp("(^|"+et+")"+t+"("+et+"|$)"))&&z(t,function(t){return e.test(t.className||typeof t.getAttribute!==$&&t.getAttribute("class")||"")})},ATTR:function(t,e,n){return function(i){var r=o.attr(i,t);return null==r?"!="===e:!e||(r+="","="===e?r===n:"!="===e?r!==n:"^="===e?n&&0===r.indexOf(n):"*="===e?n&&r.indexOf(n)>-1:"$="===e?n&&r.slice(-n.length)===n:"~="===e?(" "+r+" ").indexOf(n)>-1:"|="===e&&(r===n||r.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,i,o){var r="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===i&&0===o?function(t){return!!t.parentNode}:function(e,n,l){var h,u,c,d,p,f,m=r!==s?"nextSibling":"previousSibling",_=e.parentNode,g=a&&e.nodeName.toLowerCase(),v=!l&&!a;if(_){if(r){for(;m;){for(c=e;c=c[m];)if(a?c.nodeName.toLowerCase()===g:1===c.nodeType)return!1;f=m="only"===t&&!f&&"nextSibling"}return!0}if(f=[s?_.firstChild:_.lastChild],s&&v){for(u=_[F]||(_[F]={}),h=u[t]||[],p=h[0]===H&&h[1],d=h[0]===H&&h[2],c=p&&_.childNodes[p];c=++p&&c&&c[m]||(d=p=0)||f.pop();)if(1===c.nodeType&&++d&&c===e){u[t]=[H,p,d];break}}else if(v&&(h=(e[F]||(e[F]={}))[t])&&h[0]===H)d=h[1];else for(;(c=++p&&c&&c[m]||(d=p=0)||f.pop())&&((a?c.nodeName.toLowerCase()!==g:1!==c.nodeType)||!++d||(v&&((c[F]||(c[F]={}))[t]=[H,d]),c!==e)););return d-=o,d===i||d%i===0&&d/i>=0}}},PSEUDO:function(t,e){var i,r=I.pseudos[t]||I.setFilters[t.toLowerCase()]||o.error("unsupported pseudo: "+t);return r[F]?r(e):r.length>1?(i=[t,t,"",e],I.setFilters.hasOwnProperty(t.toLowerCase())?n(function(t,n){for(var i,o=r(t,e),s=o.length;s--;)i=tt.call(t,o[s]),t[i]=!(n[i]=o[s])}):function(t){return r(t,0,i)}):r}},pseudos:{not:n(function(t){var e=[],i=[],o=E(t.replace(at,"$1"));return o[F]?n(function(t,e,n,i){for(var r,s=o(t,null,i,[]),a=t.length;a--;)(r=s[a])&&(t[a]=!(e[a]=r))}):function(t,n,r){return e[0]=t,o(e,null,r,i),!i.pop()}}),has:n(function(t){return function(e){return o(t,e).length>0}}),contains:n(function(t){return function(e){return(e.textContent||e.innerText||C(e)).indexOf(t)>-1}}),lang:n(function(t){return ct.test(t||"")||o.error("unsupported lang: "+t),t=t.replace(bt,kt).toLowerCase(),function(e){var n;do if(n=M?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(t){var e=window.location&&window.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===O},focus:function(t){return t===N.activeElement&&(!N.hasFocus||N.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeName>"@"||3===t.nodeType||4===t.nodeType)return!1;return!0},parent:function(t){return!I.pseudos.empty(t)},header:function(t){return gt.test(t.nodeName)},input:function(t){return _t.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||e.toLowerCase()===t.type)},first:l(function(){return[0]}),last:l(function(t,e){return[e-1]}),eq:l(function(t,e,n){return[n<0?n+e:n]}),even:l(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:l(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:l(function(t,e,n){for(var i=n<0?n+e:n;--i>=0;)t.push(i);return t}),gt:l(function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t})}};for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})I.pseudos[b]=s(b);for(b in{submit:!0,reset:!0})I.pseudos[b]=a(b);return E=o.compile=function(t,e){var n,i=[],o=[],r=q[t+" "];if(!r){for(e||(e=h(t)),n=e.length;n--;)r=m(e[n]),r[F]?i.push(r):o.push(r);r=q(t,_(o,i))}return r},I.pseudos.nth=I.pseudos.eq,y.prototype=I.filters=I.pseudos,I.setFilters=new y,R.sortStable=F.split("").sort(Y).join("")===F,T(),[0,0].sort(Y),R.detectDuplicates=W,{select:o,matches:o.matches,matchesSelector:o.matchesSelector}}),Ink.createModule("Ink.Util.Array","1",[],function(){"use strict";var t=Array.prototype,e={isArray:Array.isArray||function(t){return"[object Array]"==={}.toString.call(t)},groupBy:function(t,n){function i(t){return"function"==typeof n.key?n.key(t):"string"==typeof n.key?t[n.key]:t}function o(t){var e=n.pairs?[t,[]]:[];return a.push(e),s.push(t),e}n=n||{};for(var r,s=[],a=[],l=0,h=t.length;l<h;l++){r=i(t[l]);var u;u=n.adjacentGroups?s[s.length-1]===r?a[a.length-1]:o(r):a[e.keyValue(r,s,!0)]||o(r),n.pairs?u[1].push(t[l]):u.push(t[l])}return a},reduce:function(e,n,i){if(t.reduce)return t.reduce.apply(e,t.slice.call(arguments,1));var o,r=Object(e),s=r.length>>>0,a=0;if(arguments.length>=3)o=i;else{for(;a<s&&!(a in r);)a++;if(a>=s)throw new TypeError("Reduce of empty array with no initial value");o=r[a++]}for(;a<s;a++)a in r&&(o=n(o,r[a],a,r));return o},inArray:function(t,e){if("object"==typeof e)for(var n=0,i=e.length;n<i;++n)if(e[n]===t)return!0;return!1},sortMulti:function(t,e){if("undefined"==typeof t||t.constructor!==Array)return!1;if("string"!=typeof e)return t.sort();if(t.length>0){if("undefined"==typeof t[0][e])return!1;t.sort(function(t,n){var i=t[e],o=n[e];return i<o?-1:i>o?1:0})}return t},keyValue:function(t,e,n){if("undefined"!=typeof t&&"object"==typeof e&&this.inArray(t,e)){for(var i=[],o=0,r=e.length;o<r;++o)if(e[o]===t){if("undefined"!=typeof n&&n===!0)return o;i.push(o)}return i}return!1},shuffle:function(t){if("undefined"!=typeof t&&t.constructor!==Array)return!1;for(var e=t.length,n=!1,i=!1;e--;)i=Math.floor(Math.random()*(e+1)),n=t[e],t[e]=t[i],t[i]=n;return t},forEach:function(e,n,i){if(t.forEach)return t.forEach.call(e,n,i);for(var o=0,r=e.length>>>0;o<r;o++)n.call(i,e[o],o,e)},forEachObj:function(t,n,i){e.forEach(e.keys(t),function(e){n.call(i||null,t[e],e,t)})},each:function(){e.forEach.apply(e,t.slice.call(arguments))},map:function(e,n,i){if(t.map)return t.map.call(e,n,i);for(var o=new Array(s),r=0,s=e.length>>>0;r<s;r++)o[r]=n.call(i,e[r],r,e);return o},filter:function(e,n,i){if(t.filter)return t.filter.call(e,n,i);for(var o=[],r=null,s=0,a=e.length;s<a;s++)r=e[s],n.call(i,r,s,e)&&o.push(r);return o},some:function(t,e,n){if(null===t)throw new TypeError("First argument is invalid.");var i=Object(t),o=i.length>>>0;if("function"!=typeof e)throw new TypeError("Second argument must be a function.");for(var r=0;r<o;r++)if(r in i&&e.call(n,i[r],r,i))return!0;return!1},intersect:function(t,e){if(!t||!e||t instanceof Array==0||e instanceof Array==0)return[];for(var n=[],i=0,o=t.length;i<o;++i)for(var r=0,s=e.length;r<s;++r)t[i]===e[r]&&n.push(t[i]);return n},convert:function(e){return t.slice.call(e||[],0)},unique:function(t){if(!Array.prototype.lastIndexOf){var n=[];return e.forEach(e.convert(t),function(t){e.inArray(t,n)||n.push(t)}),n}return e.filter(e.convert(t),function(t,e,n){return n.lastIndexOf(t)===e})},range:function(t,e,n){1===arguments.length&&(e=t,t=0),n||(n=1);var i,o=[];if(n>0)for(i=t;i<e;i+=n)o.push(i);else for(i=t;i>e;i+=n)o.push(i);return o},insert:function(t,e,n){t.splice(e,0,n)},keys:function(t){if(Object.keys)return Object.keys(t);var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e},remove:function(t,e,n){for(var i=[],o=0,r=t.length;o<r;o++)o>=e&&o<e+n||i.push(t[o]);return i}};return e}),Ink.createModule("Ink.Util.BinPack","1",[],function(){"use strict";var t=function(t,e){this.init(t,e)};t.prototype={init:function(t,e){this.root={x:0,y:0,w:t,h:e}},fit:function(t){var e,n,i;for(e=0;e<t.length;++e)i=t[e],(n=this.findNode(this.root,i.w,i.h))&&(i.fit=this.splitNode(n,i.w,i.h))},findNode:function(t,e,n){return t.used?this.findNode(t.right,e,n)||this.findNode(t.down,e,n):e<=t.w&&n<=t.h?t:null},splitNode:function(t,e,n){return t.used=!0,t.down={x:t.x,y:t.y+n,w:t.w,h:t.h-n},t.right={x:t.x+e,y:t.y,w:t.w-e,h:n},t}};var e=function(){};e.prototype={fit:function(t){var e,n,i,o=t.length,r=o>0?t[0].w:0,s=o>0?t[0].h:0;for(this.root={x:0,y:0,w:r,h:s},e=0;e<o;e++)i=t[e],(n=this.findNode(this.root,i.w,i.h))?i.fit=this.splitNode(n,i.w,i.h):i.fit=this.growNode(i.w,i.h)},findNode:function(t,e,n){return t.used?this.findNode(t.right,e,n)||this.findNode(t.down,e,n):e<=t.w&&n<=t.h?t:null},splitNode:function(t,e,n){return t.used=!0,t.down={x:t.x,y:t.y+n,w:t.w,h:t.h-n},t.right={x:t.x+e,y:t.y,w:t.w-e,h:n},t},growNode:function(t,e){var n=t<=this.root.w,i=e<=this.root.h,o=i&&this.root.h>=this.root.w+t,r=n&&this.root.w>=this.root.h+e;return o?this.growRight(t,e):r?this.growDown(t,e):i?this.growRight(t,e):n?this.growDown(t,e):null},growRight:function(t,e){this.root={used:!0,x:0,y:0,w:this.root.w+t,h:this.root.h,down:this.root,right:{x:this.root.w,y:0,w:t,h:this.root.h}};var n;return(n=this.findNode(this.root,t,e))?this.splitNode(n,t,e):null},growDown:function(t,e){this.root={used:!0,x:0,y:0,w:this.root.w,h:this.root.h+e,down:{x:0,y:this.root.h,w:this.root.w,h:e},right:this.root};var n;return(n=this.findNode(this.root,t,e))?this.splitNode(n,t,e):null}};var n={random:function(){return Math.random()-.5},w:function(t,e){return e.w-t.w},h:function(t,e){return e.h-t.h},a:function(t,e){return e.area-t.area},max:function(t,e){return Math.max(e.w,e.h)-Math.max(t.w,t.h)},min:function(t,e){return Math.min(e.w,e.h)-Math.min(t.w,t.h)},height:function(t,e){return n.msort(t,e,["h","w"])},width:function(t,e){return n.msort(t,e,["w","h"])},area:function(t,e){return n.msort(t,e,["a","h","w"])},maxside:function(t,e){return n.msort(t,e,["max","min","h","w"])},msort:function(t,e,i){var o,r;for(r=0;r<i.length;++r)if(o=n[i[r]](t,e),0!==o)return o;return 0}},i=function(){return[this.w," x ",this.h].join("")},o={binPack:function(o){var r,s,a;for(r=0,s=o.blocks.length;r<s;++r)a=o.blocks[r],"area"in a||(a.area=a.w*a.h);var l=o.dimensions?new t(o.dimensions[0],o.dimensions[1]):new e;o.sorter||(o.sorter="maxside"),o.blocks.sort(n[o.sorter]),l.fit(o.blocks);var h=[l.root.w,l.root.h],u=[],c=[];for(r=0,s=o.blocks.length;r<s;++r)a=o.blocks[r],a.fit?u.push(a):(a.toString=i,c.push(a));var d=h[0]*h[1],p=0;for(r=0,s=u.length;r<s;++r)a=u[r],p+=a.area;return{dimensions:h,filled:p/d,blocks:o.blocks,fitted:u,unfitted:c}}};return o}),Ink.createModule("Ink.Util.Cookie","1",[],function(){"use strict";var t={get:function(t){var e=document.cookie||!1,n={};if(e){e=e.replace(new RegExp("; ","g"),";");var i=e.split(";"),o=[];if(i.length>0)for(var r=0;r<i.length;r++)o=i[r].split("="),2===o.length&&(n[o[0]]=decodeURIComponent(o[1]));if(t)return"undefined"!=typeof n[t]?n[t]:null}return n},set:function(t,e,n,i,o,r){var s;if(!t||e===!1||"undefined"==typeof t||"undefined"==typeof e)return!1;s=t+"="+encodeURIComponent(e);var a=!1,l=!1,h=!1,u=!1;if(n&&"undefined"!=typeof n&&!isNaN(n)){var c=new Date,d=parseInt(Number(c.valueOf()),10)+1e3*Number(parseInt(n,10)),p=new Date(d),f=p.toGMTString(),m=new RegExp("([^\\s]+)(\\s\\d\\d)\\s(\\w\\w\\w)\\s(.*)");f=f.replace(m,"$1$2-$3-$4"),a="expires="+f}else a="undefined"==typeof n||isNaN(n)||0!==Number(parseInt(n,10))?"expires=Thu, 01-Jan-2037 00:00:01 GMT":"";l=i&&"undefined"!=typeof i?"path="+i:"path=/",o?h="domain="+o:/\./.test(window.location.hostname)&&(h="domain="+window.location.hostname),u=!(!r||"undefined"==typeof r)&&r,document.cookie=s+"; "+a+"; "+l+(h?"; "+h:"")+"; "+u},remove:function(t,e,n){var i=-1;this.set(t,"deleted",i,e,n)}};return t}),Ink.createModule("Ink.Util.Date","1",[],function(){"use strict";var t={_months:function(t){var e=["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"];return e[t]},_iMonth:function(t){return Number(t)?+t-1:{janeiro:0,jan:0,fevereiro:1,fev:1,"maro":2,mar:2,abril:3,abr:3,maio:4,mai:4,junho:5,jun:5,julho:6,jul:6,agosto:7,ago:7,setembro:8,set:8,outubro:9,out:9,novembro:10,nov:10,dezembro:11,dez:11}[t.toLowerCase()]},_wDays:function(t){var e=["Domingo","Segunda","Tera","Quarta","Quinta","Sexta","Sbado"];return e[t]},_iWeek:function(t){return Number(t)?+t||7:{segunda:1,seg:1,"tera":2,ter:2,quarta:3,qua:3,quinta:4,qui:4,sexta:5,sex:5,"sbado":6,"sb":6,domingo:7,dom:7}[t.toLowerCase()]},_daysInMonth:function(t,e){var n;return n=1===t||3===t||5===t||7===t||8===t||10===t||12===t?31:4===t||6===t||9===t||11===t?30:e%400===0||e%4===0&&e%100!==0?29:28},get:function(t,e){"undefined"!=typeof t&&""!==t||(t="Y-m-d");var n,i=t.split(""),o=new Array(i.length),r="\\";n="undefined"==typeof e?new Date:"number"==typeof e?new Date(1e3*e):new Date(e);for(var s,a,l,h=0;h<i.length;h++)switch(i[h]){case r:o[h]=i[h+1],h++;break;case"d":var u=n.getDate();o[h]=String(u).length>1?u:"0"+u;break;case"D":o[h]=this._wDays(n.getDay()).substring(0,3);break;case"j":o[h]=n.getDate();break;case"l":o[h]=this._wDays(n.getDay());break;case"N":o[h]=n.getDay()||7;break;case"S":var c=n.getDate(),d=["st","nd","rd"],p="";c>=11&&c<=13?o[h]="th":o[h]=(p=d[String(c).substr(-1)-1])?p:"th";break;case"w":o[h]=n.getDay();break;case"z":s=Date.UTC(n.getFullYear(),0,0),a=Date.UTC(n.getFullYear(),n.getMonth(),n.getDate()),o[h]=Math.floor((a-s)/864e5);break;case"W":var f=new Date(n.getFullYear(),0,1);s=f.getDay()||7;var m=Math.floor((n-f)/864e5+1);o[h]=Math.ceil((m-(8-s))/7)+1;break;case"F":o[h]=this._months(n.getMonth());break;case"m":var _=String(n.getMonth()+1);o[h]=_.length>1?_:"0"+_;break;case"M":o[h]=this._months(n.getMonth()).substring(0,3);break;case"n":o[h]=n.getMonth()+1;break;case"t":o[h]=this._daysInMonth(n.getMonth()+1,n.getYear());break;case"L":var g=n.getFullYear();o[h]=!(g%4||!(g%100)&&g%400);break;case"o":throw'"o" not implemented!';case"Y":o[h]=n.getFullYear();break;case"y":o[h]=String(n.getFullYear()).substring(2);break;case"a":o[h]=n.getHours()<12?"am":"pm";break;case"A":o[h]=n.getHours<12?"AM":"PM";break;case"B":throw'"B" not implemented!';case"g":l=n.getHours(),o[h]=l<=12?l:l-12;break;case"G":o[h]=String(n.getHours());break;case"h":l=String(n.getHours()),l=l<=12?l:l-12,o[h]=l.length>1?l:"0"+l;break;case"H":l=String(n.getHours()),o[h]=l.length>1?l:"0"+l;break;case"i":var v=String(n.getMinutes());o[h]=v.length>1?v:"0"+v;break;case"s":var y=String(n.getSeconds());o[h]=y.length>1?y:"0"+y;break;case"u":throw'"u" not implemented!';case"e":throw'"e" not implemented!';case"I":s=new Date(n.getFullYear(),0,1),o[h]=n.getTimezoneOffset()!==s.getTimezoneOffset()?1:0;break;case"O":var b=n.getTimezoneOffset(),k=b%60;l=String((b-k)/60*-1),"-"!==l.charAt(0)&&(l="+"+l),l=3===l.length?l:l.replace(/([+\-])(\d)/,"$10$2"),o[h]=l+k+"0";break;case"P":throw'"P" not implemented!';case"T":throw'"T" not implemented!';case"Z":o[h]=60*n.getTimezoneOffset();break;case"c":throw'"c" not implemented!';case"r":var I=this._wDays(n.getDay()).substr(0,3),C=this._months(n.getMonth()).substr(0,3);o[h]=I+", "+n.getDate()+" "+C+this.get(" Y H:i:s O",n);break;case"U":o[h]=Math.floor(n.getTime()/1e3);break;default:o[h]=i[h]}return o.join("")},set:function(t,e){if("undefined"!=typeof e){"undefined"!=typeof t&&""!==t||(t="Y-m-d");for(var n,i=t.split(""),o=new Array(i.length),r="\\",s={year:void 0,month:void 0,day:void 0,dayY:void 0,dayW:void 0,week:void 0,hour:void 0,hourD:void 0,min:void 0,sec:void 0,msec:void 0,ampm:void 0,diffM:void 0,diffH:void 0,date:void 0},a=0,l=0;l<i.length;l++)switch(i[l]){case r:o[l]=i[l+1],l++;break;case"d":o[l]="(\\d{2})",s.day={original:l,match:a++};break;case"j":o[l]="(\\d{1,2})",s.day={original:l,match:a++};break;case"D":o[l]="([\\w]{3})",s.dayW={original:l,match:a++};break;case"l":o[l]="([\\w]{5,7})",s.dayW={original:l,match:a++};break;case"N":o[l]="(\\d)",s.dayW={original:l,match:a++};break;case"w":o[l]="(\\d)",s.dayW={original:l,match:a++};break;case"S":o[l]="\\w{2}";break;case"z":o[l]="(\\d{1,3})",s.dayY={original:l,match:a++};break;case"W":o[l]="(\\d{1,2})",s.week={original:l,match:a++};break;case"F":o[l]="([\\w]{4,9})",s.month={original:l,match:a++};break;case"M":o[l]="(\\w{3})",s.month={original:l,match:a++};break;case"m":o[l]="(\\d{2})",s.month={original:l,match:a++};break;case"n":o[l]="(\\d{1,2})",s.month={original:l,match:a++};break;case"t":o[l]="\\d{2}";break;case"L":o[l]="\\w{4,5}";break;case"o":throw'"o" not implemented!';case"Y":o[l]="(\\d{4})",s.year={original:l,match:a++};break;case"y":o[l]="(\\d{2})","undefined"!=typeof s.year&&"Y"===i[s.year.original]||(s.year={original:l,match:a++});break;case"a":o[l]="(am|pm)",s.ampm={original:l,match:a++};break;case"A":o[l]="(AM|PM)",s.ampm={original:l,match:a++};break;case"B":throw'"B" not implemented!';case"g":o[l]="(\\d{1,2})",s.hourD={original:l,match:a++};break;case"G":o[l]="(\\d{1,2})",s.hour={original:l,match:a++};break;case"h":o[l]="(\\d{2})",s.hourD={original:l,match:a++};break;case"H":o[l]="(\\d{2})",s.hour={original:l,match:a++};break;case"i":o[l]="(\\d{2})",s.min={original:l,match:a++};break;case"s":o[l]="(\\d{2})",s.sec={original:l,match:a++};break;case"u":throw'"u" not implemented!';case"e":throw'"e" not implemented!';case"I":o[l]="\\d";break;case"O":o[l]="([-+]\\d{4})",s.diffH={original:l,match:a++};break;case"P":throw'"P" not implemented!';case"T":throw'"T" not implemented!';case"Z":o[l]="(\\-?\\d{1,5})",s.diffM={original:l,match:a++};break;case"c":throw'"c" not implemented!';case"r":o[l]="([\\w]{3}, \\d{1,2} \\w{3} \\d{4} \\d{2}:\\d{2}:\\d{2} [+\\-]\\d{4})",s.date={original:l,match:a++};break;case"U":o[l]="(\\d{1,13})",s.date={original:l,match:a++};break;default:o[l]=i[l]}var h=new RegExp(o.join(""));try{if(n=e.match(h),!n)return}catch(t){return}var u,c,d="undefined"!=typeof s.date,p="undefined"!=typeof s.year,f="undefined"!=typeof s.dayY,m="undefined"!=typeof s.day,_="undefined"!=typeof s.month,g=_&&m,v=!_&&m,y="undefined"!=typeof s.dayW,b="undefined"!=typeof s.week,k=b&&y,I=!b&&y,C=f||g||!p&&v||k||!p&&I,w=!(p||f||m||_||y||b),E="undefined"!=typeof s.hourD&&"undefined"!=typeof s.ampm,S="undefined"!=typeof s.hour,D=E||S,x="undefined"!=typeof s.min,T="undefined"!=typeof s.sec,N="undefined"!=typeof s.msec,O=!w||D,M=O||x,A="undefined"!=typeof s.diffM,P="undefined"!=typeof s.diffH;if(d){if("U"===i[s.date.original])return new Date(1e3*+n[s.date.match+1]);var L=n[s.date.match+1].match(/\w{3}, (\d{1,2}) (\w{3}) (\d{4}) (\d{2}):(\d{2}):(\d{2}) ([+\-]\d{4})/);return u=+L[4]+ +L[7].slice(0,3),c=+L[5]+(L[7].slice(0,1)+L[7].slice(3))/100*60,new Date(L[3],this._iMonth(L[2]),L[1],u,c,L[6])}var U,F,B,R,H,j,z=new Date;if(C||w){if(C){if(p){var V=z.getFullYear()-50+"";U=n[s.year.match+1],"y"===i[s.year.original]&&(U=+V.slice(0,2)+(U>=V.slice(2)?0:1)+U)}else U=z.getFullYear();if(f)F=0,B=n[s.dayY.match+1];else if(m)F=_?this._iMonth(n[s.month.match+1]):z.getMonth(),B=n[s.day.match+1];else{F=0;var q;q=b?n[s.week.match+1]:this.get("W",z),B=7*(q-2)+(8-(new Date(U,0,1).getDay()||7))+this._iWeek(n[s.week.match+1])}if(0===F&&B>31){var W=new Date(U,F,B);F=W.getMonth(),B=W.getDate()}}else U=z.getFullYear(),F=z.getMonth(),B=z.getDate();return u=E?+n[s.hourD.match+1]+("pm"===n[s.ampm.match+1]?12:0):S?n[s.hour.match+1]:w?z.getHours():"00",c=x?n[s.min.match+1]:O?"00":z.getMinutes(),R=T?n[s.sec.match+1]:M?"00":z.getSeconds(),H=N?n[s.msec.match+1]:"000",j=P?n[s.diffH.match+1]:A?String(-1*n[s.diffM.match+1]/60*100).replace(/^(\d)/,"+$1").replace(/(^[\-+])(\d{3}$)/,"$10$2"):"+0000",new Date(U,F,B,u,c,R)}}}};return t}),Ink.createModule("Ink.Util.Dumper","1",[],function(){"use strict";var t={_tab:"",_formatParam:function(t){var e="";switch(typeof t){case"string":e="(string) "+t;break;case"number":e="(number) "+t;break;case"boolean":e="(boolean) "+t;break;case"object":e=null!==t?t.constructor===Array?"Array \n{\n"+this._outputFormat(t,0)+"\n}":"Object \n{\n"+this._outputFormat(t,0)+"\n}":"null";break;default:e=!1}return e},_getTabs:function(t){for(var e="",n=0;n<t;n++)e+=this._tab;return e},_outputFormat:function(t,e){var n="",i=!1;for(var o in t)if(null!==t[o])if("object"!=typeof t[o]||t[o].constructor!==Array&&t[o].constructor!==Object){if(t[o].constructor===Function)continue;n=n+this._tab+this._getTabs(e)+"["+o+"] => "+t[o]+"\n"}else t[o].constructor===Array?i="Array":t[o].constructor===Object&&(i="Object"),n+=this._tab+this._getTabs(e)+"["+o+"] => <b>"+i+"</b>\n",n+=this._tab+this._getTabs(e)+"{\n",n+=this._outputFormat(t[o],e+1)+this._tab+this._getTabs(e)+"}\n";else n=n+this._tab+this._getTabs(e)+"["+o+"] => null \n";return n},printDump:function(t,e){if(e&&"undefined"!=typeof e)if("string"==typeof e)document.getElementById(e).innerHTML="<pre>"+this._formatParam(t)+"</pre>";else{if("object"!=typeof e)throw"TARGET must be an element or an element ID";e.innerHTML="<pre>"+this._formatParam(t)+"</pre>"}else document.write("<pre>"+this._formatParam(t)+"</pre>")},returnDump:function(t){return this._formatParam(t)},alertDump:function(t){window.alert(this._formatParam(t).replace(/(<b>)(Array|Object)(<\/b>)/g,"$2"))},windowDump:function(t){var e="dumperwindow_"+1e4*Math.random(),n=window.open("",e,"width=400,height=300,left=50,top=50,status,menubar,scrollbars,resizable");n.document.open(),n.document.write("<pre>"+this._formatParam(t)+"</pre>"),n.document.close(),n.focus()}};return t}),Ink.createModule("Ink.Util.I18n","1",[],function(){"use strict";var t=/\{(?:(\{.*?})|(?:%s:)?(\d+)|(?:%s)?|([\w-]+))}/g,e=function(t,e){return"function"==typeof t?t.apply(this,e):"undefined"!=typeof t?t:""},n=function(t,e,i){return this instanceof n?void this.reset().lang(e).testMode(i).append(t||{},e):new n(t,e,i)};return n.prototype={reset:function(){return this._dicts=[],this._dict={},this._testMode=!1,this._lang=this._gLang,this},clone:function(){for(var t=new n,e=0,i=this._dicts.length;e<i;e++)t.append(this._dicts[e]);return t.testMode(this.testMode()),t.lang(this.lang()),t},append:function(t){return this._dicts.push(t),this._dict=Ink.extendObj(this._dict,t[this._lang]),this},lang:function(t){if(!arguments.length)return this._lang;if(t&&this._lang!==t){this._lang=t,this._dict={};for(var e=0,n=this._dicts.length;e<n;e++)this._dict=Ink.extendObj(this._dict,this._dicts[e][t]||{})}return this},testMode:function(t){return arguments.length?(void 0!==t&&(this._testMode=!!t),this):!!this._testMode},getKey:function(t){var e,i=this._gLang,o=this._lang;return t in this._dict?e=this._dict[t]:(n.langGlobal(o),e=this._gDict[t],n.langGlobal(i)),e},text:function(n){if("string"==typeof n){var i=Array.prototype.slice.call(arguments,1),o=0,r="object"==typeof i[0],s=this.getKey(n);return void 0===s&&(s=this._testMode?"["+n+"]":n),"number"==typeof s&&(s+=""),"string"==typeof s?s=s.replace(t,function(t,n,s,a){var l=n?n:s?i[s-(r?0:1)]:a&&i[0]?i[0][a]||"":i[o++ +(r?1:0)];return e(l,[o].concat(i))}):"function"==typeof s?s.apply(this,i):s instanceof Array?e(s[i[0]],i):"object"==typeof s?e(s[i[0]],i):""}},ntext:function(t,e,n){var i,o=Array.prototype.slice.apply(arguments);if(2===o.length&&"number"==typeof e){if(i=this.getKey(t),!(i instanceof Array))return"";o.splice(0,1),i=i[1===e?0:1]}else o.splice(0,2),i=1===n?t:e;return this.text.apply(this,[i].concat(o))},ordinal:function(t){if(void 0===t)return"";var n=+t.toString().slice(-1),i=this.getKey("_ordinals");if(void 0===i)return"";if("string"==typeof i)return i;var o;return"function"==typeof i&&(o=i(t,n),"string"==typeof o)?o:"exceptions"in i&&(o="function"==typeof i.exceptions?i.exceptions(t,n):t in i.exceptions?e(i.exceptions[t],[t,n]):void 0,"string"==typeof o)?o:"byLastDigit"in i&&(o="function"==typeof i.byLastDigit?i.byLastDigit(n,t):n in i.byLastDigit?e(i.byLastDigit[n],[n,t]):void 0,"string"==typeof o)?o:"default"in i&&(o=e(i.default,[t,n]),"string"==typeof o)?o:""},alias:function(){var t=Ink.bind(n.prototype.text,this);return t.ntext=Ink.bind(n.prototype.ntext,this),t.append=Ink.bind(n.prototype.append,this),t.ordinal=Ink.bind(n.prototype.ordinal,this),
t.testMode=Ink.bind(n.prototype.testMode,this),t}},n.reset=function(){n.prototype._gDicts=[],n.prototype._gDict={},n.prototype._gLang="pt_PT"},n.reset(),n.appendGlobal=function(t,e){if(e){if(!(e in t)){var i={};i[e]=t,t=i}e!==n.prototype._gLang&&n.langGlobal(e)}n.prototype._gDicts.push(t),Ink.extendObj(n.prototype._gDict,t[n.prototype._gLang])},n.langGlobal=function(t){if(!arguments.length)return n.prototype._gLang;if(t&&n.prototype._gLang!==t){n.prototype._gLang=t,n.prototype._gDict={};for(var e=0,i=n.prototype._gDicts.length;e<i;e++)Ink.extendObj(n.prototype._gDict,n.prototype._gDicts[e][t]||{})}},n}),Ink.createModule("Ink.Util.Json","1",[],function(){"use strict";function twoDigits(t){var e=""+t;return 1===e.length?"0"+e:e}var function_call=Function.prototype.call,cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,dateToISOString=Date.prototype.toISOString?Ink.bind(function_call,Date.prototype.toISOString):function(t){return t.getUTCFullYear()+"-"+twoDigits(t.getUTCMonth()+1)+"-"+twoDigits(t.getUTCDate())+"T"+twoDigits(t.getUTCHours())+":"+twoDigits(t.getUTCMinutes())+":"+twoDigits(t.getUTCSeconds())+"."+String((t.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"},InkJson={_nativeJSON:window.JSON||null,_convertToUnicode:!1,_escape:function(t){var e={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return/["\\\x00-\x1f]/.test(t)&&(t=t.replace(/([\x00-\x1f\\"])/g,function(t,n){var i=e[n];return i?i:(i=n.charCodeAt(),"\\u00"+Math.floor(i/16).toString(16)+(i%16).toString(16))})),t},_toUnicode:function(t){if(this._convertToUnicode){for(var e="",n=!1,i=!1,o=0,r=t.length;o<r;){if(n=t.charCodeAt(o),n>=32&&n<=126||8===n||9===n||10===n||12===n||13===n||32===n||34===n||47===n||58===n||92===n)i=34===n||92===n||47===n?"\\"+t.charAt(o):8===n?"\\b":9===n?"\\t":10===n?"\\n":12===n?"\\f":13===n?"\\r":t.charAt(o);else if(this._convertToUnicode){for(i=t.charCodeAt(o).toString(16)+"".toUpperCase();i.length<4;)i="0"+i;i="\\u"+i}else i=t.charAt(o);e+=i,o++}return e}return this._escape(t)},_stringifyValue:function(t){if("string"==typeof t)return'"'+this._toUnicode(t)+'"';if("number"!=typeof t||!isNaN(t)&&isFinite(t)){if("undefined"==typeof t||null===t)return"null";if("function"==typeof t.toJSON){var e=t.toJSON();return"string"==typeof e?'"'+this._escape(e)+'"':this._escape(e.toString())}if("number"==typeof t||"boolean"==typeof t)return""+t;if("function"==typeof t)return"null";if(t.constructor===Date)return'"'+this._escape(dateToISOString(t))+'"';if(t.constructor===Array){for(var n="",i=0,o=t.length;i<o;i++)i>0&&(n+=","),n+=this._stringifyValue(t[i]);return"["+n+"]"}var r="";for(var s in t)({}).hasOwnProperty.call(t,s)&&(""!==r&&(r+=","),r+='"'+this._escape(s)+'": '+this._stringifyValue(t[s]));return"{"+r+"}"}return"null"},stringify:function(t,e){return this._convertToUnicode=!!e,!this._convertToUnicode&&this._nativeJSON?this._nativeJSON.stringify(t):this._stringifyValue(t)},parse:function(text,reviver){function walk(t,e){var n,i,o=t[e];if(o&&"object"==typeof o)for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(i=walk(o,n),void 0!==i?o[n]=i:delete o[n]);return reviver.call(t,e,o)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}};return InkJson}),Ink.createModule("Ink.Util.String","1",[],function(){"use strict";var InkUtilString={_chars:["&","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",'"',"","<",">","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],_entities:["amp","agrave","aacute","acirc","atilde","auml","aring","aelig","ccedil","egrave","eacute","ecirc","euml","igrave","iacute","icirc","iuml","eth","ntilde","ograve","oacute","ocirc","otilde","ouml","oslash","ugrave","uacute","ucirc","uuml","yacute","thorn","yuml","Agrave","Aacute","Acirc","Atilde","Auml","Aring","AElig","Ccedil","Egrave","Eacute","Ecirc","Euml","Igrave","Iacute","Icirc","Iuml","ETH","Ntilde","Ograve","Oacute","Ocirc","Otilde","Ouml","Oslash","Ugrave","Uacute","Ucirc","Uuml","Yacute","THORN","euro","quot","szlig","lt","gt","cent","pound","curren","yen","brvbar","sect","uml","copy","ordf","laquo","not","shy","reg","macr","deg","plusmn","sup2","sup3","acute","micro","para","middot","cedil","sup1","ordm","raquo","frac14","frac12","frac34"],_accentedChars:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],_accentedRemovedChars:["a","a","a","a","a","a","e","e","e","e","i","i","i","i","o","o","o","o","o","u","u","u","u","c","n","A","A","A","A","A","A","E","E","E","E","I","I","I","I","O","O","O","O","O","U","U","U","U","C","N"],_htmlUnsafeChars:{"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&apos;"},ucFirst:function(t,e){var n=e?/(^|\s)(\w)(\S{2,})/:/(^|\s)(\w)(\S{2,})/g;return t?String(t).replace(n,function(t,e,n,i){return e+n.toUpperCase()+i.toLowerCase()}):t},trim:function(t){return"string"==typeof t?t.replace(/^\s+|\s+$|\n+$/g,""):t},stripTags:function(t,e){if(e&&"string"==typeof e){for(var n=InkUtilString.trim(e).split(","),i=[],o=!1,r=0;r<n.length;r++)""!==InkUtilString.trim(n[r])&&(o=InkUtilString.trim(n[r].replace(/(<|\>)/g,"").replace(/\s/,"")),i.push("(<"+o+"\\s[^>]+>|<(\\s|\\/)?(\\s|\\/)?"+o+">)"));for(var s=i.join("|"),a=new RegExp(s,"i"),l=t.match(new RegExp("<[^>]*>","g")),h=0;h<l.length;h++)l[h].match(a)||(t=t.replace(new RegExp(l[h],"gm"),""));return t}return t.replace(/<[^\>]+\>/g,"")},htmlEntitiesEncode:function(t){if(t&&t.replace)for(var e=!1,n=0;n<InkUtilString._chars.length;n++)e=new RegExp(InkUtilString._chars[n],"gm"),t=t.replace(e,"&"+InkUtilString._entities[n]+";");return t},htmlEntitiesDecode:function(t){if(t&&t.replace){for(var e=!1,n=0;n<InkUtilString._entities.length;n++)e=new RegExp("&"+InkUtilString._entities[n]+";","gm"),t=t.replace(e,InkUtilString._chars[n]);t=t.replace(/&#[^;]+;?/g,function(t){return"x"===t.charAt(2)?String.fromCharCode(parseInt(t.substring(3),16)):String.fromCharCode(parseInt(t.substring(2),10))})}return t},utf8Encode:function(t){t=t.replace(/\r\n/g,"\n");for(var e="",n=0;n<t.length;n++){var i=t.charCodeAt(n);i<128?e+=String.fromCharCode(i):i>127&&i<2048?(e+=String.fromCharCode(i>>6|192),e+=String.fromCharCode(63&i|128)):(e+=String.fromCharCode(i>>12|224),e+=String.fromCharCode(i>>6&63|128),e+=String.fromCharCode(63&i|128))}return e},shortString:function(t,e){for(var n=t.split(" "),i="",o=0;o<n.length;o++){if((i+n[o]+" ").length>=e){i+="&hellip;";break}i+=n[o]+" "}return i},truncateString:function(t,e){return t.length-1>e?t.substr(0,e-1)+"":t},utf8Decode:function(t){for(var e="",n=0,i=0,o=0,r=0;n<t.length;)i=t.charCodeAt(n),i<128?(e+=String.fromCharCode(i),n++):i>191&&i<224?(o=t.charCodeAt(n+1),e+=String.fromCharCode((31&i)<<6|63&o),n+=2):(o=t.charCodeAt(n+1),r=t.charCodeAt(n+2),e+=String.fromCharCode((15&i)<<12|(63&o)<<6|63&r),n+=3);return e},removeAccentedChars:function(t){for(var e=t,n=!1,i=0;i<InkUtilString._accentedChars.length;i++)n=new RegExp(InkUtilString._accentedChars[i],"gm"),e=e.replace(n,""+InkUtilString._accentedRemovedChars[i]);return e},substrCount:function(t,e){return t?t.split(e).length-1:0},evalJSON:function(strJSON,sanitize){if("undefined"==typeof sanitize||null===sanitize||InkUtilString.isJSON(strJSON))try{return"undefined"!=typeof JSON&&"undefined"!=typeof JSON.parse?JSON.parse(strJSON):eval("("+strJSON+")")}catch(t){throw new Error("ERROR: Bad JSON string...")}},isJSON:function(t){return t=t.replace(/\\./g,"@").replace(/"[^"\\\n\r]*"/g,""),/^[,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]*$/.test(t)},htmlEscapeUnsafe:function(t){var e=InkUtilString._htmlUnsafeChars;return null!==t?String(t).replace(/[<>&'"]/g,function(t){return e[t]}):t},normalizeWhitespace:function(t){return null!==t?InkUtilString.trim(String(t).replace(/\s+/g," ")):t},toUnicode:function(t){if("string"==typeof t){for(var e="",n=!1,i=!1,o=t.length,r=0;r<o;){if(n=t.charCodeAt(r),n>=32&&n<=126||8===n||9===n||10===n||12===n||13===n||32===n||34===n||47===n||58===n||92===n)i=8===n?"\\b":9===n?"\\t":10===n?"\\n":12===n?"\\f":13===n?"\\r":t.charAt(r);else{for(i=t.charCodeAt(r).toString(16)+"".toUpperCase();i.length<4;)i="0"+i;i="\\u"+i}e+=i,r++}return e}},escape:function(t){var e=t.charCodeAt(0).toString(16).split("");if(e.length<3){for(;e.length<2;)e.unshift("0");e.unshift("x")}else{for(;e.length<4;)e.unshift("0");e.unshift("u")}return e.unshift("\\"),e.join("")},unescape:function(t){var e=t.lastIndexOf("0");e=e===-1?2:Math.min(e,2);var n=t.substring(e),i=parseInt(n,16);return String.fromCharCode(i)},escapeText:function(t,e){void 0===e&&(e=["[","]","'",","]);for(var n,i,o=[],r=0,s=t.length;r<s;++r)n=t[r],i=n.charCodeAt(0),(i<32||i>126&&e.indexOf(n)===-1)&&(n=InkUtilString.escape(n)),o.push(n);return o.join("")},escapedCharRegex:/(\\x[0-9a-fA-F]{2})|(\\u[0-9a-fA-F]{4})/g,unescapeText:function(t){for(var e;e=InkUtilString.escapedCharRegex.exec(t);)e=e[0],t=t.replace(e,InkUtilString.unescape(e)),InkUtilString.escapedCharRegex.lastIndex=0;return t},strcmp:function(t,e){return t===e?0:t>e?1:-1},packetize:function(t,e){for(var n,i=t.length,o=new Array(Math.ceil(i/e)),r=t.split(""),s=0;i;)n=Math.min(e,i),o[s++]=r.splice(0,n).join(""),i-=n;return o}};return InkUtilString}),Ink.createModule("Ink.Util.Url","1",[],function(){"use strict";var t={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",getUrl:function(){return window.location.href},genQueryString:function(t,e){var n,i,o,r=t.indexOf("?")!==-1,s=[t];for(i in e)e.hasOwnProperty(i)&&(r?n="&":(n="?",r=!0),o=e[i],"number"==typeof o||o||(o=""),s=s.concat([n,encodeURIComponent(i),"=",encodeURIComponent(o)]));return s.join("")},getQueryString:function(t){var e;e=t&&"undefined"!=typeof t?t:this.getUrl();var n={};if(e.match(/\?(.+)/i)){var i=e.replace(/^(.*)\?([^\#]+)(\#(.*))?/g,"$2");if(i.length>0)for(var o=i.split(/[;&]/),r=0;r<o.length;r++){var s=o[r].split("=");n[decodeURIComponent(s[0])]=!("undefined"==typeof s[1]||!s[1])&&decodeURIComponent(s[1])}}return n},getAnchor:function(t){var e;e=t&&"undefined"!=typeof t?t:this.getUrl();var n=!1;return e.match(/#(.+)/)&&(n=e.replace(/([^#]+)#(.*)/,"$2")),n},getAnchorString:function(t){var e;e=t&&"undefined"!=typeof t?t:this.getUrl();var n={};if(e.match(/#(.+)/i)){var i=e.replace(/^([^#]+)#(.*)?/g,"$2");if(i.length>0)for(var o=i.split(/[;&]/),r=0;r<o.length;r++){var s=o[r].split("=");n[decodeURIComponent(s[0])]=!("undefined"==typeof s[1]||!s[1])&&decodeURIComponent(s[1])}}return n},parseUrl:function(t){var e={};if(t&&"string"==typeof t){if(t.match(/^([^:]+):\/\//i)){var n=/^([^:]+):\/\/([^\/]*)\/?([^\?#]*)\??([^#]*)#?(.*)/i;t.match(n)&&(e.scheme=t.replace(n,"$1"),e.host=t.replace(n,"$2"),e.path="/"+t.replace(n,"$3"),e.query=t.replace(n,"$4")||!1,e.fragment=t.replace(n,"$5")||!1)}else{var i=new RegExp("^([^\\?]+)\\?([^#]+)#(.*)","i"),o=new RegExp("^([^\\?]+)\\?([^#]+)#?","i"),r=new RegExp("^([^\\?]+)\\??","i");t.match(i)?(e.scheme=!1,e.host=!1,e.path=t.replace(i,"$1"),e.query=t.replace(i,"$2"),e.fragment=t.replace(i,"$3")):t.match(o)?(e.scheme=!1,e.host=!1,e.path=t.replace(o,"$1"),e.query=t.replace(o,"$2"),e.fragment=!1):t.match(r)&&(e.scheme=!1,e.host=!1,e.path=t.replace(r,"$1"),e.query=!1,e.fragment=!1)}if(e.host){var s=/^(.*?)\\:(\\d+)$/i;if(e.host.match(s)){var a=e.host;e.host=a.replace(s,"$1"),e.port=a.replace(s,"$2")}else e.port=!1;if(e.host.match(/@/i)){var l=e.host;e.host=l.split("@")[1];var h=l.split("@")[0];h.match(/\:/)?(e.user=h.split(":")[0],e.pass=h.split(":")[1]):(e.user=h,e.pass=!1)}}}return e},format:function(t){var e="",n="",i="",o="",r="";return"string"==typeof t.protocol?e=t.protocol+"//":"string"==typeof t.scheme&&(e=t.scheme+"://"),n=t.host||t.hostname||"",i=t.path||"","string"==typeof t.query?r=t.query:"string"==typeof t.search&&(r=t.search.replace(/^\?/,"")),"string"==typeof t.fragment?o=t.fragment:"string"==typeof t.hash&&(o=t.hash.replace(/#$/,"")),[e,n,i,r&&"?"+r,o&&"#"+o].join("")},currentScriptElement:function(t){var e=document.getElementsByTagName("script");if("undefined"==typeof t)return e.length>0&&e[e.length-1];for(var n=!1,i=new RegExp(""+t,"i"),o=0,r=e.length;o<r;o++)if(n=e[o],i.test(n.src))return n;return!1}};return t}),Ink.createModule("Ink.Util.Validator","1",[],function(){"use strict";var t={_countryCodes:["AO","CV","MZ","TL","PT"],_internacionalPT:351,_indicativosPT:{21:"lisboa",22:"porto",231:"mealhada",232:"viseu",233:"figueira da foz",234:"aveiro",235:"arganil",236:"pombal",238:"seia",239:"coimbra",241:"abrantes",242:"ponte de sr",243:"santarm",244:"leiria",245:"portalegre",249:"torres novas",251:"valena",252:"vila nova de famalico",253:"braga",254:"peso da rgua",255:"penafiel",256:"so joo da madeira",258:"viana do castelo",259:"vila real",261:"torres vedras",262:"caldas da ranha",263:"vila franca de xira",265:"setbal",266:"vora",268:"estremoz",269:"santiago do cacm",271:"guarda",272:"castelo branco",273:"bragana",274:"proena-a-nova",275:"covilh",276:"chaves",277:"idanha-a-nova",278:"mirandela",279:"moncorvo",281:"tavira",282:"portimo",283:"odemira",284:"beja",285:"moura",286:"castro verde",289:"faro",291:"funchal, porto santo",292:"corvo, faial, flores, horta, pico",295:"angra do herosmo, graciosa, so jorge, terceira",296:"ponta delgada, so miguel, santa maria",91:"rede mvel 91 (Vodafone / Yorn)",93:"rede mvel 93 (Optimus)",96:"rede mvel 96 (TMN)",92:"rede mvel 92 (TODOS)",707:"nmero nico",760:"nmero nico",800:"nmero grtis",808:"chamada local",30:"voip"},_internacionalCV:238,_indicativosCV:{2:"fixo",91:"mvel 91",95:"mvel 95",97:"mvel 97",98:"mvel 98",99:"mvel 99"},_internacionalAO:244,_indicativosAO:{2:"fixo",91:"mvel 91",92:"mvel 92"},_internacionalMZ:258,_indicativosMZ:{2:"fixo",82:"mvel 82",84:"mvel 84"},_internacionalTL:670,_indicativosTL:{3:"fixo",7:"mvel 7"},_characterGroups:{numbers:["0-9"],asciiAlpha:["a-zA-Z"],latin1Alpha:["a-zA-Z","-"],unicodeAlpha:["a-zA-Z","-","-","-"],space:[" "],dash:["-"],underscore:["_"],nicknamePunctuation:["_.-"],singleLineWhitespace:["\t "],newline:["\n"],whitespace:["\t\n\v\f\r "],asciiPunctuation:["!-/",":-@","[-`","{-~"],latin1Punctuation:["!-/",":-@","[-`","{-~","-","",""],unicodePunctuation:["!-/",":-@","[-`","{-~","-","","","-","-","-"]},createRegExp:function(e){var n="^[";for(var i in e)if(e.hasOwnProperty(i)){if(!(i in t._characterGroups))throw new Error("group "+i+" is not a valid character group");e[i]&&(n+=t._characterGroups[i].join(""))}return"^["===n?new RegExp("$^"):new RegExp(n+"]*?$")},checkCharacterGroups:function(e,n){return t.createRegExp(n).test(e)},unicode:function(e,n){return t.checkCharacterGroups(e,Ink.extendObj({unicodeAlpha:!0},n))},latin1:function(e,n){return t.checkCharacterGroups(e,Ink.extendObj({latin1Alpha:!0},n))},ascii:function(e,n){return t.checkCharacterGroups(e,Ink.extendObj({asciiAlpha:!0},n))},number:function(e,n){if(e+="",n=Ink.extendObj({decimalSep:".",thousandSep:"",negative:!0,decimalPlaces:null,maxDigits:null,max:null,min:null,returnNumber:!1},n||{}),n.thousandSep)return e=e.replace(new RegExp("\\"+n.thousandSep,"g"),""),n.thousandSep="",t.number(e,n);if(n.negative===!1)return n.min=0,n.negative=!0,t.number(e,n);if("."!==n.decimalSep&&(e=e.replace(new RegExp("\\"+n.decimalSep,"g"),".")),!/^(-)?(\d+)?(\.\d+)?$/.test(e)||""===e)return!1;var i;if(n.decimalSep&&e.indexOf(n.decimalSep)!==-1){if(i=e.split(n.decimalSep),null!==n.decimalPlaces&&i[1].length>n.decimalPlaces)return!1}else i=[""+e,""];if(null!==n.maxDigits&&i[0].replace(/-/g,"").length>n.maxDigits)return i;var o=parseFloat(e);return!(null!==n.maxExcl&&o>=n.maxExcl||null!==n.minExcl&&o<=n.minExcl)&&!(null!==n.max&&o>n.max||null!==n.min&&o<n.min)&&(!n.returnNumber||o)},_isLeapYear:function(t){var e=/^\d{4}$/;return!(!e.test(t)||t%4||!(t%100)&&t%400)},_dateParsers:{"yyyy-mm-dd":{day:5,month:3,year:1,sep:"-",parser:/^(\d{4})(\-)(\d{1,2})(\-)(\d{1,2})$/},"yyyy/mm/dd":{day:5,month:3,year:1,sep:"/",parser:/^(\d{4})(\/)(\d{1,2})(\/)(\d{1,2})$/},"yy-mm-dd":{day:5,month:3,year:1,sep:"-",parser:/^(\d{2})(\-)(\d{1,2})(\-)(\d{1,2})$/},"yy/mm/dd":{day:5,month:3,year:1,sep:"/",parser:/^(\d{2})(\/)(\d{1,2})(\/)(\d{1,2})$/},"dd-mm-yyyy":{day:1,month:3,year:5,sep:"-",parser:/^(\d{1,2})(\-)(\d{1,2})(\-)(\d{4})$/},"dd/mm/yyyy":{day:1,month:3,year:5,sep:"/",parser:/^(\d{1,2})(\/)(\d{1,2})(\/)(\d{4})$/},"dd-mm-yy":{day:1,month:3,year:5,sep:"-",parser:/^(\d{1,2})(\-)(\d{1,2})(\-)(\d{2})$/},"dd/mm/yy":{day:1,month:3,year:5,sep:"/",parser:/^(\d{1,2})(\/)(\d{1,2})(\/)(\d{2})$/}},_daysInMonth:function(t,e){var n=0;return t=parseInt(t,10),e=parseInt(e,10),1===t||3===t||5===t||7===t||8===t||10===t||12===t?n=31:4===t||6===t||9===t||11===t?n=30:2===t&&(n=e%400===0||e%4===0&&e%100!==0?29:28),n},_isValidDate:function(t,e,n){var i=/^\d{4}$/,o=/^\d{1,2}$/;return!!(i.test(t)&&o.test(e)&&o.test(n)&&e>=1&&e<=12&&n>=1&&this._daysInMonth(e,t)>=n)},email:function(t){var e=new RegExp("^[_a-z0-9-]+((\\.|\\+)[_a-z0-9-]+)*@([\\w]*-?[\\w]*\\.)+[a-z]{2,4}$","i");return!!e.test(t)},mail:function(e){return t.email(e)},url:function(t,e){if("undefined"==typeof e||e===!1){var n=new RegExp("(^(http\\:\\/\\/|https\\:\\/\\/)(.+))","i");n.test(t)===!1&&(t="http://"+t)}var i=new RegExp("^(http:\\/\\/|https:\\/\\/)([\\w]*(-?[\\w]*)*\\.)+[a-z]{2,4}","i");return i.test(t)!==!1},isPTPhone:function(t){t=t.toString();var e=[];for(var n in this._indicativosPT)"string"==typeof this._indicativosPT[n]&&e.push(n);var i=e.join("|"),o=/^(00351|\+351)/;o.test(t)&&(t=t.replace(o,""));var r=/(\s|\-|\.)+/g;t=t.replace(r,"");var s=/[\d]{9}/i;if(9===t.length&&s.test(t)){var a=new RegExp("^("+i+")");if(a.test(t))return!0}return!1},isPortuguesePhone:function(t){return this.isPTPhone(t)},isCVPhone:function(t){t=t.toString();var e=[];for(var n in this._indicativosCV)"string"==typeof this._indicativosCV[n]&&e.push(n);var i=e.join("|"),o=/^(00238|\+238)/;o.test(t)&&(t=t.replace(o,""));var r=/(\s|\-|\.)+/g;t=t.replace(r,"");var s=/[\d]{7}/i;if(7===t.length&&s.test(t)){var a=new RegExp("^("+i+")");if(a.test(t))return!0}return!1},isAOPhone:function(t){t=t.toString();var e=[];for(var n in this._indicativosAO)"string"==typeof this._indicativosAO[n]&&e.push(n);var i=e.join("|"),o=/^(00244|\+244)/;o.test(t)&&(t=t.replace(o,""));var r=/(\s|\-|\.)+/g;t=t.replace(r,"");var s=/[\d]{9}/i;if(9===t.length&&s.test(t)){var a=new RegExp("^("+i+")");if(a.test(t))return!0}return!1},isMZPhone:function(t){t=t.toString();var e=[];for(var n in this._indicativosMZ)"string"==typeof this._indicativosMZ[n]&&e.push(n);var i=e.join("|"),o=/^(00258|\+258)/;o.test(t)&&(t=t.replace(o,""));var r=/(\s|\-|\.)+/g;t=t.replace(r,"");var s=/[\d]{8,9}/i;if((9===t.length||8===t.length)&&s.test(t)){var a=new RegExp("^("+i+")");if(a.test(t)){if(0===t.indexOf("2")&&8===t.length)return!0;if(0===t.indexOf("8")&&9===t.length)return!0}}return!1},isTLPhone:function(t){t=t.toString();var e=[];for(var n in this._indicativosTL)"string"==typeof this._indicativosTL[n]&&e.push(n);var i=e.join("|"),o=/^(00670|\+670)/;o.test(t)&&(t=t.replace(o,""));var r=/(\s|\-|\.)+/g;t=t.replace(r,"");var s=/[\d]{7}/i;if(7===t.length&&s.test(t)){var a=new RegExp("^("+i+")");if(a.test(t))return!0}return!1},isPhone:function(){var t;if(0===arguments.length)return!1;var e=arguments[0];if(arguments.length>1){if(arguments[1].constructor!==Array){if("function"==typeof this["is"+arguments[1].toUpperCase()+"Phone"])return this["is"+arguments[1].toUpperCase()+"Phone"](e);throw"Invalid Country Code!"}var n;for(t=0;t<arguments[1].length;t++){if("function"!=typeof(n=this["is"+arguments[1][t].toUpperCase()+"Phone"]))throw"Invalid Country Code!";if(n(e))return!0}}else for(t=0;t<this._countryCodes.length;t++)if(this["is"+this._countryCodes[t]+"Phone"](e))return!0;return!1},codPostal:function(t,e,n){var i=/^(\s*\-\s*|\s+)$/,o=/^\s+|\s+$/g,r=/^[1-9]\d{3}$/,s=/^\d{3}$/,a=/^(.{4})(.*)(.{3})$/;if(t=t.replace(o,""),"undefined"!=typeof e){if(e=e.replace(o,""),r.test(t)&&s.test(e))return!n||[!0,!0]}else{if(r.test(t))return!n||[!0,!1];var l=t.match(a);if(null!==l&&r.test(l[1])&&i.test(l[2])&&s.test(l[3]))return!n||[!0,!1]}return!!n&&[!1,!1]},isDate:function(t,e){if("undefined"==typeof this._dateParsers[t])return!1;var n=this._dateParsers[t].year,i=this._dateParsers[t].month,o=this._dateParsers[t].day,r=this._dateParsers[t].parser,s=this._dateParsers[t].sep,a=e.match(r);if(null!==a&&a[2]===a[4]&&a[2]===s){var l=2===a[n].length?"20"+a[n].toString():a[n];if(this._isValidDate(l,a[i].toString(),a[o].toString()))return!0}return!1},isColor:function(t){var e,n=!1,i=/^[a-zA-Z]+$/,o=/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/,r=/^rgb\(\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*\)$/,s=/^rgba\(\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*,\s*(1(\.0)?|0(\.[0-9])?)\s*\)$/,a=/^hsl\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*\)$/,l=/^hsla\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*,\s*(1(\.0)?|0(\.[0-9])?)\s*\)$/;if(i.test(t)||o.test(t))return!0;var h;if(null!==(e=r.exec(t))||null!==(e=s.exec(t)))for(h=e.length;h--;){if((2===h||4===h||6===h)&&"undefined"!=typeof e[h]&&""!==e[h]){if(!("undefined"!=typeof e[h-1]&&e[h-1]>=0&&e[h-1]<=100))return!1;n=!0}if(1===h||3===h||5===h&&("undefined"==typeof e[h+1]||""===e[h+1])){if(!("undefined"!=typeof e[h]&&e[h]>=0&&e[h]<=255))return!1;n=!0}}if(null!==(e=a.exec(t))||null!==(e=l.exec(t)))for(h=e.length;h--;){if(3===h||5===h){if(!("undefined"!=typeof e[h-1]&&"undefined"!=typeof e[h]&&""!==e[h]&&e[h-1]>=0&&e[h-1]<=100))return!1;n=!0}if(1===h){if(!("undefined"!=typeof e[h]&&e[h]>=0&&e[h]<=360))return!1;n=!0}}return n},isIP:function(t,e){if("string"!=typeof t)return!1;switch(e=(e||"ipv4").toLowerCase()){case"ipv4":return/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(t);case"ipv6":return/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/.test(t);default:return!1}},_creditCardSpecs:{default:{length:"13,14,15,16,17,18,19",prefix:/^.+/,luhn:!0},"american express":{length:"15",prefix:/^3[47]/,luhn:!0},"diners club":{length:"14,16",prefix:/^36|55|30[0-5]/,luhn:!0},discover:{length:"16",prefix:/^6(?:5|011)/,luhn:!0},jcb:{length:"15,16",prefix:/^3|1800|2131/,luhn:!0},maestro:{length:"16,18",prefix:/^50(?:20|38)|6(?:304|759)/,luhn:!0},mastercard:{length:"16",prefix:/^5[1-5]/,luhn:!0},visa:{length:"13,16",prefix:/^4/,luhn:!0}},_luhn:function(t){if(t=parseInt(t,10),"number"!=typeof t&&t%1!==0)return!1;t+="";var e,n=t.length,i=0;for(e=n-1;e>=0;e-=2)i+=parseInt(t.substr(e,1),10);for(e=n-2;e>=0;e-=2){var o=parseInt(2*t.substr(e,1),10);i+=o>=10?o-9:o}return i%10===0},isCreditCard:function(t,e){if(/\d+/.test(t)===!1)return!1;if("undefined"==typeof e)e="default";else if(e instanceof Array){var n,i=e.length;for(n=0;n<i;n++)if(this.isCreditCard(t,e[n]))return!0;return!1}if(e=e.toLowerCase(),"undefined"==typeof this._creditCardSpecs[e])return!1;var o=t.length+"";return this._creditCardSpecs[e].length.split(",").indexOf(o)!==-1&&!!this._creditCardSpecs[e].prefix.test(t)&&(this._creditCardSpecs[e].luhn===!1||this._luhn(t))},getEANCheckDigit:function(t){var e,n,i=0;for(t=String(t);t.length<12;)t="00000"+t;for(e=t.length,n=e-1;n>=0;n--)i+=(n%2*2+1)*Number(t.charAt(n));return 10-i%10},isEAN:function(e,n){switch(void 0===n&&(n="ean-13"),n){case"ean-13":if(13!==e.length)return!1;break;case"ean-8":if(8!==e.length)return!1;break;default:return!1}var i=e.substr(0,e.length-1),o=e.charAt(e.length-1),r=t.getEANCheckDigit(i);return String(r)===o}};return t}),Ink.createModule("Ink.UI.Animate",1,["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1"],function(t,e,n){"use strict";function i(){t.BaseUIComponent.apply(this,arguments)}var o=function(t){return"animationName"in t.style?"animation":"webkitAnimationName"in t.style?"webkitAnimation":null}(document.createElement("div")),r={animation:"animationend",webkitAnimation:"webkitAnimationEnd"}[o];return i._name="Animate_1",i._optionDefinition={trigger:["Element",null],duration:["String","slow"],animation:["String"],removeClass:["Boolean",!0],onEnd:["Function",function(){}]},i.prototype._init=function(){isNaN(parseInt(this._options.duration,10))||(this._options.duration=parseInt(this._options.duration,10)),this._options.trigger?e.observe(this._options.trigger,"click",Ink.bind(function(){this.animate()},this)):this.animate()},i.prototype.animate=function(){i.animate(this._element,this._options.animation,this._options)},Ink.extendObj(i,{_animationPrefix:o,animationSupported:!!o,animationEndEventName:r,animate:function(e,s,a){function l(t){t.target===e&&t.animationName===s&&(a.onEnd&&a.onEnd(t),a.removeClass&&n.removeClassName(e,s),"string"==typeof a.duration&&n.removeClassName(e,a.duration),e.removeEventListener(r,l,!1))}return e=t.elOrSelector(e),"number"==typeof a||"string"==typeof a?a={duration:a}:a||(a={}),"function"==typeof arguments[3]&&(a.onEnd=arguments[3]),"number"!=typeof a.duration&&"string"!=typeof a.duration&&(a.duration=400),i.animationSupported?("number"==typeof a.duration?e.style[o+"Duration"]=a.duration+"ms":"string"==typeof a.duration&&n.addClassName(e,a.duration),n.addClassName(e,["animated",s]),void e.addEventListener(r,l,!1)):void(a.onEnd&&setTimeout(function(){a.onEnd(null)},0))}}),t.createUIComponent(i),i}),Ink.createModule("Ink.UI.Carousel","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.UI.Pagination_1","Ink.Dom.Browser_1","Ink.Dom.Selector_1"],function(t,e,n,i,o,r){"use strict";function s(t,e,n){return Math.min(n,Math.max(e,t))}function a(){t.BaseUIComponent.apply(this,arguments)}function l(t,e){t.style.transitionProperty=t.style.oTransitionProperty=t.style.msTransitionProperty=t.style.mozTransitionProperty=t.style.webkitTransitionProperty=e}var h=window.requestAnimationFrame||function(t){return setTimeout(t,1e3/30)};return a._name="Carousel_1",a._optionDefinition={autoAdvance:["Integer",0],axis:["String","x"],initialPage:["Integer",0],spaceAfterLastSlide:["Boolean",!0],keyboardSupport:["Boolean",!1],pagination:["String",null],onChange:["Function",null],onInit:["Function",function(){}],swipe:["Boolean",!0]},a.prototype={_validate:function(){var t=Ink.s("ul.stage",this._element);if(!t)return new Error("Carousel must contain a ul.stage element!")},_init:function(){this._handlers={paginationChange:Ink.bindMethod(this,"_onPaginationChange"),windowResize:e.throttle(Ink.bindMethod(this,"refit"),200)},e.observe(window,"resize",this._handlers.windowResize),this._isY="y"===this._options.axis;var t=Ink.s("ul.stage",this._element);t.style.width="100%",this._ulEl=t,i.removeTextNodeChildren(t),null==this._options.pagination&&(this._currentPage=this._options.initialPage),this.refit(),this._isY&&(this._ulEl.style.whiteSpace="normal"),this._options.swipe&&(e.observe(this._element,"touchstart",Ink.bindMethod(this,"_onTouchStart")),e.observe(this._element,"touchmove",Ink.bindMethod(this,"_onTouchMove")),e.observe(this._element,"touchend",Ink.bindMethod(this,"_onTouchEnd"))),this._setUpPagination(),this._setUpAutoAdvance(),this._options.onInit.call(this,this)},refit:function(){var t=this._isY,e=function(e,n){return e?n?i.outerDimensions(e)[t?0:1]:i.outerDimensions(e)[t?1:0]:0};this._liEls=Ink.ss("li.slide",this._ulEl);var n=this._liEls.length,o=this._ulEl.getBoundingClientRect();this._ctnLength=t?o.bottom-o.top:o.right-o.left,this._elLength=e(this._liEls[0]),this._slidesPerPage=Math.floor(this._ctnLength/this._elLength)||1,isFinite(this._slidesPerPage)||(this._slidesPerPage=1);var r=Math.ceil(n/this._slidesPerPage),a=this._numPages!==r;this._numPages=r,this._deltaLength=this._slidesPerPage*this._elLength,this._IE7(),this._pagination&&a&&this._pagination.setSize(this._numPages),this.setPage(s(this.getPage(),0,this._numPages-1))},_setUpPagination:function(){this._options.pagination?(t.isDOMElement(this._options.pagination)||"string"==typeof this._options.pagination?this._pagination=new o(this._options.pagination,{size:this._numPages,onChange:this._handlers.paginationChange}):(this._pagination=this._options.pagination,this._pagination.setOnChange(this._handlers.paginationChange),this._pagination.setSize(this._numPages)),this._pagination.setCurrent(this._options.initialPage||0)):this._currentPage=this._options.initialPage||0},_setUpAutoAdvance:function(){this._options.autoAdvance&&this.autoAdvance(this._options.autoAdvance)},autoAdvance:function(t){function e(){n.nextPage(!0),n._autoAdvanceSto=setTimeout(e,t)}if(!this._autoAdvanceSto){var n=this;this._autoAdvanceSto=setTimeout(e,t)}},stopAutoAdvance:function(){this._autoAdvanceSto&&(clearTimeout(this._autoAdvanceSto),this._autoAdvanceSto=null)},_IE7:function(){if(r.IE&&""+r.version.split(".")[0]=="7")for(var t=Ink.ss("li.slide",this._ulEl),e=function(e,i){t[n].style[e]=i},n=0,i=t.length;n<i;n++)e("position","absolute"),e(this._isY?"top":"left",n*this._elLength+"px")},_onTouchStart:function(t){if(!(t.touches.length>1)){this._swipeData={x:e.pointerX(t),y:e.pointerY(t)};var n=this._ulEl.getBoundingClientRect();this._swipeData.firstUlPos=n[this._isY?"top":"left"],this._swipeData.inUlX=this._swipeData.x-n.left,this._swipeData.inUlY=this._swipeData.y-n.top,l(this._ulEl,"none"),this._touchMoveIsFirstTouchMove=!0}},_onTouchMove:function(t){if(!(t.touches.length>1)){var n=e.pointerX(t),i=e.pointerY(t),o=this._swipeData.y-i,r=this._swipeData.x-n;if(this._touchMoveIsFirstTouchMove){var s=Math.abs(o),a=Math.abs(r);this._touchMoveIsFirstTouchMove=void 0,this._scrolling=this._isY?a>s:s>a,this._scrolling||this._onAnimationFrame()}!this._scrolling&&this._swipeData&&(e.stopDefault(t),this._swipeData.pointerDelta=this._isY?o:r,this._swipeData.pointerPos=this._isY?i:n)}},_onAnimationFrame:function(){var t=this._swipeData;if(t&&!this._scrolling&&!this._touchMoveIsFirstTouchMove){var e,n=this._element.getBoundingClientRect();e=this._isY?t.pointerPos-t.inUlY-n.top:t.pointerPos-t.inUlX-n.left,this._ulEl.style[this._isY?"top":"left"]=e+"px",h(Ink.bindMethod(this,"_onAnimationFrame"))}},_onTouchEnd:function(t){if(this._swipeData&&this._swipeData.pointerPos&&!this._scrolling&&!this._touchMoveIsFirstTouchMove){var n=.1,i=this._swipeData.pointerDelta,o=this.getPage(),r=i/this._elLength/this._slidesPerPage;Math.abs(r)>n&&(o+=Math[i<0?"floor":"ceil"](r)),o=s(o,0,this._numPages-1),isNaN(o)||this.setPage(o),e.stopDefault(t);
}l(this._ulEl,null),this._swipeData=null,this._touchMoveIsFirstTouchMove=void 0,this._scrolling=void 0},_onPaginationChange:function(t){this._setPage(t.getCurrent())},getPage:function(){return this._pagination?this._pagination.getCurrent():this._currentPage||0},getPagination:function(){return this._pagination||null},setPage:function(t,e){return e&&(t%=this._numPages,t<0&&(t=this._numPages-t)),t=s(t,0,this._numPages-1),t===this._currentPage?void(this._swipeData&&this._setPage(t)):void(this._pagination?this._pagination.setCurrent(t):this._setPage(t))},_setPage:function(t){var e=t*this._deltaLength,n=t===this._numPages-1;if(!this._options.spaceAfterLastSlide&&n&&t>0){var i=this._liEls.length-t*this._slidesPerPage;i<this._slidesPerPage&&(e=(t-1)*this._deltaLength+i*this._elLength)}this._ulEl.style[this._isY?"top":"left"]=["-",e/this._ctnLength*100,"%"].join(""),this._options.onChange&&this._options.onChange.call(this,t),this._currentPage=t},nextPage:function(t){this.setPage(this.getPage()+1,t)},previousPage:function(t){this.setPage(this.getPage()-1,t)},getSlidesPerPage:function(){return this._slidesPerPage},getTotalPages:function(){return this._numPages},getStageElm:function(){return this._ulEl},getSlidesList:function(){return this._liEls},getTotalSlides:function(){return this.getSlidesList().length}},t.createUIComponent(a),a}),Ink.createModule("Ink.UI.Close","1",["Ink.Dom.Event_1","Ink.Dom.Element_1"],function(t,e){"use strict";function n(){t.observe(document.body,"click",function(n){var i=t.element(n);if(i=e.findUpwardsByClass(i,"ink-close")||e.findUpwardsByClass(i,"ink-dismiss")){var o=e.findUpwardsByClass(i,"ink-alert")||e.findUpwardsByClass(i,"ink-alert-block")||i;o&&(t.stopDefault(n),e.remove(o))}})}return n._name="Close_1",n}),Ink.createModule("Ink.UI.Common","1",["Ink.Dom.Element_1","Ink.Net.Ajax_1","Ink.Dom.Css_1","Ink.Dom.Selector_1","Ink.Util.Url_1"],function(t,e,n,i,o){"use strict";function r(){this&&this!==window&&"function"==typeof this.constructor&&Ink.warn("You called a method on an incorrectly instantiated "+this.constructor._name+" component. Check the warnings above to see what went wrong.")}function s(t,e){for(var n in t)if(t.hasOwnProperty(n)){if("constructor"===n)continue;"function"==typeof e[n]&&(e[n]=r)}}function a(t,e){var n=this.constructor,i=n._name;if(!this||this===window)throw new Error('Use "new InkComponent()" instead of "InkComponent()"');if(this&&!(this instanceof a))throw new Error("You forgot to call Ink.UI.Common.createUIComponent() on this module!");if(!t&&!n._componentOptions.elementIsOptional)return void Ink.error(new Error(i+': You need to pass an element or a selector as the first argument to "new '+i+'()"'));this._element=f.elsOrSelector(t,i+': An element with the selector "'+t+'" was not found!')[0],this._element||n._componentOptions.elementIsOptional||(o=!1,Ink.error(new Error(t+' does not match an element on the page. You need to pass a valid selector to "new '+i+'".'))),this._options=f.options(i,n._optionDefinition,e,this._element);var o=a._validateInstance(this)===!0;if(o&&"function"==typeof this._init)try{this._init.apply(this,arguments)}catch(t){o=!1,Ink.error(t)}o?this._element&&f.registerInstance(this):a._stubInstance(this,n,i)}var l={},h=Object.keys||function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e},u="WeakMap"in window,c=u?new WeakMap:null,d=[],p={get:function(t){return u?c.get(t):d[t.getAttribute("__InkInstance")]},set:function(t,e){u?c.set(t,e):t.setAttribute("__InkInstance",d.push(e)-1)}},f={Layouts:{TINY:"tiny",SMALL:"small",MEDIUM:"medium",LARGE:"large",XLARGE:"xlarge"},isDOMElement:t.isDOMElement,isInteger:function(t){return"number"==typeof t&&t%1===0},elOrSelector:function(t,e){if(!f.isDOMElement(t)){var n=i.select(t);return 0===n.length?(Ink.warn(e+" must either be a DOM Element or a selector expression!\nThe script element must also be after the DOM Element itself."),null):n[0]}return t},elsOrSelector:function(t,e,n){var o;if("string"==typeof t?o=i.select(t):f.isDOMElement(t)?o=[t]:t&&"object"==typeof t&&"number"==typeof t.length&&(o=t),o&&o.length)return o;if(n)throw new TypeError(e+" must either be a DOM Element, an Array of elements, or a selector expression!\nThe script element must also be after the DOM Element itself.");return[]},options:function(e,n,i,o){function r(t){return a=n[t][0],u=a.toLowerCase(),c=2===n[t].length?n[t][1]:l,a||g("Ink.UI.Common.options: Always specify a type!"),u in f._coerce_funcs||g("Ink.UI.Common.options: "+n[t][0]+" is not a valid type. Use one of "+h(f._coerce_funcs).join(", ")),(!n[t].length||n[t].length>2)&&g('the "defaults" argument must be an object mapping option names to [typestring, optional] arrays.'),s=t in p?f._coerce_from_string(u,p[t],t,e):l,s!==l?f._options_validate(s,u)?s:(v("("+t+" option) Invalid "+u+" "+_(s)),c):t in i?i[t]:c!==l?c:void g("Option "+t+" is required!")}"string"!=typeof e&&(o=i,i=n,n=e,e=""),i=i||{};var s,a,u,c,d={},p=o?t.data(o):{},m=function(t){return e&&(t=e+': "'+(""+t).replace(/"/,'\\"')+'"'),t},_=function(t){return'"'+(""+t).replace(/"/,'\\"')+'"'},g=function(t){throw new Error(m(t))},v=function(t){Ink.error(m(t)+". Ignoring option.")};for(var y in n)n.hasOwnProperty(y)&&(d[y]=r(y));return d},_coerce_from_string:function(t,e,n,i){return t in f._coerce_funcs?f._coerce_funcs[t](e,n,i):e},_options_validate:function(t,e){return e in f._options_validate_types&&f._options_validate_types[e].call(f,t)},_coerce_funcs:function(){var t={element:function(t){return f.elOrSelector(t,"")},elements:function(t){return f.elsOrSelector(t,"",!1)},object:function(t){return t},number:function(t){return parseFloat(t)},boolean:function(t){return!("false"===t||""===t||null===t)},string:function(t){return t},function:function(t,e,n){return Ink.error(n+': You cannot specify the option "'+e+"\" through data-attributes because it's a function"),l}};return t.float=t.integer=t.number,t}(),_options_validate_types:function(){var t={string:function(t){return"string"==typeof t},number:function(t){return"number"==typeof t&&!isNaN(t)&&isFinite(t)},integer:function(t){return t===Math.round(t)},element:function(t){return f.isDOMElement(t)},elements:function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&t.length},boolean:function(t){return"boolean"==typeof t},object:function(){return!0}};return t.float=t.number,t}(),clone:function(t){try{return JSON.parse(JSON.stringify(t))}catch(t){throw new Error("Given object cannot have loops!")}},childIndex:t.parentIndexOf,ajaxJSON:function(t,n,i){new e(t,{evalJS:"force",method:"POST",parameters:n,onSuccess:function(t){try{if(t=t.responseJSON,"ok"!==t.status)throw"server error: "+t.message;i(null,t)}catch(t){i(t)}},onFailure:function(){i("communication failure")}})},currentLayout:function(){var t,e,o,r,s,a=i.select("#ink-layout-detector")[0];if(!a){a=document.createElement("div"),a.id="ink-layout-detector";for(o in f.Layouts)f.Layouts.hasOwnProperty(o)&&(r=f.Layouts[o],s=document.createElement("div"),s.className="show-"+r+" hide-all",s.setAttribute("data-ink-layout",r),a.appendChild(s));document.body.appendChild(a)}for(t=0,e=a.children.length;t<e;++t)if(s=a.children[t],"block"===n.getStyle(s,"display"))return s.getAttribute("data-ink-layout");return"large"},hashSet:function(t){if("object"!=typeof t)throw new TypeError("o should be an object!");var e=o.getAnchorString();e=Ink.extendObj(e,t),window.location.hash=o.genQueryString("",e).substring(1)},cleanChildren:function(e){if(!f.isDOMElement(e))throw new Error("Please provide a valid DOMElement");t.clear(e)},storeIdAndClasses:function(t,e){if(!f.isDOMElement(t))throw"Please provide a valid Element as first parameter";var n=t.id;n&&(e._id=n);var i=t.className;i&&(e._classes=i)},restoreIdAndClasses:function(t,e){if(!f.isDOMElement(t))throw"Please provide a valid Element as first parameter";e._id&&t.id!==e._id&&(t.id=e._id),e._classes&&t.className.indexOf(e._classes)===-1&&(t.className?t.className+=" "+e._classes:t.className=e._classes),e._instanceId&&!t.getAttribute("data-instance")&&t.setAttribute("data-instance",e._instanceId)},_warnDoubleInstantiation:function(t,e){function n(t){return(t.constructor&&t.constructor._name||t._name||"").replace(/_.*?$/,"")}var i=f.getInstance(t);if(""!==n(e)&&i){var o=n(e);if(o){for(var r=0,s=i.length;r<s;r++)if(o===n(i[r]))return Ink.warn("Creating more than one "+o+" for the same element.","(Was creating a "+o+" on:",t,")."),!1;return!0}}},registerInstance:function(t,e){if(t){if(e||(e=t._element),!f.isDOMElement(e))throw new TypeError("Ink.UI.Common.registerInstance: The element passed in is not a DOM element!");if(f._warnDoubleInstantiation(e,t)===!1)return!1;var n=p.get(e);return n||(n=[],p.set(e,n)),n.push(t),!0}},unregisterInstance:function(t){if(t&&t._element)for(var e=p.get(t._element),n=0,i=e.length;n<i;n++)e[n]===t&&e.splice(n,1)},getInstance:function(t,e){var n=t;if(t=f.elOrSelector(t),!f.isDOMElement(t))return Ink.warn("Ink.UI.Common: getInstance called on non-element ("+n+")"),[];var i=p.get(t);if(i||(i=[]),"function"!=typeof e)return i;for(var o=0,r=i.length;o<r;o++)if(i[o]instanceof e)return i[o];return null},getInstanceFromSelector:function(t){return f.getInstance(t)},getInstanceIds:function(){if(d.length>0)return d;var t=[];for(var e in c)c.hasOwnProperty(e)&&t.push(e);return t},getInstances:function(){if(d.length>0)return d;var t=[];for(var e in c)c.hasOwnProperty(e)&&t.push(c[e]);return t},destroyComponent:function(){f.unregisterInstance(this),this._element.parentNode.removeChild(this._element)}};return a._validateInstance=function(t){var e;if("function"!=typeof t._validate)return!0;try{e=t._validate()}catch(t){e=t}return!(e instanceof Error&&(t._validationError=e,1))},a._stubInstance=function(t,e,n){s(e.prototype,t),s(a.prototype,t),Ink.warn(n+" was not correctly created. "+(t._validationError||""))},a.getInstance=function(t){return t=f.elOrSelector(t),f.getInstance(t,this)},Ink.extendObj(a.prototype,{getOption:function(t){return!this.constructor||t in this.constructor._optionDefinition?this._options[t]:void Ink.error('"'+t+'" is not an option for '+this.constructor._name)},setOption:function(t,e){return!this.constructor||t in this.constructor._optionDefinition?void(this._options[t]=e):void Ink.error('"'+t+" is not an option for "+this.constructor._name)},getElement:function(){return this._element}}),f.BaseUIComponent=a,f.createUIComponent=function(t,e){function n(t,e){if(!t)throw new Error("Ink.UI_1.createUIComponent: "+e)}function i(e,i,o){var r=t[e];n("undefined"!=typeof r,t+" doesn't have a \""+e+'" property. '+o),n(i&&typeof r===i,"typeof "+t+"."+e+' is not "'+i+'". '+o)}t._componentOptions=e||{},n("function"==typeof t,"constructor argument is not a function!"),i("_name","string","This property is used for error messages. Set it to the full module path and version (Ink.My.Module_1)."),i("_optionDefinition","object","This property contains the option names, types and defaults. See Ink.UI.Common.options() for reference.");var o=t.prototype;"function"==typeof Object.create?t.prototype=Object.create(a.prototype):t.prototype=function(){function t(){}return t.prototype=a.prototype,new t}(),Ink.extendObj(t.prototype,o),t.prototype.constructor=t,Ink.extendObj(t,a)},f}),Ink.createModule("Ink.UI.DatePicker","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1","Ink.Util.Date_1","Ink.Util.I18n_1"],function(t,e,n,i,o,r,s,a){"use strict";function l(t,e,n){return t>n&&(t=n),t<e&&(t=e),t}function h(t){var e=t.split("-");return c(+e[0],+e[1]-1,+e[2])}function u(t){if(Object.keys)return Object.keys(t);var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}function c(t,e,n){return{_year:t,_month:e,_day:n}}function d(t){return{_year:t.getFullYear(),_month:t.getMonth(),_day:t.getDate()}}function p(t){return 10*Math.floor(t/10)}function f(){t.BaseUIComponent.apply(this,arguments)}var m=new a({pt_PT:{"datepicker.clean":"Limpar","datepicker.close":"Fechar","datepicker.format":"dd-mm-yyyy","datepicker.of":" de ","datepicker.next_button":"","datepicker.prev_button":"","datepicker.months":{1:"Janeiro",2:"Fevereiro",3:"Maro",4:"Abril",5:"Maio",6:"Junho",7:"Julho",8:"Agosto",9:"Setembro",10:"Outubro",11:"Novembro",12:"Dezembro"},"datepicker.week_days":{0:"Domingo",1:"Segunda-feira",2:"Tera-feira",3:"Quarta-feira",4:"Quinta-feira",5:"Sexta-feira",6:"Sbado"}},en_US:{"datepicker.clean":"Clear","datepicker.close":"Close","datepicker.format":"dd-mm-yyyy","datepicker.of":" of ","datepicker.next_button":"","datepicker.prev_button":"","datepicker.months":{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"},"datepicker.week_days":{0:"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday"}}},"en_US");return f._name="DatePicker_1",f._optionDefinition={autoOpen:["Boolean",!1],pickerField:["Element",null],containerElement:["Element",null],cssClass:["String","ink-calendar bottom"],dateRange:["String",null],displayInSelect:["Boolean",!1],dayField:["Element",null],monthField:["Element",null],yearField:["Element",null],createSelectOptions:["Boolean",!1],format:["String","yyyy-mm-dd"],onFocus:["Boolean",!0],onMonthSelected:["Function",null],onSetDate:["Function",null],onYearSelected:["Function",null],position:["String","right"],showClean:["Boolean",!0],showClose:["Boolean",!0],shy:["Boolean",!0],startDate:["String",null],startWeekDay:["Number",1],validDayFn:["Function",null],validMonthFn:["Function",null],validYearFn:["Function",null],nextValidDateFn:["Function",null],prevValidDateFn:["Function",null],yearRange:["String",null],lang:["String",null],month:["Object",null],wDay:["Object",null],nextLinkText:["String",null],prevLinkText:["String",null],ofText:["String",null],cleanText:["String",null],closeText:["String",null]},f.prototype={_init:function(){this.i18n=m.clone(),this._options.lang&&this.i18n.lang(this._options.lang);var t=this._options.lang||m.lang(),e={};e[t]={},this._options.month&&(e[t]["datepicker.months"]=this._options.month),this._options.wDay&&(e[t]["datepicker.week_days"]=this._options.wDay),this._options.nextLinkText&&(e[t]["datepicker.next_button"]=this._options.nextLinkText),this._options.prevLinkText&&(e[t]["datepicker.prev_button"]=this._options.prevLinkText),this._options.ofText&&(e[t]["datepicker.of"]=this._options.ofText),this._options.cleanText&&(e[t]["datepicker.clean"]=this._options.cleanText),this._options.closeText&&(e[t]["datepicker.close"]=this._options.closeText),u(e[t]).length&&this.i18n.append(e),this._options.format=this._dateParsers[this._options.format]||this._options.format,this._hoverPicker=!1,this._picker=this._options.pickerField||null,this._setMinMax(this._options.dateRange||this._options.yearRange),this._options.startDate?this.setDate(this._options.startDate):this._element&&this._element.value?this.setDate(this._element.value):this.setDate(new Date),(this._options.startWeekDay<0||this._options.startWeekDay>6)&&(Ink.warn('Ink.UI.DatePicker_1: option "startWeekDay" must be between 0 (sunday) and 6 (saturday)'),this._options.startWeekDay=l(this._options.startWeekDay,0,6)),this._options.displayInSelect&&this._options.createSelectOptions&&this._createSelectOptions(),Ink.extendObj(this._options,this._lang||{}),this._render(),this._listenToContainerObjectEvents()},_validate:function(){if(this._options.displayInSelect&&!(this._options.dayField&&this._options.monthField&&this._options.yearField))throw new Error("Ink.UI.DatePicker: displayInSelect option enabled.Please specify dayField, monthField and yearField selectors.")},_render:function(){this._containerObject=document.createElement("div"),this._containerObject.className=this._options.cssClass+" ink-datepicker-calendar hide-all",this._renderSuperTopBar();var e=document.createElement("div");e.className="ink-calendar-top",this._monthDescContainer=document.createElement("div"),this._monthDescContainer.className="ink-calendar-month_desc",this._monthPrev=document.createElement("div"),this._monthPrev.className="ink-calendar-prev",this._monthPrev.appendChild(i.create("a",{href:"#prev",className:"change_month_prev",setHTML:this.i18n.text("datepicker.prev_button")})),this._monthNext=document.createElement("div"),this._monthNext.className="ink-calendar-next",this._monthNext.appendChild(i.create("a",{href:"#next",className:"change_month_next",setHTML:this.i18n.text("datepicker.next_button")})),e.appendChild(this._monthPrev),e.appendChild(this._monthDescContainer),e.appendChild(this._monthNext),this._monthContainer=document.createElement("div"),this._monthContainer.className="ink-calendar-month",this._containerObject.appendChild(e),this._containerObject.appendChild(this._monthContainer),this._monthSelector=this._renderMonthSelector(),this._containerObject.appendChild(this._monthSelector),this._yearSelector=document.createElement("ul"),this._yearSelector.className="ink-calendar-year-selector",this._containerObject.appendChild(this._yearSelector),this._options.onFocus&&!this._options.displayInSelect||(this._options.pickerField?this._picker=t.elOrSelector(this._options.pickerField,"pickerField"):this._picker=i.create("a",{href:"#open_cal",setHTML:"open",insertBottom:this._element.parentNode,className:"ink-datepicker-picker-field"})),this._appendDatePickerToDom(),this._renderMonth(),this._monthChanger=i.create("a",{href:"#monthchanger",className:"ink-calendar-link-month",setTextContent:this.i18n.getKey("datepicker.months")[this._month+1]}),this._ofText=i.create("span",{className:"ink-calendar-of-text",setTextContent:this.i18n.text("datepicker.of")}),this._yearChanger=i.create("a",{href:"#yearchanger",className:"ink-calendar-link-year",setTextContent:this._year}),this._monthDescContainer.appendChild(this._monthChanger),this._monthDescContainer.appendChild(this._ofText),this._monthDescContainer.appendChild(this._yearChanger),this._options.inline?this.show():this._addOpenCloseEvents(),this._addDateChangeHandlersToInputs()},_addDateChangeHandlersToInputs:function(){var t=this._element;this._options.displayInSelect&&(t=[this._options.dayField,this._options.monthField,this._options.yearField]),e.observeMulti(t,"change",Ink.bindEvent(function(){this._updateDate(),this._showDefaultView(),this.setDate(),this._options.onSetDate&&this._options.onSetDate(this,{date:this.getDate()}),this._inline||this._hoverPicker||this._hide(!0)},this))},show:function(){this._updateDate(),this._renderMonth(),n.removeClassName(this._containerObject,"hide-all")},_addOpenCloseEvents:function(){var t=this._picker||this._element;e.observe(t,"click",Ink.bindEvent(function(t){e.stopDefault(t),this.show()},this)),this._options.autoOpen&&this.show(),this._options.displayInSelect||e.observe(t,"blur",Ink.bindEvent(function(){this._hoverPicker||this._hide(!0)},this)),this._options.shy&&e.observe(document,"click",Ink.bindEvent(function(t){for(var n=e.element(t),o=[this._options.dayField,this._options.monthField,this._options.yearField,this._picker,this._containerObject,this._element],r=0,s=o.length;r<s;r++)if(o[r]&&(i.descendantOf(o[r],n)||o[r]===n))return;this._hide(!0)},this))},_renderMonthSelector:function(){var t=document.createElement("ul");t.className="ink-calendar-month-selector";for(var e=document.createElement("ul"),n=1;n<=12;n++)e.appendChild(this._renderMonthButton(n)),n%4===0&&(t.appendChild(e),e=document.createElement("ul"));return t},_renderMonthButton:function(t){var e=document.createElement("li");return e.appendChild(i.create("a",{"data-cal-month":t,setTextContent:this.i18n.getKey("datepicker.months")[t].substring(0,3)})),e},_appendDatePickerToDom:function(){if(this._options.containerElement){var e=t.elOrSelector(this._options.containerElement);e.appendChild(this._containerObject)}var n=o.matchesSelector(this._element.parentNode,".ink-form .control-group .control, .ink-form .control-group .control > *");n?(this._wrapper=this._element.parentNode,this._wrapperIsControl=!0):(this._wrapper=i.create("div",{className:"ink-datepicker-wrapper"}),i.wrap(this._element,this._wrapper)),i.insertAfter(this._containerObject,this._element)},_renderSuperTopBar:function(){this._options.showClose&&this._options.showClean&&(this._superTopBar=document.createElement("div"),this._superTopBar.className="ink-calendar-top-options",this._options.showClean&&this._superTopBar.appendChild(i.create("a",{className:"clean",setHTML:this.i18n.text("datepicker.clean")})),this._options.showClose&&this._superTopBar.appendChild(i.create("a",{className:"close",setHTML:this.i18n.text("datepicker.close")})),this._containerObject.appendChild(this._superTopBar))},_listenToContainerObjectEvents:function(){e.observe(this._containerObject,"mouseover",Ink.bindEvent(function(t){e.stopDefault(t),this._hoverPicker=!0},this)),e.observe(this._containerObject,"mouseout",Ink.bindEvent(function(t){e.stopDefault(t),this._hoverPicker=!1},this)),e.observe(this._containerObject,"click",Ink.bindEvent(this._onClick,this))},_onClick:function(t){var i=e.element(t);return n.hasClassName(i,"ink-calendar-off")?(e.stopDefault(t),null):(e.stopDefault(t),this._onRelativeChangerClick(i),this._onAbsoluteChangerClick(i),n.hasClassName(i,"ink-calendar-link-month")?this._showMonthSelector():n.hasClassName(i,"ink-calendar-link-year")?this._showYearSelector():n.hasClassName(i,"clean")?this._clean():n.hasClassName(i,"close")&&this._hide(!1),void this._updateDescription())},_onRelativeChangerClick:function(t){var e={change_year_next:1,change_year_prev:-1},n={change_month_next:1,change_month_prev:-1};t.className in n?this._updateCal(n[t.className]):t.className in e&&this._showYearSelector(e[t.className])},_onAbsoluteChangerClick:function(t){var e=i.data(t);Number(e.calDay)?(this.setDate(new Date(this._year,this._month,e.calDay),t),this._options.shy?this._hide():this._updateCal()):Number(e.calMonth)?(this._month=Number(e.calMonth)-1,this._showDefaultView(),this._updateCal()):Number(e.calYear)&&this._changeYear(Number(e.calYear))},_changeYear:function(t){t=+t,isNaN(t)||(this._year=t,"function"==typeof this._options.onYearSelected&&this._options.onYearSelected(this,{year:this._year}),this._showMonthSelector())},_clean:function(){this._options.displayInSelect?(this._options.yearField.selectedIndex=0,this._options.monthField.selectedIndex=0,this._options.dayField.selectedIndex=0):this._element.value=""},_hide:function(t){t=void 0===t||t,(t===!1||t&&this._options.shy)&&n.addClassName(this._containerObject,"hide-all")},_setMinMax:function(t){function e(){n._min=i,n._max=o}var n=this,i={_year:-Number.MAX_VALUE,_month:0,_day:1},o={_year:Number.MAX_VALUE,_month:11,_day:31};if(!t)return e();var s=t.split(":"),a=/^(\d{4})((\-)(\d{1,2})((\-)(\d{1,2}))?)?$/;r.each([{name:"_min",date:s[0],noLim:i},{name:"_max",date:s[1],noLim:o}],Ink.bind(function(t){var e=t.noLim;if("NOW"===t.date.toUpperCase()){var n=new Date;e=d(n)}else"EVER"===t.date.toUpperCase()?e=t.noLim:a.test(t.date)&&(e=h(t.date),e._month=l(e._month,0,11),e._day=l(e._day,1,this._daysInMonth(e._year,e._month+1)));this[t.name]=e},this));var u=this._dateCmp(this._max,this._min)!==-1;u||e()},_fitDateToRange:function(t){return this._isValidDate(t)||(t=d(new Date)),this._dateCmp(t,this._min)===-1?Ink.extendObj({},this._min):1===this._dateCmp(t,this._max)?Ink.extendObj({},this._max):Ink.extendObj({},t)},_dateWithinRange:function(t){return arguments.length||(t=this),!this._dateAboveMax(t)&&!this._dateBelowMin(t)},_dateAboveMax:function(t){return 1===this._dateCmp(t,this._max)},_dateBelowMin:function(t){return this._dateCmp(t,this._min)===-1},_dateCmp:function(t,e){return this._dateCmpUntil(t,e,"_day")},_dateCmpUntil:function(t,e,n){var i=["_year","_month","_day"],o=-1;do{if(o++,t[i[o]]>e[i[o]])return 1;if(t[i[o]]<e[i[o]])return-1}while(i[o]!==n&&void 0!==t[i[o+1]]&&void 0!==e[i[o+1]]);return 0},_createSelectOptions:function(){function t(){var t=new Date(+s.value,o.value-1+1,0).getDate();i.setHTML(n,""),i.fillSelect(n,r.range(1,t+1),!0)}var n=this._options.dayField,o=this._options.monthField,s=this._options.yearField;i.setHTML(o,""),i.setHTML(s,""),i.fillSelect(o,r.map(["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],function(t,e){return[e+1,t]}),!0),i.fillSelect(s,r.range(1900,2e3),!0),e.observeMulti([o,s],"change",t),t()},_showDefaultView:function(){this._yearSelector.style.display="none",this._monthSelector.style.display="none",this._monthPrev.childNodes[0].className="change_month_prev",this._monthNext.childNodes[0].className="change_month_next",this._getPrevMonth()||(this._monthPrev.childNodes[0].className="action_inactive"),this._getNextMonth()||(this._monthNext.childNodes[0].className="action_inactive"),this._monthContainer.style.display="block"},_updateDate:function(){var t;!this._options.displayInSelect&&this._element.value?t=this._parseDate(this._element.value):this._options.displayInSelect&&(t={_year:this._options.yearField[this._options.yearField.selectedIndex].value,_month:this._options.monthField[this._options.monthField.selectedIndex].value-1,_day:this._options.dayField[this._options.dayField.selectedIndex].value}),t&&(t=this._fitDateToRange(t),this._year=t._year,this._month=t._month,this._day=t._day),this._setDate(),this._updateDescription(),this._renderMonth()},_updateDescription:function(){i.setTextContent(this._monthChanger,this.i18n.getKey("datepicker.months")[this._month+1]),i.setTextContent(this._ofText,this.i18n.text("datepicker.of")),i.setTextContent(this._yearChanger,this._year)},_showYearSelector:function(t){this._incrementViewingYear(t);var e=this._year-this._year%10,n=e-1;i.setHTML(this._yearSelector,"");var o=i.create("ul");if(this._yearSelector.appendChild(o),n>this._min._year){var r=i.create("li");r.appendChild(i.create("a",{href:"#year_prev",className:"change_year_prev",setHTML:this.i18n.text("datepicker.prev_button")})),o.appendChild(r)}else o.appendChild(i.create("li",{setHTML:"&nbsp;"}));for(var s=1;s<11;s++)s%4===0&&(o=i.create("ul"),this._yearSelector.appendChild(o)),n=e+s-1,o.appendChild(this._getYearButton(n));if(n<this._max._year){var a=i.create("li");a.appendChild(i.create("a",{href:"#year_next",className:"change_year_next",setHTML:this.i18n.text("datepicker.next_button")})),o.appendChild(a)}else o.appendChild(i.create("li",{setHTML:"&nbsp;"}));this._monthPrev.childNodes[0].className="action_inactive",this._monthNext.childNodes[0].className="action_inactive",this._monthSelector.style.display="none",this._monthContainer.style.display="none",this._yearSelector.style.display="block"},_incrementViewingYear:function(t){if(t){var e=+this._year+10*t;e-=e%10,e>this._max._year||e+9<this._min._year||(this._year=+this._year+10*t)}},_getYearButton:function(t){var e="";this._acceptableYear({_year:t})?t===this._year&&(e="ink-calendar-on"):e="ink-calendar-off";var n=i.create("li");return n.appendChild(i.create("a",{href:"#","data-cal-year":t,className:e,setTextContent:t})),n},_showMonthSelector:function(){this._yearSelector.style.display="none",this._monthContainer.style.display="none",this._monthPrev.childNodes[0].className="action_inactive",this._monthNext.childNodes[0].className="action_inactive",this._addMonthClassNames(),this._monthSelector.style.display="block"},_parseDate:function(t){var e=s.set(this._options.format,t);return e?d(e):null},_isValidDate:function(t){var e=/^\d{4}$/,n=/^\d{1,2}$/;return e.test(t._year)&&n.test(t._month)&&n.test(t._day)&&+t._month+1>=1&&+t._month+1<=12&&+t._day>=1&&+t._day<=this._daysInMonth(t._year,t._month+1)},_isDate:function(t,e){try{if("undefined"==typeof t)return!1;var n=s.set(t,e);if(n&&this._isValidDate(d(n)))return!0}catch(t){}return!1},_acceptableDay:function(t){return this._acceptableDateComponent(t,"validDayFn")},_acceptableMonth:function(t){return this._acceptableDateComponent(t,"validMonthFn")},_acceptableYear:function(t){return this._acceptableDateComponent(t,"validYearFn")},_acceptableDateComponent:function(t,e){return this._options[e]?this._callUserCallbackBool(this._options[e],t):this._dateWithinRange(t)},_writeDateInFormat:function(){return s.get(this._options.format,this.getDate())},setDate:function(t,e){if(t&&"function"==typeof t.getDate&&(t=[t.getFullYear(),t.getMonth()+1,t.getDate()].join("-")),/\d{4}-\d{1,2}-\d{1,2}/.test(t)){var n=t.split("-");this._year=+n[0],this._month=+n[1]-1,this._day=+n[2]}this._setDate(e)},getDate:function(){if(!this._day)throw"Ink.UI.DatePicker: Still picking a date. Cannot getDate now!";return new Date(this._year,this._month,this._day)},_setDate:function(t){if(t){var e=i.data(t);this._day=+e.calDay||this._day,this._options.onSetDate&&this._options.onSetDate(this,{date:this.getDate()})}var n=this._fitDateToRange(this);if(this._year=n._year,this._month=n._month,this._day=n._day,this._options.displayInSelect)this._options.dayField.value=this._day,this._options.monthField.value=this._month+1,this._options.yearField.value=this._year;else{var o=this._writeDateInFormat();o!==this._element.value&&(this._element.value=o)}},_updateCal:function(t){"function"==typeof this._options.onMonthSelected&&this._options.onMonthSelected(this,{year:this._year,month:this._month}),t&&null===this._updateMonth(t)||this._renderMonth()},_daysInMonth:function(t,e){var n={2:t%400===0||t%4===0&&t%100!==0?29:28,4:30,6:30,9:30,11:30};return n[e]||31},_updateMonth:function(t){var e;return t>0?e=this._getNextMonth():t<0&&(e=this._getPrevMonth()),e?(this._year=e._year,this._month=e._month,void(this._day=e._day)):null},_getNextMonth:function(t){return this._tryLeap(t,"Month","next",function(t){return t._month+=1,t._month>11&&(t._month=0,t._year+=1),t})},_getPrevMonth:function(t){return this._tryLeap(t,"Month","prev",function(t){return t._month-=1,t._month<0&&(t._month=11,t._year-=1),t})},_getPrevYear:function(t){return this._tryLeap(t,"Year","prev",function(t){return t._year-=1,t})},_getNextYear:function(t){return this._tryLeap(t,"Year","next",function(t){return t._year+=1,t})},_tryLeap:function(t,e,n,i){t=t||{_year:this._year,_month:this._month,_day:this._day};var o="prev"===n?"_min":"_max",r=this[o];if(0===this._dateCmpUntil(t,r,e))return null;var s=this._options[n+"ValidDateFn"];if(s)return this._callUserCallbackDate(s,t);t=i(t);var a=this._daysInMonth(t._year,t._month+1);return t._day>a&&(t._day=a),t=this._fitDateToRange(t),this["_acceptable"+e](t)?t:null},_getNextDecade:function(t){t=t||{_year:this._year,_month:this._month,_day:this._day};var e=this._getCurrentDecade(t);return e+10>this._max._year?null:e+10},_getPrevDecade:function(t){t=t||{_year:this._year,_month:this._month,_day:this._day};var e=this._getCurrentDecade(t);return p(e-10)<p(this._min._year)?null:e-10},_getCurrentDecade:function(t){return t=t?t._year||t:this._year,p(this._year)},_callUserCallbackBase:function(t,e){return t.call(this,e._year,e._month+1,e._day)},_callUserCallbackBool:function(t,e){return!!this._callUserCallbackBase(t,e)},_callUserCallbackDate:function(t,e){var n=this._callUserCallbackBase(t,e);return n?d(n):null},_dateParsers:{"yyyy-mm-dd":"Y-m-d","yyyy/mm/dd":"Y/m/d","yy-mm-dd":"y-m-d","yy/mm/dd":"y/m/d","dd-mm-yyyy":"d-m-Y","dd/mm/yyyy":"d/m/Y","dd-mm-yy":"d-m-y","dd/mm/yy":"d/m/y","mm/dd/yyyy":"m/d/Y","mm-dd-yyyy":"m-d-Y"},_renderMonth:function(){var t=this._month,e=this._year;this._showDefaultView(),i.setHTML(this._monthContainer,""),this._monthContainer.appendChild(this._getMonthCalendarHeader(this._options.startWeekDay)),this._monthContainer.appendChild(this._getDayButtons(e,t))},_getFirstDayIndex:function(t,e){var n=new Date(t,e,1).getDay(),i=this._options.startWeekDay||0,o=n-i;return o%=7,o<0&&(o+=7),o},_getDayButtons:function(t,e){var n=this._daysInMonth(t,e+1),o=document.createDocumentFragment(),r=i.create("ul");o.appendChild(r);for(var s=this._getFirstDayIndex(t,e),a=0;a<s;a++)r.appendChild(i.create("li",{className:"ink-calendar-empty",setHTML:"&nbsp;"}));for(var l=1;l<=n;l++)(l-1+s)%7===0&&(r=i.create("ul"),o.appendChild(r)),r.appendChild(this._getDayButton(t,e,l));
return o},_getDayButton:function(t,e,n){var o={},r=c(t,e,n);this._acceptableDay(r)?(o["data-cal-day"]=n,this._day&&0===this._dateCmp(r,this)&&(o.className="ink-calendar-on")):o.className="ink-calendar-off",o.setTextContent=n;var s=i.create("li");return s.appendChild(i.create("a",o)),s},_getMonthCalendarHeader:function(t){for(var e,n=i.create("ul",{className:"ink-calendar-header"}),o=0;o<7;o++)e=(t+o)%7,n.appendChild(i.create("li",{setTextContent:this.i18n.getKey("datepicker.week_days")[e].substring(0,1)}));return n},_addMonthClassNames:function(t){r.forEach((t||this._monthSelector).getElementsByTagName("a"),Ink.bindMethod(this,"_addMonthButtonClassNames"))},_addMonthButtonClassNames:function(t){var e=i.data(t);if(!e.calMonth)throw"not a calendar month button!";var o=+e.calMonth-1;if(o===this._month)n.addClassName(t,"ink-calendar-on"),n.removeClassName(t,"ink-calendar-off");else{n.removeClassName(t,"ink-calendar-on");var r=!this._acceptableMonth({_year:this._year,_month:o});n.addRemoveClassName(t,"ink-calendar-off",r)}},setI18n:function(t){t.clone&&(t=t.clone()),this.i18n=t},getI18n:function(){return this.i18n||m},setLanguage:function(t){this.i18n||this.setI18n(m),this.i18n.lang(t)},getLanguage:function(){return this.i18n?this.i18n.lang():m.lang()},showMonth:function(){this._renderMonth()},isMonthRendered:function(){var t=o.select(".ink-calendar-header",this._containerObject)[0];return"none"!==n.getStyle(t.parentNode,"display")&&"none"!==n.getStyle(t.parentNode.parentNode,"display")},destroy:function(){i.unwrap(this._element),i.remove(this._wrapper),i.remove(this._containerObject),t.unregisterInstance.call(this)}},t.createUIComponent(f),f}),Ink.createModule("Ink.UI.DragDrop",1,["Ink.Dom.Element_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Util.Array_1","Ink.UI.Common_1","Ink.Dom.Selector_1"],function(t,e,n,i,o,r){"use strict";function s(t){t.exceptFor.style.display="none";var e=document.elementFromPoint(t.x,t.y);return t.exceptFor.style.display="",e}function a(){o.BaseUIComponent.apply(this,arguments)}return a._name="DragDrop_1",a._optionDefinition={dragItem:["String",".drag-item"],dragHandle:["String",".drag-handle"],dropZone:["String",".drop-zone"],ignoreDrag:["String",".drag-ignore"],draggedCloneClass:["String","drag-cloned-item"],placeholderClass:["String","drag-placeholder-item"],onDrag:["Function",null],onDrop:["Function",null]},a.prototype={_init:function(){this._dragActive=!1,this._draggedElm=null,this._clonedElm=null,this._placeholderElm=null,this._originalDrop=null,this._mouseDelta=[0,0],this._addEvents()},_addEvents:function(){e.on(this._element,"mousedown touchstart",Ink.bindEvent(this._onMouseDown,this))},_onMouseDown:function(n){var i=e.element(n),o=t.findUpwardsBySelector(i,this._options.dragItem),r=t.findUpwardsBySelector(i,this._options.ignoreDrag);if(o&&!r){var s=Ink.s(this._options.dragHandle,o);s&&t.findUpwardsBySelector(i,this._options.dragHandle)?this._dragActive=!0:s||(this._dragActive=!0),this._dragActive&&(e.stopDefault(n),this._startDrag(n,o))}},_startDrag:function(i,o){this._clonedElm=o.cloneNode(!0),this._placeholderElm=o.cloneNode(!1),n.addClassName(this._clonedElm,this._options.draggedCloneClass),this._clonedElm.removeAttribute("id"),n.addClassName(this._placeholderElm,this._options.placeholderClass),this._placeholderElm.removeAttribute("id");var r=o.getBoundingClientRect(),s=[r.right-r.left,r.bottom-r.top];this._clonedElm.style.width=s[0]+"px",this._clonedElm.style.height=s[1]+"px",this._placeholderElm.style.width=s[0]+"px",this._placeholderElm.style.height=s[1]+"px",this._placeholderElm.style.visibility="hidden",this._clonedElm.style.position="fixed",this._clonedElm.style.zIndex="1000",this._clonedElm.style.left=r.left+"px",this._clonedElm.style.top=r.top+"px";var a=e.pointer(i),l=t.offset(o);this._mouseDelta=[a.x-l[0],a.y-l[1]],this._clonedElm.style.opacity="0.6",o.parentNode.insertBefore(this._clonedElm,o),this._draggedElm=o,o.parentNode.insertBefore(this._placeholderElm,o),n.addClassName(o,"hide-all");var h="function"==typeof this._options.onDrag,u="function"==typeof this._options.onDrop;if(h||u){var c={dragItem:this._draggedElm,dropZone:this.getDropZone(this._draggedElm)};h&&this._options.onDrag.call(this,c),u&&(this._originalDrop=c.dropZone)}var d=e.throttle(this._onMouseMove,50,{preventDefault:!0,bind:this});e.on(document,"mousemove.inkdraggable touchmove.inkdraggable",d),e.on(document,"mouseup.inkdraggable touchend.inkdraggable",Ink.bindEvent(this._onMouseUp,this))},_onMouseMove:function(n){if(this._dragActive){var i=e.pointer(n),o=t.scrollWidth(),r=t.scrollHeight();this._clonedElm.style.left=i.x-this._mouseDelta[0]-o+"px",this._clonedElm.style.top=i.y-this._mouseDelta[1]-r+"px";var a=s({x:i.x-o,y:i.y-r,exceptFor:this._clonedElm}),l=this.getDropZone(a),h=l&&(t.isAncestorOf(this._element,l)||this._element===l);if(l&&h){var u=t.findUpwardsBySelector(a,this._options.dragItem);u&&this.isDragItem(u)?this._insertPlaceholder(u):this._dropZoneIsEmpty(l)&&l.appendChild(this._placeholderElm)}}},isDragItem:function(t){return r.matchesSelector(t,this._options.dragItem)&&t!==this._draggedElm&&t!==this._placeholderElm&&t!==this._clonedElm},_dropZoneIsEmpty:function(t){var e=Ink.ss(this._options.dragItem,t);return!i.some(e,Ink.bindMethod(this,"isDragItem"))},_onMouseUp:function(){this._dragActive&&(t.insertBefore(this._draggedElm,this._placeholderElm),t.remove(this._placeholderElm),t.remove(this._clonedElm),n.removeClassName(this._draggedElm,"hide-all"),e.off(document,".inkdraggable"),this._dragActive=!1,"function"==typeof this._options.onDrop&&this._options.onDrop.call(this,{origin:this._originalDrop,dragItem:this._draggedElm,dropZone:this.getDropZone(this._draggedElm)}),this._placeholderElm=null,this._clonedElm=null,this._draggedElm=null,this._originalDrop=null)},getDropZone:function(e){var n=t.findUpwardsBySelector(e,this._options.dropZone)||this._element;return t.isAncestorOf(this._element,n)||n===this._element?n:null},getDraggedElement:function(){return this.dragActive?this._draggedElm:null},_insertPlaceholder:function(e){var n=!0;i.inArray(this._placeholderElm,t.previousSiblings(e))||(n=!1),n?t.insertAfter(this._placeholderElm,e):t.insertBefore(this._placeholderElm,e)},destroy:function(){this._dragActive&&e.off(document,".inkdraggable"),o.destroyComponent.call(this)}},o.createUIComponent(a),a}),Ink.createModule("Ink.UI.Draggable","1",["Ink.Dom.Element_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Browser_1","Ink.Dom.Selector_1","Ink.UI.Common_1"],function(t,e,n,i,o,r){"use strict";function s(t,e,n){return t=Math.min(t,n),t=Math.max(t,e)}function a(){r.BaseUIComponent.apply(this,arguments)}var l=0,h=1;return a._name="Draggable_1",a._optionDefinition={constraint:["String",!1],constraintElm:["Element",!1],top:["Number",!1],right:["Number",!1],bottom:["Number",!1],left:["Number",!1],handle:["Element",!1],revert:["Boolean",!1],cursor:["String","move"],zIndex:["Number",9999],fps:["Number",0],droppableProxy:["Element",!1],mouseAnchor:["String",void 0],dragClass:["String","drag"],skipChildren:["Boolean",!0],onStart:["Function",!1],onEnd:["Function",!1],onDrag:["Function",!1],onChange:["Function",!1]},a.prototype={_init:function(){var t=this._options;this.constraintElm=t.constraintElm&&r.elOrSelector(t.constraintElm),this.handle=!1,this.elmStartPosition=!1,this.active=!1,this.dragged=!1,this.prevCoords=!1,this.placeholder=!1,this.position=!1,this.zindex=!1,this.firstDrag=!0,t.fps&&(this.deltaMs=1e3/t.fps,this.lastRunAt=0),this.handlers={},this.handlers.start=Ink.bindEvent(this._onStart,this),this.handlers.dragFacade=Ink.bindEvent(this._onDragFacade,this),this.handlers.drag=Ink.bindEvent(this._onDrag,this),this.handlers.end=Ink.bindEvent(this._onEnd,this),this.handlers.selectStart=function(t){return e.stop(t),!1},this.handle=this._options.handle?r.elOrSelector(this._options.handle):this._element,this.handle.style.cursor=t.cursor,e.observe(this.handle,"touchstart",this.handlers.start),e.observe(this.handle,"mousedown",this.handlers.start),i.IE&&e.observe(this._element,"selectstart",this.handlers.selectStart)},destroy:function(){e.stopObserving(this.handle,"touchstart",this.handlers.start),e.stopObserving(this.handle,"mousedown",this.handlers.start),i.IE&&e.stopObserving(this._element,"selectstart",this.handlers.selectStart)},_getCoords:function(e){var n=[t.scrollWidth(),t.scrollHeight()];return{x:(e.touches?e.touches[0].clientX:e.clientX)+n[l],y:(e.touches?e.touches[0].clientY:e.clientY)+n[h]}},_cloneStyle:function(e,i){i.className=e.className,i.style.borderWidth="0",i.style.padding="0",i.style.position="absolute",i.style.width=t.elementWidth(e)+"px",i.style.height=t.elementHeight(e)+"px",i.style.left=t.elementLeft(e)+"px",i.style.top=t.elementTop(e)+"px",i.style.cssFloat=n.getStyle(e,"float"),i.style.display=n.getStyle(e,"display")},_onStart:function(i){if(!this.active&&e.isLeftClick(i)||"undefined"==typeof i.button){var o=e.element(i);if(this._options.skipChildren&&o!==this.handle)return;e.stop(i),n.addClassName(this._element,this._options.dragClass),this.elmStartPosition=[t.elementLeft(this._element),t.elementTop(this._element)];var r=[parseInt(n.getStyle(this._element,"left"),10),parseInt(n.getStyle(this._element,"top"),10)],s=t.elementDimensions(this._element);this.originalPosition=[r[l]?r[l]:null,r[h]?r[h]:null],this.delta=this._getCoords(i),this.active=!0,this.position=n.getStyle(this._element,"position"),this.zindex=n.getStyle(this._element,"zIndex");var a=document.createElement("div");if(a.style.position=this.position,a.style.width=s[l]+"px",a.style.height=s[h]+"px",a.style.marginTop=n.getStyle(this._element,"margin-top"),a.style.marginBottom=n.getStyle(this._element,"margin-bottom"),a.style.marginLeft=n.getStyle(this._element,"margin-left"),a.style.marginRight=n.getStyle(this._element,"margin-right"),a.style.borderWidth="0",a.style.padding="0",a.style.cssFloat=n.getStyle(this._element,"float"),a.style.display=n.getStyle(this._element,"display"),a.style.visibility="hidden",this.delta2=[this.delta.x-this.elmStartPosition[l],this.delta.y-this.elmStartPosition[h]],this._options.mouseAnchor){var u=this._options.mouseAnchor.split(" "),c=[s[l],s[h]];"left"===u[0]?c[l]=0:"center"===u[0]&&(c[l]=parseInt(c[l]/2,10)),"top"===u[1]?c[h]=0:"center"===u[1]&&(c[h]=parseInt(c[h]/2,10)),this.applyDelta=[this.delta2[l]-c[l],this.delta2[h]-c[h]]}var d=this._options.fps?"dragFacade":"drag";if(this.placeholder=a,this._options.onStart&&this._options.onStart(this._element,i),this._options.droppableProxy){this.proxy=document.createElement("div"),s=[window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight];var p=this.proxy.style;p.width=s[l]+"px",p.height=s[h]+"px",p.position="fixed",p.left="0",p.top="0",p.zIndex=this._options.zIndex+1,p.backgroundColor="#FF0000",n.setOpacity(this.proxy,0);for(var f=document.body.firstChild;f&&1!==f.nodeType;)f=f.nextSibling;document.body.insertBefore(this.proxy,f),e.observe(this.proxy,"mousemove",this.handlers[d]),e.observe(this.proxy,"touchmove",this.handlers[d])}else e.observe(document,"mousemove",this.handlers[d]);return this._element.style.position="absolute",this._element.style.zIndex=this._options.zIndex,this._element.parentNode.insertBefore(this.placeholder,this._element),this._onDrag(i),e.observe(document,"mouseup",this.handlers.end),e.observe(document,"touchend",this.handlers.end),!1}},_onDragFacade:function(t){var e=+new Date;(!this.lastRunAt||e>this.lastRunAt+this.deltaMs)&&(this.lastRunAt=e,this._onDrag(t))},_onDrag:function(n){if(this.active){e.stop(n),this.dragged=!0;var i=this._getCoords(n),o=i.x,r=i.y,a=this._options,u=!1,c=!1;if(this.prevCoords&&o!==this.prevCoords.x||r!==this.prevCoords.y){a.onDrag&&a.onDrag(this._element,n),this.prevCoords=i,u=this.elmStartPosition[l]+o-this.delta.x,c=this.elmStartPosition[h]+r-this.delta.y;var d=t.elementDimensions(this._element);if(this.constraintElm){var p=t.offset(this.constraintElm),f=t.elementDimensions(this.constraintElm),m=p[h]+(a.top||0),_=p[h]+f[h]-(a.bottom||0),g=p[l]+(a.left||0),v=p[l]+f[l]-(a.right||0);c=s(c,m,_-d[h]),u=s(u,g,v-d[l])}else if(a.constraint){var y=a.right===!1?t.pageWidth()-d[l]:a.right,b=a.left===!1?0:a.left,k=a.top===!1?0:a.top,I=a.bottom===!1?t.pageHeight()-d[h]:a.bottom;"horizontal"!==a.constraint&&"both"!==a.constraint||(u=s(u,b,y)),"vertical"!==a.constraint&&"both"!==a.constraint||(c=s(c,k,I))}var C=Ink.getModule("Ink.UI.Droppable_1");if(this.firstDrag&&(C&&C.updateAll(),this.firstDrag=!1),u&&(this._element.style.left=u+"px"),c&&(this._element.style.top=c+"px"),C){var w=this._options.mouseAnchor?{x:o-this.applyDelta[l],y:r-this.applyDelta[h]}:i;C.action(w,"drag",n,this._element)}a.onChange&&a.onChange(this)}}},_onEnd:function(i){if(e.stopObserving(document,"mousemove",this.handlers.drag),e.stopObserving(document,"touchmove",this.handlers.drag),this._options.fps&&this._onDrag(i),n.removeClassName(this._element,this._options.dragClass),this.active&&this.dragged){this._options.droppableProxy&&document.body.removeChild(this.proxy),this.pt&&(t.remove(this.pt),this.pt=void 0),this.placeholder&&t.remove(this.placeholder),this._options.revert&&(this._element.style.position=this.position,null!==this.zindex?this._element.style.zIndex=this.zindex:this._element.style.zIndex="auto",this._element.style.left=this.originalPosition[l]?this.originalPosition[l]+"px":"",this._element.style.top=this.originalPosition[h]?this.originalPosition[h]+"px":""),this._options.onEnd&&this._options.onEnd(this._element,i);var o=Ink.getModule("Ink.UI.Droppable_1");o&&o.action(this._getCoords(i),"drop",i,this._element),this.position=!1,this.zindex=!1,this.firstDrag=!0}this.active=!1,this.dragged=!1}},r.createUIComponent(a),a}),Ink.createModule("Ink.UI.Drawer","1",["Ink.UI.Common_1","Ink.Dom.Loaded_1","Ink.Dom.Selector_1","Ink.Dom.Element_1","Ink.Dom.Event_1","Ink.Dom.Css_1"],function(t,e,n,i,o,r){"use strict";function s(t){if(document.addEventListener){d&&a();var e=!1;d=function(n){return"mousedown"===n.type||"mouseup"===n.type?void(e="mousedown"===n.type):void(e||t(n.target))},document.addEventListener("focus",d,!0),document.addEventListener("mousedown",d,!0),document.addEventListener("mouseup",d,!0)}}function a(){document.addEventListener&&d&&(document.removeEventListener("focus",d,!0),document.removeEventListener("mousedown",d,!0),document.removeEventListener("mouseup",d,!0),d=null)}function l(t){for(var e=Ink.ss("[tabindex]",t),n=null,i=null,o=0;o<e.length;o++){var r=+e[o].tabIndex;r||e.splice(o,1),(null===n||r<n)&&(n=r,i=e[o])}if(i)return i.focus(),!0;var s=Ink.s(c,t);return!!s&&(s.focus(),!0)}function h(t){return'Ink.UI.Drawer_1: Could not find the "'+t+'" element on this page. Please make sure it exists.'}function u(e,n){t.isDOMElement(e)||(n=e),t.BaseUIComponent.apply(this,[document.body,n])}var c=['[tabindex]:not([tabindex="-1"])',"input","select","textarea","button","object","a[href]","area"].join(","),d=null,p=function(t){var e={WebkitTransitionProperty:"webkitTransitionEnd",transitionProperty:"transitionend"};for(var n in e)if(e.hasOwnProperty(n)&&void 0!==t.style[n])return{styleProp:n,eventName:e[n]};return!1}(document.createElement("div"));return u.transitionSupport=p,u._name="Drawer_1",u._optionDefinition={parentSelector:["String",".ink-drawer"],leftDrawer:["String",".left-drawer"],leftTrigger:["String",".left-drawer-trigger"],rightDrawer:["String",".right-drawer"],rightTrigger:["String",".right-drawer-trigger"],contentDrawer:["String",".content-drawer"],mode:["String","push"],sides:["String","both"]},u.prototype={_init:function(){function t(t){t.drawer&&t.triggers.length?e=!0:n=h(t.drawer?t.drawerOption:t.triggerOption)}if(this._contentDrawers=Ink.ss(this._options.contentDrawer),this._leftDrawer=Ink.s(this._options.leftDrawer),this._leftTriggers=Ink.ss(this._options.leftTrigger),this._rightDrawer=Ink.s(this._options.rightDrawer),this._rightTriggers=Ink.ss(this._options.rightTrigger),r.addClassName(document.body,"ink-drawer"),0===this._contentDrawers.length)throw new Error('Ink.UI.Drawer_1: Could not find any "'+this._options.contentDrawer+'" elements on this page. Please make sure you have at least one.');switch(this._options.sides){case"both":this._triggers=this._options.leftTrigger+", "+this._options.rightTrigger+", "+this._options.contentDrawer;break;case"left":this._triggers=this._options.leftTrigger+", "+this._options.contentDrawer;break;case"right":this._triggers=this._options.rightTrigger+", "+this._options.contentDrawer}var e=!1,n=null;"left"!==this._options.sides&&"both"!==this._options.sides||t({name:"left",drawer:this._leftDrawer,drawerOption:this._options.leftDrawer,triggers:this._leftTriggers,triggerOption:this._options.leftTrigger}),"right"!==this._options.sides&&"both"!==this._options.sides||t({name:"right",drawer:this._rightDrawer,drawerOption:this._options.rightDrawer,triggers:this._rightTriggers,triggerOption:this._options.rightTrigger}),e||Ink.warn(n),this._isOpen=!1,this._direction=void 0,this._handlers={click:Ink.bindEvent(this._onClick,this),afterTransition:Ink.bindEvent(this._afterTransition,this)},this._addEvents()},_onClick:function(t){var e=i.findUpwardsBySelector(t.currentTarget,this._options.leftTrigger)?"left":i.findUpwardsBySelector(t.currentTarget,this._options.rightTrigger)?"right":null;if(e)return void this._onTriggerClicked(t,e);if(this._isOpen){var n=i.findUpwardsBySelector(t.currentTarget,this._options.contentDrawer),o=i.isLink(t.target);(n||o)&&this.close(),n&&t.preventDefault()}},_onTriggerClicked:function(t,e){this._isOpen?this.close():this.open(e),t.preventDefault()},_afterTransition:function(){this._isOpen||r.removeClassName(this._getRecentDrawer(),"show")},_addEvents:function(){o.on(document.body,"click",this._triggers+', a[href*="#"]',this._handlers.click)},_getRecentDrawer:function(){return"left"===this._direction?this._leftDrawer:"right"===this._direction?this._rightDrawer:null},open:function(t){this._isOpen=!0,this._direction=t;var e=this._getRecentDrawer();r.addClassName(e,"show"),setTimeout(Ink.bind(function(){r.addClassName(document.body,[this._options.mode,t])},this),0),p&&this._transitionWillOccur(e)&&o.one(e,p.eventName,function(){r.removeClassName(e,"show"),+e.offsetWidth,r.addClassName(e,"show")});var n=document.activeElement,h=l(e);s(Ink.bind(function(t){var o=i.isAncestorOf(e,t);o||(this.close(),a(),h&&n&&n.focus())},this))},_transitionWillOccur:function(t){return!(!p||!r.getStyle(t,p.styleProp))},close:function(){if(this._isOpen!==!1){var t=this._getRecentDrawer();if(t){a(),this._isOpen=!1;var e=null;p&&(e=this._transitionWillOccur(this._getRecentDrawer())),r.removeClassName(document.body,[this._options.mode,this._direction]),e?o.one(document.body,p.eventName,this._handlers.afterTransition):this._handlers.afterTransition()}}}},t.createUIComponent(u),u}),Ink.createModule("Ink.UI.Dropdown","1",["Ink.UI.Common_1","Ink.UI.Toggle_1","Ink.Dom.Event_1","Ink.Dom.Element_1"],function(t,e,n,i){"use strict";function o(){t.BaseUIComponent.apply(this,arguments)}return o._name="Dropdown_1",o._optionDefinition={target:["Element",null],hoverOpen:["Number",null],dismissOnInsideClick:["Boolean",!1],dismissOnOutsideClick:["Boolean",!0],dismissAfter:["Number",null],onInsideClick:["Function",null],onOutsideClick:["Function",null],onOpen:["Function",null],onDismiss:["Function",null]},o.prototype={_init:function(){if(null===this._options.target&&(this._options.target=Ink.s(".dropdown-menu",this._element),!this._options.target))throw new Error('Dropdown: You did not specify a "target" option, and cannot find an element with the .dropdown-menu class!');this._toggle=new e(this._element,{target:this._options.target,closeOnInsideClick:null,closeOnClick:!1,onChangeState:Ink.bind(function(t){return this._openOrDismiss(t,!0,!0)},this)}),n.observeMulti([this._options.target,this._element],"mouseout",Ink.bindMethod(this,"_onMouseOut")),n.observeMulti([this._options.target,this._element],"mouseover",Ink.bindMethod(this,"_onMouseOver")),n.observe(this._options.target,"click",Ink.bindMethod(this,"_onInsideClick")),n.observe(document,"click",Ink.bindMethod(this,"_onOutsideClick"))},_onMouseOver:function(){"number"==typeof this._options.hoverOpen&&this._toggle.getState()===!1&&(clearTimeout(this._openTimeout),this._openTimeout=setTimeout(Ink.bindMethod(this,"open",!0),1e3*this._options.hoverOpen)),"number"==typeof this._options.dismissAfter&&clearTimeout(this._dismissTimeout)},_onMouseOut:function(){"number"==typeof this._options.dismissAfter&&this._toggle.getState()===!0&&(clearTimeout(this._dismissTimeout),this._dismissTimeout=setTimeout(Ink.bindMethod(this,"dismiss",!0),1e3*this._options.dismissAfter)),"number"==typeof this._options.hoverOpen&&clearTimeout(this._openTimeout)},_onInsideClick:function(t){var e=this._handlerCall("onInsideClick",n.element(t));e!==!1&&this._options.dismissOnInsideClick&&this.dismiss(!0)},_onOutsideClick:function(t){var e=n.element(t),o=i.findUpwardsHaving(e,Ink.bind(function(t){return t===this._element},this)),r=i.findUpwardsHaving(e,Ink.bind(function(t){return t===this._options.target},this));if(!o&&!r){var s=this._handlerCall("onOutsideClick",e);if(s===!1)return;this._options.dismissOnOutsideClick&&this.dismiss(!0)}},dismiss:function(t){this._openOrDismiss(!1,t,arguments[1])},open:function(t){this._openOrDismiss(!0,t,arguments[1])},_openOrDismiss:function(t,e,n){if(!this._toggle||this._toggle.getState()!==t){if(e&&this._handlerCall(t?"onOpen":"onDismiss")===!1)return!1;n||this._toggle.setState(t),clearTimeout(this._dismissTimeout),clearTimeout(this._openTimeout)}},_handlerCall:function(t){if(this._options[t])return this._options[t].call(this,[].slice.call(arguments,1))}},t.createUIComponent(o),o}),Ink.createModule("Ink.UI.Droppable","1",["Ink.Dom.Element_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.UI.Common_1","Ink.Util.Array_1","Ink.Dom.Selector_1"],function(t,e,n,i,o,r){"use strict";var s=function(t){return function(e){return n.addClassName(t,e)}},a=function(t){return function(e){return n.removeClassName(t,e)}},l={debug:!1,_droppables:[],_draggables:[],add:function(e,n){function o(t){t.style.position="inherit"}e=i.elOrSelector(e,"Droppable.add target element");var r=Ink.extendObj({hoverClass:n.hoverclass||!1,accept:!1,onHover:!1,onDrop:!1,onDropOut:!1},n||{},t.data(e));"string"==typeof r.hoverClass&&(r.hoverClass=r.hoverClass.split(/\s+/));var s,a=this,l={move:function(t,e){o(t),e.appendChild(t)},copy:function(t,e){o(t),e.appendChild(t.cloneNode(!0))},revert:function(t){a._findDraggable(t).originalParent.appendChild(t),o(t)}};if("string"==typeof r.onHover&&(s=r.onHover,r.onHover=l[s],void 0===r.onHover))throw new Error("Unknown hover event handler: "+s);if("string"==typeof r.onDrop&&(s=r.onDrop,r.onDrop=l[s],void 0===r.onDrop))throw new Error("Unknown drop event handler: "+s);if("string"==typeof r.onDropOut&&(s=r.onDropOut,r.onDropOut=l[s],void 0===r.onDropOut))throw new Error("Unknown dropOut event handler: "+s);var h={element:e,data:{},options:r};this._droppables.push(h),this._update(h)},_findData:function(t){for(var e=this._droppables,n=0,i=e.length;n<i;n++)if(e[n].element===t)return e[n]},_findDraggable:function(t){for(var e=this._draggables,n=0,i=e.length;n<i;n++)if(e[n].element===t)return e[n]},updateAll:function(){o.each(this._droppables,l._update)},update:function(t){this._update(this._findData(t))},_update:function(e){var n=e.data,i=e.element;n.left=t.offsetLeft(i),n.top=t.offsetTop(i),n.right=n.left+t.elementWidth(i),n.bottom=n.top+t.elementHeight(i)},remove:function(t){t=i.elOrSelector(t);for(var e=this._droppables.length,n=0;n<e;n++)if(this._droppables[n].element===t){this._droppables.splice(n,1);break}return e!==this._droppables.length},action:function(t,e,n,i){o.each(this._droppables,Ink.bind(function(l){var h=l.data,u=l.options,c=l.element;u.accept&&!r.matches(u.accept,[i]).length||("drag"!==e||this._findDraggable(i)||this._draggables.push({element:i,originalParent:i.parentNode}),t.x>=h.left&&t.x<=h.right&&t.y>=h.top&&t.y<=h.bottom?"drag"===e?(u.hoverClass&&o.each(u.hoverClass,s(c)),u.onHover&&u.onHover(i,c)):"drop"===e&&(u.hoverClass&&o.each(u.hoverClass,a(c)),u.onDrop&&u.onDrop(i,c,n)):"drag"===e&&u.hoverClass?o.each(u.hoverClass,a(c)):"drop"===e&&u.onDropOut&&u.onDropOut(i,c,n))},this))}};return l}),Ink.createModule("Ink.UI.FormValidator","1",["Ink.Dom.Element_1","Ink.Dom.Css_1","Ink.Util.Validator_1","Ink.Dom.Selector_1"],function(t,e,n,i){"use strict";function o(t){if(!t.name)return[];if(!t.form)return i.select('[name="'+t.name+'"]');var e=t.form[t.name];return e?("undefined"==typeof e.length&&(e=[e]),e):function(){for(var e=[],n=Ink.ss("*",t.form),i=0;i<n.length;i++)n[i].name===t.name&&e.push(n[i]);return e}()}var r={version:"1",_flagMap:{"ink-fv-required":{msg:"Required field"},"ink-fv-email":{msg:"Invalid e-mail address"},"ink-fv-url":{msg:"Invalid URL"},"ink-fv-number":{msg:"Invalid number"},"ink-fv-phone_pt":{msg:"Invalid phone number"},"ink-fv-phone_cv":{msg:"Invalid phone number"},"ink-fv-phone_mz":{msg:"Invalid phone number"},"ink-fv-phone_ao":{msg:"Invalid phone number"},"ink-fv-date":{msg:"Invalid date"},"ink-fv-confirm":{msg:"Confirmation does not match"},"ink-fv-custom":{msg:""}},elements:{},confirmElms:{},hasConfirm:{},_errorClassName:"tip error",_errorValidationClassName:"validaton",_errorTypeWarningClassName:"warning",_errorTypeErrorClassName:"error",validate:function(t,e){if(this._free(),e=Ink.extendObj({onSuccess:!1,onError:!1,customFlag:!1,confirmGroup:[]},e||{}),"string"==typeof t&&(t=document.getElementById(t)),null===t)return!1;this.element=t,"undefined"!=typeof this.element.id&&null!==this.element.id&&""!==this.element.id||(this.element.id="ink-fv_randomid_"+Math.round(99999*Math.random())),this.custom=e.customFlag,this.confirmGroup=e.confirmGroup;var n=this._validateElements();return n.length>0?(e.onError?e.onError(n):this._showError(t,n),!1):(e.onError||this._clearError(t),this._clearCache(),e.onSuccess&&e.onSuccess(),!0)},reset:function(){this._clearError(),this._clearCache()},_free:function(){this.element=null,this.custom=!1,this.confirmGroup=!1},_clearCache:function(){this.element=null,this.elements=[],this.custom=!1,this.confirmGroup=!1},_getElements:function(){var t=this.elements[this.element.id]=[];this.confirmElms[this.element.id]=[];for(var n=i.select(":input",this.element),o=!1,r=0,s=n.length;r<s;r++){o=n[r];var a=(o.getAttribute("type")+"").toLowerCase();if("radio"===a||"checkbox"===a){if(0===t.length||o.getAttribute("type")!==t[t.length-1].getAttribute("type")&&o.getAttribute("name")!==t[t.length-1].getAttribute("name"))for(var l in this._flagMap)if(e.hasClassName(o,l)){t.push(o);break}}else{for(var h in this._flagMap)if(e.hasClassName(o,h)&&"ink-fv-confirm"!==h){t.push(o);break}e.hasClassName(o,"ink-fv-confirm")&&(this.confirmElms[this.element.id].push(o),this.hasConfirm[this.element.id]=!0)}}},_validateElements:function(){var t;this._getElements(),this.hasConfirm[this.element.id]===!0&&(t=this._makeConfirmGroups());for(var n,i=[],o=!1,r=!1,s=0,a=this.elements[this.element.id].length;s<a;s++)if(n=!1,o=this.elements[this.element.id][s],!o.disabled)for(var l in this._flagMap)if(e.hasClassName(o,l))if("ink-fv-custom"!==l&&"ink-fv-confirm"!==l)this._isValid(o,l)||(n?i[i.length-1].errors.push(l):(i.push({elm:o,errors:[l]}),n=!0));else if("ink-fv-confirm"!==l)r=this._isCustomValid(o),r.length>0&&i.push({elm:o,errors:[l],custom:r});else if("ink-fv-confirm"===l)continue;return i=this._validateConfirmGroups(t,i)},_validateConfirmGroups:function(t,e){var n=!1;for(var i in t)t.hasOwnProperty(i)&&(n=t[i],2===n.length&&n[0].value!==n[1].value&&e.push({elm:n[1],errors:["ink-fv-confirm"]}));return e},_makeConfirmGroups:function(){var t;if(this.confirmGroup&&this.confirmGroup.length>0){t={};for(var n=!1,i=!1,o=0,r=this.confirmElms[this.element.id].length;o<r;o++){n=this.confirmElms[this.element.id][o];for(var s=0,a=this.confirmGroup.length;s<a;s++)i=this.confirmGroup[s],e.hasClassName(n,i)&&("undefined"==typeof t[i]?t[i]=[n]:t[i].push(n))}return t}return 2===this.confirmElms[this.element.id].length&&(t={"ink-fv-confirm":[this.confirmElms[this.element.id][0],this.confirmElms[this.element.id][1]]}),t},_isCustomValid:function(t){for(var n=[],i=!1,o=0,r=this.custom.length;o<r;o++)i=this.custom[o],e.hasClassName(t,i.flag)&&(i.callback(t,i.msg)||n.push({flag:i.flag,msg:i.msg}));return n},_isValid:function(t,i){var r=t.nodeName.toLowerCase(),s=(t.getAttribute("type")||"").toLowerCase(),a=this._trim(t.value);if("ink-fv-required"!==i&&"checkbox"!==s&&"radio"!==s&&""===a)return!e.hasClassName(t,"ink-fv-required");switch(i){case"ink-fv-required":if("select"===r)return t.selectedIndex>0;if("checkbox"!==s&&"radio"!==s)return""!==a;if("checkbox"===s||"radio"===s){for(var l=o(t),h=0,u=l.length;h<u;h++)if(l[h].checked===!0)return!0;return!1}return!1;case"ink-fv-email":return n.mail(t.value);case"ink-fv-url":return n.url(t.value);case"ink-fv-number":return!isNaN(Number(t.value))&&isFinite(Number(t.value));case"ink-fv-phone_pt":return n.isPTPhone(t.value);case"ink-fv-phone_cv":return n.isCVPhone(t.value);case"ink-fv-phone_ao":return n.isAOPhone(t.value);case"ink-fv-phone_mz":return n.isMZPhone(t.value);case"ink-fv-date":var c=Ink.getModule("Ink.Dom.Element",1),d=c.data(t),p="yyyy-mm-dd";if(e.hasClassName(t,"ink-datepicker")&&"format"in d?p=d.format:"validFormat"in d&&(p=d.validFormat),!(p in n._dateParsers)){var f=[];for(var m in n._dateParsers)n._dateParsers.hasOwnProperty(m)&&f.push(m);throw new Error("The attribute data-valid-format must be one of the following values: "+f.join(", "))}return n.isDate(p,t.value);case"ink-fv-custom":}return!1},_showError:function(t,e){this._clearError(t);for(var n=!1,i=0,o=e.length;i<o;i++)n=e[i].elm,n&&this._showAnErrorOnElement(n,e[i])},_showAnErrorOnElement:function(n,i){var o=t.findUpwardsByClass(n,"control-group"),r=t.findUpwardsByClass(n,"control"),s=[this._errorClassName,this._errorTypeClassName].join(" "),a=t.create("p",{className:s});"ink-fv-custom"!==i.errors[0]?a.innerHTML=this._flagMap[i.errors[0]].msg:a.innerHTML=i.custom[0].msg;var l=r||o;l?l.appendChild(a):t.insertAfter(a,n),r&&("ink-fv-required"===i.errors[0]?e.addClassName(o,"validation error"):e.addClassName(o,"validation warning"))},_clearError:function(n){for(var i,o,r=n.getElementsByTagName("p"),s=r.length-1;s>=0;s--)i=r[s],e.hasClassName(i,this._errorClassName)&&(o=t.findUpwardsBySelector(i,".control-group"),o&&e.removeClassName(o,["validation","error","warning"]),e.hasClassName(i,this._errorClassName,!0)&&t.remove(i));var a=n.getElementsByTagName("ul");for(s=a.length-1;s>=0;s--)i=a[s],e.hasClassName(i,"control-group")&&e.removeClassName(i,"validation error")},_trim:function(t){if("string"==typeof t)return t.replace(/^\s+|\s+$|\n+$/g,"")}};return r}),Ink.createModule("Ink.UI.FormValidator","2",["Ink.UI.Common_1","Ink.Dom.Element_1","Ink.Dom.Event_1","Ink.Dom.Selector_1","Ink.Dom.Css_1","Ink.Util.Array_1","Ink.Util.I18n_1","Ink.Util.Validator_1"],function(t,e,n,i,o,r,s,a){"use strict";function l(t){switch(t.nodeName.toLowerCase()){case"select":var e=Ink.s("option:checked",t);return e?e.value:"";case"textarea":return t.value;case"input":if(!("type"in t))return t.value;if("radio"===t.type||"checkbox"===t.type){if(t.checked)return t.value}else if("file"!==t.type)return t.value;return;default:return t.innerHTML}}function h(){t.BaseUIComponent.apply(this,arguments)}function u(){t.BaseUIComponent.apply(this,arguments)}var c={required:function(t){return"undefined"!=typeof t&&!/^\s*$/.test(t)},min_length:function(t,e){return"string"==typeof t&&t.length>=parseInt(e,10)},max_length:function(t,e){return"string"==typeof t&&t.length<=parseInt(e,10)},exact_length:function(t,e){return"string"==typeof t&&t.length===parseInt(e,10)},email:function(t){return"string"==typeof t&&a.mail(t)},url:function(t,e){return e=e||!1,"string"==typeof t&&a.url(t,e)},ip:function(t,e){return"string"==typeof t&&a.isIP(t,e)},phone:function(t,e){
if("string"!=typeof t)return!1;var n=e?e.toUpperCase():"";return a["is"+n+"Phone"](t)},credit_card:function(t,e){return"string"==typeof t&&a.isCreditCard(t,e||"default")},date:function(t,e){return"string"==typeof t&&a.isDate(e,t)},alpha:function(t,e){return a.ascii(t,{singleLineWhitespace:e})},text:function(t,e,n){return a.unicode(t,{singleLineWhitespace:e,numbers:!0,unicodePunctuation:n})},latin:function(t,e,n){return"string"==typeof t&&a.latin1(t,{latin1Punctuation:e,singleLineWhitespace:n,numbers:!0})},alpha_numeric:function(t){return a.ascii(t,{numbers:!0})},alpha_dash:function(t){return a.ascii(t,{dash:!0,underscore:!0})},digit:function(t){return"string"==typeof t&&/^[0-9]{1}$/.test(t)},integer:function(t,e){return a.number(t,{negative:!e,decimalPlaces:0})},decimal:function(t,e,n,i){return a.number(t,{decimalSep:e||".",decimalPlaces:+n||null,maxDigits:+i})},numeric:function(t,e,n,i){return e=e||".",t.indexOf(e)!==-1?c.decimal(t,e,n,i):c.integer(t)},range:function(t,e,n,i){return t=+t,e=+e,n=+n,!(isNaN(t)||isNaN(e)||isNaN(n)||t<e||t>n||i&&(t-e)%i!==0)},color:function(t){return a.isColor(t)},matches:function(t,e){var n=this.getFormElements()[e];if(!n){for(var i=Ink.ss("input, select, textarea, .control-group",this._options.form._element),o=0;o<i.length;o++)if((i[o].name||i[o].id)===e)return l(i[o])===t;return!1}n=n[0];var r=n.getValue();return(!n._rules.required||""!==r)&&t===r},ean:function(t){return a.isEAN(t.replace(/[^\d]/g,""),"ean-13")}},d=new s({en_US:{"formvalidator.generic_error":"{field} is invalid","formvalidator.required":"Filling {field} is mandatory","formvalidator.min_length":"The {field} must have a minimum size of {param1} characters","formvalidator.max_length":"The {field} must have a maximum size of {param1} characters","formvalidator.exact_length":"The {field} must have an exact size of {param1} characters","formvalidator.email":"The {field} must have a valid e-mail address","formvalidator.url":"The {field} must have a valid URL","formvalidator.ip":"The {field} does not contain a valid {param1} IP address","formvalidator.phone":"The {field} does not contain a valid {param1} phone number","formvalidator.credit_card":"The {field} does not contain a valid {param1} credit card","formvalidator.date":"The {field} should contain a date in the {param1} format","formvalidator.alpha":"The {field} should only contain letters","formvalidator.text":"The {field} should only contain alphabetic characters","formvalidator.latin":"The {field} should only contain alphabetic characters","formvalidator.alpha_numeric":"The {field} should only contain letters or numbers","formvalidator.alpha_dash":"The {field} should only contain letters or dashes","formvalidator.digit":"The {field} should only contain a digit","formvalidator.integer":"The {field} should only contain an integer","formvalidator.decimal":"The {field} should contain a valid decimal number","formvalidator.numeric":"The {field} should contain a number","formvalidator.range":"The {field} should contain a number between {param1} and {param2}","formvalidator.color":"The {field} should contain a valid color","formvalidator.matches":"The {field} should match the field {param1}"},pt_PT:{"formvalidator.generic_error":"{field} invlido","formvalidator.required":"Preencher {field}  obrigatrio","formvalidator.min_length":"{field} deve ter no mnimo {param1} caracteres","formvalidator.max_length":"{field} tem um tamanho mximo de {param1} caracteres","formvalidator.exact_length":"{field} devia ter exactamente {param1} caracteres","formvalidator.email":"{field} deve ser um e-mail vlido","formvalidator.url":"O {field} deve ser um URL vlido","formvalidator.ip":"{field} no tem um endereo IP {param1} vlido","formvalidator.phone":"{field} deve ser preenchido com um nmero de telefone {param1} vlido.","formvalidator.credit_card":"{field} no tem um carto de crdito {param1} vlido","formvalidator.date":"{field} deve conter uma data no formato {param1}","formvalidator.alpha":"O campo {field} deve conter apenas caracteres alfabticos","formvalidator.text":"O campo {field} deve conter apenas caracteres alfabticos","formvalidator.latin":"O campo {field} deve conter apenas caracteres alfabticos","formvalidator.alpha_numeric":"{field} deve conter apenas letras e nmeros","formvalidator.alpha_dash":"{field} deve conter apenas letras e traos","formvalidator.digit":"{field} destina-se a ser preenchido com apenas um dgito","formvalidator.integer":"{field} deve conter um nmero inteiro","formvalidator.decimal":"{field} deve conter um nmero vlido","formvalidator.numeric":"{field} deve conter um nmero vlido","formvalidator.range":"{field} deve conter um nmero entre {param1} e {param2}","formvalidator.color":"{field} deve conter uma cor vlida","formvalidator.matches":"{field} deve corresponder ao campo {param1}"}},"en_US");return h._name="FormElement_1",h._optionDefinition={label:["String",null],rules:["String",null],error:["String",null],autoReparse:["Boolean",!1],form:["Object"]},h.prototype={_init:function(){this._errors={},this._rules={},this._value=null,this._forceInvalid=null,this._forceValid=null,this._errorParagraph=null,null===this._options.label&&(this._options.label=this._getLabel()),this._elementHadDataRules=this._element.hasAttribute("data-rules")},_getLabel:function(){var t=e.findUpwardsBySelector(this._element,".control-group label");return t?e.textContent(t):this._element.name||this._element.id||""},_parseRules:function(t){this._rules={},t=t.split("|");var e,n,i,o,r=t.length;if(r>0)for(e=0;e<r;e++)if(n=t[e])if((o=n.indexOf("["))!==-1){i=n.substr(o+1),i=i.split("]"),i=i[0],i=i.split(",");for(var s=0,a=i.length;s<a;s++)i[s]="true"===i[s]||"false"!==i[s]&&i[s];i.splice(0,0,this.getValue()),n=n.substr(0,o),this._rules[n]=i}else this._rules[n]=[this.getValue()]},_addError:function(t){"string"==typeof t&&(t={rule:t});var e=t.rule,n=t.message;if(!n&&!e)throw new Error("FormElement#_addError: Please pass an error message, or a rule that was broken");if(!n){for(var i=this._rules[e]||[],o={field:this._options.label,value:this.getValue()},r=1;r<i.length;r++)o["param"+r]=i[r];var s="formvalidator."+e;this._options.error?n=this._options.error:(n=this._options.form.getI18n().text(s,o),n===s&&(n="[Validation message not found for rule ]"+e))}this._errors[e]=n},getValue:function(){return l(this._element)},getLabel:function(){return this._options.label},getErrors:function(){return this._errors},getElement:function(){return this._element},getFormElements:function(){return this._options.form._formElements},setRules:function(t){this._options.rules=t},forceInvalid:function(t){this._forceInvalid=t?t:this._options.form.getI18n().text("formvalidator.generic_error",{field:this.getLabel()})},unforceInvalid:function(){this._forceInvalid=null},forceValid:function(){this._forceValid=!0},unforceValid:function(){this._forceValid=!1},getControlGroup:function(){return o.hasClassName(this._element,"control-group")?this._element:e.findUpwardsByClass(this._element,"control-group")},getControl:function(){return o.hasClassName(this._element,"control-group")?Ink.s(".control",this._element)||void 0:e.findUpwardsByClass(this._element,"control")},removeErrors:function(){var t=this.getControlGroup();t&&o.removeClassName(t,["validation","error"]),this._errorParagraph&&e.remove(this._errorParagraph)},displayErrors:function(){this.validate(),this.removeErrors();var t=this.getErrors(),n=[];for(var i in t)t.hasOwnProperty(i)&&n.push(t[i]);if(n.length){var r=this.getControlGroup(),s=this.getControl();r&&o.addClassName(r,["validation","error"]);var a=document.createElement("p");o.addClassName(a,"tip"),s||r?(s||r).appendChild(a):e.insertAfter(a,this._element),a.innerHTML=n.join("<br/>"),this._errorParagraph=a}},validate:function(){if(this._forceValid)return this._errors={},!0;if(this._element.disabled)return!0;if(this._forceInvalid)return this._addError({message:this._forceInvalid}),!1;if(this._errors={},this._options.autoReparse){var t=this._element.getAttribute("data-rules");if(t)this._options.rules=t;else if(this._elementHadDataRules&&!this._element.hasAttribute("data-rules"))return!0}this._parseRules(this._options.rules);var e=""!==this.getValue()||"required"in this._rules||"matches"in this._rules;if(e)for(var n in this._rules)if(this._rules.hasOwnProperty(n)){if("function"!=typeof c[n])return Ink.warn('Rule "'+n+'" not found. Used in element:',this._element),this._addError({message:this._options.form.getI18n().text("formvalidator.generic_error",{field:this.getLabel()})}),!1;if(c[n].apply(this,this._rules[n])===!1)return this._addError({rule:n}),!1}return!0}},t.createUIComponent(h),u._name="FormValidator_1",u._optionDefinition={lang:["String",null],eventTrigger:["String","submit"],neverSubmit:["Boolean",!1],autoReparse:["Boolean",!1],searchFor:["String","input, select, textarea, .control-group"],beforeValidation:["Function",void 0],onError:["Function",void 0],onSuccess:["Function",void 0],extraValidation:["Function",void 0]},u.setRule=function(t,e,n){if(c[t]=n,d.getKey("formvalidator."+t)!==e){var i={};i["formvalidator."+t]=e;var o={};o[d.lang()]=i,d.append(o)}},u.getI18n=function(){return d},u.setI18n=function(t){d=t},u.appendI18n=function(){d.append.apply(d,[].slice.call(arguments))},u.setLanguage=function(t){d.lang(t)},u.getRules=function(){return c},u.prototype={_init:function(){this._rootElement=this._element,this._formElements={},this._errorMessages=[],this._markedErrorElements=[],"string"==typeof this._options.eventTrigger&&n.observe(this._rootElement,this._options.eventTrigger,Ink.bindEvent(this.validate,this)),this._options.lang&&this.setLanguage(this._options.lang)},getElements:function(){this._formElements||(this._formElements={});var t;for(var n in this._formElements)if(this._formElements.hasOwnProperty(n)){for(t=this._formElements[n].length;t--;)e.isAncestorOf(document.documentElement,this._formElements[n][t]._element)||(this._formElements[n][t].removeErrors(),this._formElements[n].splice(t,1));0===this._formElements[n].length&&delete this._formElements[n]}var o=i.select(this._options.searchFor,this._rootElement);for(t=0;t<o.length;t+=1){var r=o[t],s=e.data(r);if("rules"in s){var a,l={form:this};"name"in r&&r.name?a=r.name:"id"in r&&r.id?a=r.id:(a="element_"+Math.floor(100*Math.random()),r.id=a),a in this._formElements||(this._formElements[a]=[]);var h=this._getOrCreateFormElementInstance(a,r,l);h&&this._formElements[a].push(h)}}return this._formElements},_getOrCreateFormElementInstance:function(t,e,n){for(var i=0;i<this._formElements[t].length;i++)if(this._formElements[t][i].getElement()===e)return null;return e.getAttribute("data-auto-reparse")||(n.autoReparse=this._options.autoReparse),new h(e,n)},setI18n:function(t){t.clone&&(t=t.clone()),this.i18n=t},getI18n:function(){return this.i18n||d},setLanguage:function(t){this.i18n||this.setI18n(d),this.i18n.lang(t)},getLanguage:function(){return this.i18n?this.i18n.lang():d.lang()},validate:function(t){this._options.neverSubmit&&t&&n.stopDefault(t),this.getElements(),"function"==typeof this._options.beforeValidation&&this._options.beforeValidation.call(this,{event:t,validator:this,elements:this._formElements}),o.removeClassName(this._element,"form-error");var e=[];for(var i in this._formElements)if(this._formElements.hasOwnProperty(i))for(var r=0;r<this._formElements[i].length;r+=1)this._formElements[i][r].removeErrors(),this._formElements[i][r].validate()||e.push(this._formElements[i][r]);var s=0===e.length;if("function"==typeof this._options.extraValidation){var a={event:t,validator:this,elements:this._formElements,errorCount:e.length},l=this._options.extraValidation.call(this,a);l===!1&&(s=!1)}return s?"function"==typeof this._options.onSuccess&&this._options.onSuccess():(t&&n.stopDefault(t),"function"==typeof this._options.onError&&this._options.onError(e),this._invalid(e)),s},_invalid:function(t){t=t||[],this._errorMessages=[],o.addClassName(this._element,"form-error");for(var e=0;e<t.length;e++)t[e].displayErrors()}},t.createUIComponent(u),u.FormElement=h,u.validationFunctions=c,u}),Ink.createModule("Ink.UI.ImageQuery","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Element_1","Ink.Util.Array_1"],function(t,e,n,i){"use strict";function o(){t.BaseUIComponent.apply(this,arguments)}return o._name="ImageQuery_1",o._optionDefinition={src:["String"],retina:["String",void 0],queries:["Object"],onLoad:["Function",null]},o.prototype={_init:function(){var t;if((t=this._element.src.lastIndexOf("?"))!==-1){var n=this._element.src.substr(t);this._filename=this._element.src.replace(n,"").split("/").pop()+n}else this._filename=this._element.src.split("/").pop();this._options.queries||(this._options.queries=[]),this._options.queries=i.sortMulti(this._options.queries,"width").reverse(),"function"==typeof this._options.onLoad&&e.observe(this._element,"load",Ink.bindEvent(this._onLoad,this)),this._onResize(),e.observe(window,"resize",e.throttle(Ink.bindMethod(this,"_onResize"),400))},_onResize:function(){if(this._options.queries.length){var t=this._findCurrentQuery();this._element.src=this.getQuerySrc(t)}},_findCurrentQuery:function(){for(var t=n.viewportWidth(),e=this._options.queries,i=e.length-1,o=0;o<i;o+=1)if(e[o].width<=t)return e[o];return e[i]},getQuerySrc:function(t){var e=t.src||this._options.src;if(window.devicePixelRatio>1&&void 0!==this._options.retina&&(e=t.retina||this._options.retina),t.file=this._filename,"function"==typeof e&&(e=e.apply(this,[this._element,t]),"string"!=typeof e))throw'[ImageQuery] :: "src" callback does not return a string';return e=e.replace(/{:(.*?)}/g,function(e,n){return t[n]}),delete t.file,e},_onLoad:function(){this._options.onLoad.call(this)}},t.createUIComponent(o),o}),Ink.createModule("Ink.UI.LazyLoad","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Element_1","Ink.Dom.Css_1"],function(t,e,n,i){"use strict";function o(){t.BaseUIComponent.apply(this,arguments)}var r="onscroll"in document&&"undefined"==typeof operamini;return o._name="LazyLoad_1",o._optionDefinition={item:["String",".lazyload-item"],placeholder:["String",null],loadedClass:["String",null],source:["String","data-src"],destination:["String","src"],delay:["Number",100],delta:["Number",0],image:["Boolean",!0],scrollElement:["Element",window],touchEvents:["Boolean",!0],onInsideViewport:["Function",!1],onAfterAttributeChange:["Function",!1],autoInit:["Boolean",!0]},o.prototype={_init:function(){this._aData=[],this._hasEvents=!1,this._options.autoInit&&this._activate()},_activate:function(){if(this._getData(),!r)for(var t=0;t<this._aData.length;t++)this._elInViewport(this._aData[t]);this._hasEvents||this._addEvents(),this._onScrollThrottled()},_getData:function(){for(var t=Ink.ss(this._options.item,this._element),e=null,i=0,o=t.length;i<o;i++)null==this._options.placeholder||n.hasAttribute(t[i],this._options.destination)||t[i].setAttribute(this._options.destination,this._options.placeholder),e=t[i].getAttribute(this._options.source),null===e&&this._options.image||this._aData.push({elm:t[i],original:e})},_addEvents:function(){r&&(this._onScrollThrottled=e.throttle(Ink.bindEvent(this._onScroll,this),this._options.delay),"ontouchmove"in document.documentElement&&this._options.touchEvents&&e.observe(document.documentElement,"touchmove",this._onScrollThrottled),e.observe(this._options.scrollElement,"scroll",this._onScrollThrottled),this._hasEvents=!0)},_removeEvents:function(){"ontouchmove"in document.documentElement&&this._options.touchEvents&&e.stopObserving(document.documentElement,"touchmove",this._onScrollThrottled),e.stopObserving(this._options.scrollElement,"scroll",this._onScrollThrottled),this._hasEvents=!1},_onScroll:function(){for(var t,e=0;e<this._aData.length;e++)t=this._aData[e],n.inViewport(t.elm,{partial:!0,margin:this._options.delta})&&(this._elInViewport(t),this._aData.splice(e,1),e-=1);0===this._aData.length&&this._removeEvents()},_elInViewport:function(t){this._userCallback("onInsideViewport",{element:t.elm}),this._options.image&&(t.elm.setAttribute(this._options.destination,t.original),this._options.loadedClass&&i.addClassName(t.elm,this._options.loadedClass),t.elm.removeAttribute(this._options.source)),this._userCallback("onAfterAttributeChange",{element:t.elm})},_userCallback:function(t){"function"==typeof this._options[t]&&this._options[t].apply(this,[].slice.call(arguments,1))},reload:function(){this._activate()},destroy:function(){this._hasEvents&&this._removeEvents(),t.destroyComponent.call(this)}},t.createUIComponent(o),o}),Ink.createModule("Ink.UI.Modal","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1"],function(t,e,n,i,o,r){"use strict";function s(){t.BaseUIComponent.apply(this,arguments)}var a=function(t){return t.style.opacity="invalid","invalid"!==t.style.opacity}(i.create("div",{style:"opacity: 1"})),l=function(t){var e=parseInt(window.innerHeight/2,10),n=parseInt((window.getComputedStyle?getComputedStyle(t,null):t.currentStyle).height,10),i=parseInt(window.innerWidth/2,10),o=parseInt((window.getComputedStyle?getComputedStyle(t,null):t.currentStyle).width,10);return n===e&&o===i}(i.create("div",{style:"height:50vh;width:50vw"})),h=function(t){return""!==t.style.display}(i.create("div",{style:"display: flex"})),u=function(t){t=t.replace(/^\s+|\s+$/g,"");var e=t.indexOf("%")!==-1,n=t.indexOf("px")!==-1;return e||n?!e&&n?t:!n&&e?t:t+"px":t+"%"},c=function(t,e){for(var n,i=t.split(/\s+/g),o=0;o<i.length;o++){var r=i[o].split("-"),s=r[0].replace(/^\s+|\s+$/g,"");if(s===e)return u(r[1]);"all"===s&&(n=u(r[1]))}return n},d=[];return s._name="Modal_1",s._optionDefinition={width:["String","90%"],height:["String","90%"],shadeClass:["String",void 0],modalClass:["String",void 0],trigger:["String",void 0],triggerEvent:["String","click"],autoDisplay:["Boolean",!0],markup:["String",void 0],onShow:["Function",void 0],onDismiss:["Function",void 0],closeOnClick:["Boolean",!1],closeOnEscape:["Boolean",!0],responsive:["Boolean",!0]},s.prototype={_init:function(){if(this._handlers={click:Ink.bindEvent(this._onShadeClick,this),keyDown:Ink.bindEvent(this._onKeyDown,this),resize:null},this._dimensionIsVariant={width:(""+this._options.width).indexOf(" ")!==-1,height:(""+this._options.height).indexOf(" ")!==-1},this._isOpen=!1,this._element?this._markupMode=n.hasClassName(this._element,"ink-modal"):this._markupMode=!1,this._markupMode){if(this._modalDiv=this._element,this._modalShadow=this._modalDiv.parentNode,this._contentContainer=o.select(".modal-body",this._modalDiv)[0],!this._contentContainer)throw new Error('Ink.UI.Modal: Missing div with class "modal-body"');this._options.markup=this._contentContainer.innerHTML}else this._modalShadow=i.create("div",{className:"ink-shade"}),this._modalDiv=i.create("div",{className:"ink-modal ink-space"}),this._element&&(this._options.markup=this._element.innerHTML),this._modalShadow.appendChild(this._modalDiv),document.body.appendChild(this._modalShadow);if(this._markupMode||this.setContentMarkup(this._options.markup),"string"==typeof this._options.shadeClass&&n.addClassName(this._modalShadow,this._options.shadeClass),"string"==typeof this._options.modalClass&&n.addClassName(this._modalDiv,this._options.modalClass),this._options.trigger){var r=t.elsOrSelector(this._options.trigger,"");e.observeMulti(r,this._options.triggerEvent,Ink.bindEvent(this.open,this))}else this._options.autoDisplay&&this.open()},_dimensionIsPercentage:function(){var t=this._getDimensions();return{width:(""+t.width).indexOf("%")!==-1,height:(""+t.height).indexOf("%")!==-1}},_getDimensions:function(e){e=e||{};var n,o={width:this._options.width,height:this._options.height};if((this._dimensionIsVariant.width||this._dimensionIsVariant.height)&&(n=t.currentLayout()),this._dimensionIsVariant.width&&(o.width=c(o.width,n)),this._dimensionIsVariant.height&&(o.height=c(o.height,n)),e.dynamic){var r=this._dimensionIsPercentage();if(!r.width){var s=.9*i.viewportWidth();parseFloat(o.width)>=s&&(o.width=s+"px")}if(!r.height){var a=.9*i.viewportHeight();parseFloat(o.height)>=a&&(o.height=a+"px")}}return o},_reposition:function(){var t,e=this._dimensionIsPercentage(),n=this._getDimensions();l&&e.height?this._modalDiv.style.marginTop=-parseFloat(n.height)/2+"vh":l?(t=parseFloat(n.height)>.9*i.viewportHeight(),t===this._heightWasLargerThan90Percent&&t&&!this._dimensionIsVariant.height||(this._heightWasLargerThan90Percent=t,t?(this._modalDiv.style.marginTop="0",this._modalDiv.style.top="5vh"):(this._modalDiv.style.marginTop=-parseFloat(n.height)/2+"px",this._modalDiv.style.top=""))):this._modalDiv.style.marginTop=-i.elementHeight(this._modalDiv)/2+"px",l&&e.width?this._modalDiv.style.marginLeft=-parseFloat(n.width)/2+"vw":l?(t=parseFloat(n.width)>.9*i.viewportWidth(),t===this._widthWasLargerThan90Percent&&t&&!this._dimensionIsVariant.width||(this._widthWasLargerThan90Percent=t,t?(this._modalDiv.style.marginLeft="0",this._modalDiv.style.left="5vw"):(this._modalDiv.style.marginLeft=-parseFloat(n.width)/2+"px",this._modalDiv.style.left=""))):this._modalDiv.style.marginLeft=-i.elementWidth(this._modalDiv)/2+"px"},_onResize:function(){var t=this._dimensionIsVariant.height||this._dimensionIsVariant.width,e=this._dimensionIsPercentage(),n=!e.height||!e.width;t&&this._resize(),l&&!t||this._avoidModalLargerThanScreen(),(!l||n||t)&&this._reposition(),h||this._resizeContainer()},_onShadeClick:function(t){if(this._isOpen){var r=e.element(t);if(r===this._modalShadow&&this._options.closeOnClick)this.dismiss();else if(n.hasClassName(r,"ink-close")||n.hasClassName(r,"ink-dismiss")||i.findUpwardsBySelector(r,".ink-close,.ink-dismiss")||this._options.closeOnClick&&(!i.descendantOf(this._shadeElement,r)||r===this._shadeElement)){for(var s=o.select(".ink-alert",this._shadeElement),a=s.length,l=0;l<a;l++)if(i.descendantOf(s[l],r))return;this.dismiss(),this._isOpen||e.stop(t)}}},_onKeyDown:function(t){27===t.keyCode&&this._isOpen&&this._options.closeOnEscape&&d[d.length-1]===this&&(this.dismiss(),this._isOpen||e.stopDefault(t))},_resize:function(){var t=this._getDimensions();this._modalDiv.style.width=t.width,this._modalDiv.style.height=t.height},_resizeContainer:function(){var t=i.elementHeight(this._modalDiv);this._modalHeader=o.select(".modal-header",this._modalDiv)[0],this._modalHeader&&(t-=i.elementHeight(this._modalHeader)),this._modalFooter=o.select(".modal-footer",this._modalDiv)[0],this._modalFooter&&(t-=i.elementHeight(this._modalFooter)),this._contentContainer.style.height=t+"px",this._markupMode},_resizeContainerFlex:function(){this._contentContainer.style.flex="1",this._modalDiv.style.display="flex",this._modalDiv.style.flexDirection="column"},_avoidModalLargerThanScreen:function(){var t=this._dimensionIsPercentage();if(l)t.width||(this._modalDiv.style.maxWidth="90vw"),t.height||(this._modalDiv.style.maxHeight="90vh");else{var e={height:i.viewportHeight(),width:i.viewportWidth()},n=this._getDimensions();r.forEach(["height","width"],Ink.bind(function(i){if(!t[i]){var o=Math.round(.9*e[i]);if(parseFloat(n[i])>o)this._modalDiv.style[i]=o+"px";else{if(isNaN(parseFloat(n[i])))return;this._modalDiv.style[i]=parseFloat(n[i])+"px"}}},this))}},open:function(t){if(this.isOpen())return!1;if(t&&e.stopDefault(t),n.addClassName(this._modalShadow,"ink-shade"),this._modalShadow.style.display=this._modalDiv.style.display="block",this._modalShadow.offsetHeight,n.addClassName(this._modalShadow,"visible"),n.addClassName(this._modalDiv,"visible"),this._contentElement=this._modalDiv,this._shadeElement=this._modalShadow,this._markupMode||this.setContentMarkup(this._options.markup),this._resize(),this._avoidModalLargerThanScreen(),this._reposition(),h?this._resizeContainerFlex():this._resizeContainer(),this._options.responsive){var o=this._dimensionIsPercentage(),r=!(l&&h&&o.height&&o.width&&!this._dimensionIsVariant.height&&!this._dimensionIsVariant.width);r&&(this._handlers.resize=e.throttle(Ink.bind(this._onResize,this),500),e.observe(window,"resize",this._handlers.resize))}if(this._options.onShow){if(t)var s=i.findUpwardsBySelector(e.element(t),this._options.trigger);this._options.onShow.call(this,this,{trigger:s})}e.observe(this._shadeElement,"click",this._handlers.click),this._options.closeOnEscape&&e.observe(document,"keydown",this._handlers.keyDown),this._isOpen=!0,d.push(this),n.addClassName(document.documentElement,"ink-modal-open")},isOpen:function(){return this._isOpen},dismiss:function(){if(this._isOpen){if(this._options.onDismiss){var t=this._options.onDismiss(this);if(t===!1)return}if(this._isOpen=!1,this._handlers.resize&&e.stopObserving(window,"resize",this._handlers.resize),this._markupMode?(n.removeClassName(this._modalDiv,"visible"),n.removeClassName(this._modalShadow,"visible"),this._waitForFade(this._modalShadow,Ink.bind(function(){this._modalShadow.style.display="none"},this))):(this._modalShadow.parentNode.removeChild(this._modalShadow),this.destroy()),d=r.remove(d,r.keyValue(this,d),1),0===d.length){var i=document.documentElement;n.removeClassName(i,"ink-modal-open")}}},_waitForFade:function(t,e){if(!a)return e();var i=5,o=function(){+n.getStyle(t,"opacity")>0&&i>0?(i--,setTimeout(o,250)):e()};setTimeout(o,500)},destroy:function(){t.unregisterInstance(this._instanceId)},getContentElement:function(){return this._contentContainer||null},getModalElement:function(){return this._modalDiv||null},getShadeElement:function(){return this._modalShadow||null},setContentMarkup:function(t){if(this._markupMode)this._contentContainer.innerHTML=t;else{if(this._modalDiv.innerHTML=[t].join(""),this._contentContainer=o.select(".modal-body",this._modalDiv),!this._contentContainer.length){var e=o.select(".modal-header",this._modalDiv),s=o.select(".modal-footer",this._modalDiv);r.each(e,i.remove),r.each(s,i.remove);var a=document.createElement("div");n.addClassName(a,"modal-body"),a.innerHTML=this._modalDiv.innerHTML,this._modalDiv.innerHTML="";var l=e.concat([a]).concat(s);r.each(l,Ink.bindMethod(this._modalDiv,"appendChild")),this._contentContainer=o.select(".modal-body",this._modalDiv)}this._contentContainer=this._contentContainer[0]}this._contentElement=this._modalDiv,this._resizeContainer()}},t.createUIComponent(s,{elementIsOptional:!0}),s._vhVwSupported=l,s._flexSupported=h,s}),Ink.createModule("Ink.UI.Pagination","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1"],function(t,e,n,i,o){"use strict";function r(){t.BaseUIComponent.apply(this,arguments)}var s=function(t,e,n){var i=document.createElement("a");if(i.setAttribute("href","#"),"number"==typeof e&&i.setAttribute("data-index",e),n&&n.wrapText){var o=document.createElement("span");i.appendChild(o),o.innerHTML=t}else i.innerHTML=t;return i};return r._name="Pagination_1",r._optionDefinition={size:["Integer",null],totalItemCount:["Integer",null],itemsPerPage:["Integer",null],maxSize:["Integer",null],start:["Integer",1],sideButtons:["Boolean",1],firstLabel:["String","First"],lastLabel:["String","Last"],previousLabel:["String","Previous"],nextLabel:["String","Next"],previousPageLabel:["String",null],nextPageLabel:["String",null],onChange:["Function",void 0],hashParameter:["String","page"],parentTag:["String","ul"],childTag:["String","li"],wrapperClass:["String","ink-navigation"],paginationClass:["String","pagination"],activeClass:["String","active"],disabledClass:["String","disabled"],hideClass:["String","hide-all"],previousClass:["String","previous"],previousPageClass:["String","previousPage"],nextClass:["String","next"],nextPageClass:["String","nextPage"],firstClass:["String","first"],lastClass:["String","last"],numberFormatter:["Function",function(t){return t+1}],autoWrap:["Boolean",!1]},r.prototype={_init:function(){this._options.previousPageLabel||(this._options.previousPageLabel=this._options.previousLabel+" "+this._options.maxSize),this._options.nextPageLabel||(this._options.nextPageLabel=this._options.nextLabel+" "+this._options.maxSize),this._handlers={click:Ink.bindEvent(this._onClick,this)},t.isInteger(this._options.totalItemCount)&&t.isInteger(this._options.itemsPerPage)?this._size=this._calculateSize(this._options.totalItemCount,this._options.itemsPerPage):t.isInteger(this._options.size)?this._size=this._options.size:(Ink.error("Ink.UI.Pagination: Please supply a size option or totalItemCount and itemsPerPage options."),this._size=0),this._current=this._options.start-1,this._itemLiEls=[],this._generateMarkup(this._element),this._updateItems(),this._observe()},_observe:function(){e.observeDelegated(this._element,"click","."+this._options.paginationClass+" > "+this._options.childTag,this._handlers.click)},_calculateSize:function(t,e){return Math.ceil(t/e)},_updateItems:function(){var t,e,i,o=this._itemLiEls,r=this._size===o.length;if(r)for(t=0,e=this._size;t<e;++t)n.setClassName(o[t],this._options.activeClass,t===this._current);else{for(t=o.length-1;t>=0;--t)this._ulEl.removeChild(o[t]);for(o=[],t=0,e=this._size;t<e;++t)i=document.createElement(this._options.childTag),i.appendChild(s(this._options.numberFormatter(t,this._size),t)),n.setClassName(i,this._options.activeClass,t===this._current),this._nextEl?this._ulEl.insertBefore(i,this._nextEl):this._ulEl.appendChild(i),o.push(i);this._itemLiEls=o}if(this._options.maxSize){var a=Math.floor(this._current/this._options.maxSize),l=this._options.maxSize*a,h=l+this._options.maxSize-1;for(t=0,e=this._size;t<e;++t)i=o[t],n.setClassName(i,this._options.hideClass,t<l||t>h);this._pageStart=l,this._pageEnd=h,this._page=a,n.setClassName(this._prevPageEl,this._options.disabledClass,!this.hasPreviousPage()),n.setClassName(this._nextPageEl,this._options.disabledClass,!this.hasNextPage()),n.setClassName(this._firstEl,this._options.disabledClass,this.isFirst()),n.setClassName(this._lastEl,this._options.disabledClass,this.isLast())}this._prevEl&&!this._options.autoWrap&&n.setClassName(this._prevEl,this._options.disabledClass,!this.hasPrevious()),this._nextEl&&!this._options.autoWrap&&n.setClassName(this._nextEl,this._options.disabledClass,!this.hasNext())},_generateMarkup:function(t){n.addClassName(t,"ink-navigation");var e=Ink.s("."+this._options.paginationClass,t),i=!1;e?i=!0:(e=document.createElement(this._options.parentTag),n.addClassName(e,this._options.paginationClass));var o=n.hasClassName(e,"chevron"),r=n.hasClassName(e,"dotted"),a=Ink.bind(function(t,i){var o=document.createElement(this._options.childTag),r=s(this._options[t+"Label"],void 0,{wrapText:i&&i.wrapText});return n.addClassName(o,this._options[t+"Class"]),o.appendChild(r),e.appendChild(o),o},this);!r&&this._options.maxSize&&(this._firstEl=a("first"),this._prevPageEl=a("previousPage"));var l=r&&o||r&&!o&&this._options.sideButtons===!0||!r&&!!this._options.sideButtons;l&&(this._prevEl=a("previous",{wrapText:o}),this._nextEl=a("next",{wrapText:o})),!r&&this._options.maxSize&&(this._nextPageEl=a("nextPage"),this._lastEl=a("last")),i||t.appendChild(e),this._ulEl=e},_onClick:function(t){e.stopDefault(t);var i=e.element(t);if(!n.hasClassName(i,this._options.activeClass)&&!n.hasClassName(i,this._options.disabledClass)){var r=n.hasClassName(i,this._options.previousClass),s=n.hasClassName(i,this._options.nextClass),a=n.hasClassName(i,this._options.previousPageClass),l=n.hasClassName(i,this._options.nextPageClass),h=n.hasClassName(i,this._options.firstClass),u=n.hasClassName(i,this._options.lastClass);if(h)this.setCurrent(0);else if(u)this.setCurrent(this._size-1);else if(a||l)this.setCurrent((a?-1:1)*this._options.maxSize,!0,!!this._options.autoWrap);else if(r||s)this.setCurrent(r?-1:1,!0,!!this._options.autoWrap);else{var c=o.select("[data-index]",i)[0],d=c&&parseInt(c.getAttribute("data-index"),10);this.setCurrent(d)}}},setOnChange:function(t){if(t&&"function"!=typeof t)throw new TypeError("onChange option must be a function!");this._options.onChange=t},setSize:function(e){if(!t.isInteger(e))throw new TypeError("1st argument must be an integer number!");this._size=e,this._updateItems(),
this._current=0},setSizeInItems:function(t,e){var n=Math.ceil(t/e);this.setSize(n)},setCurrent:function(e,n,i){if(!t.isInteger(e))throw new TypeError("1st argument must be an integer number!");n&&(e+=this._current),i?(e%=this._size,e<0&&(e+=this._size)):(e>this._size-1&&(e=this._size-1),e<0&&(e=0)),this._current=e,this._updateItems(),this._options.onChange&&this._options.onChange(this,e)},next:function(t){this.setCurrent(1,!0,t)},previous:function(t){this.setCurrent(-1,!0,t)},getSize:function(){return this._size},getCurrent:function(){return this._current},isFirst:function(){return 0===this._current},isLast:function(){return this._current===this._size-1},hasPrevious:function(){return this._current>0},hasNext:function(){return this._current<this._size-1},hasPreviousPage:function(){return this._options.maxSize&&this._current>this._options.maxSize-1},hasNextPage:function(){return this._options.maxSize&&this._size-this._current>=this._options.maxSize+1},destroy:t.destroyComponent},t.createUIComponent(r),r}),Ink.createModule("Ink.UI.ProgressBar","1",["Ink.UI.Common_1","Ink.Dom.Selector_1"],function(t,e){"use strict";function n(){t.BaseUIComponent.apply(this,arguments)}return n._name="ProgressBar_1",n._optionDefinition={startValue:["Number",0],onStart:["Function",function(){}],onEnd:["Function",function(){}]},n.prototype={_init:function(){if(this._value=this._options.startValue,this._elementBar=e.select(".bar",this._element),this._elementBar.length<1)throw new Error("[Ink.UI.ProgressBar] :: Bar element not found");this._elementBar=this._elementBar[0],this.setValue(this._options.startValue)},setValue:function(t){this._options.onStart.call(this,this._value),t=parseInt(t,10),isNaN(t)||t<0?t=0:t>100&&(t=100),this._value=t,this._elementBar.style.width=this._value+"%",this._options.onEnd.call(this,this._value)}},t.createUIComponent(n),n}),Ink.createModule("Ink.UI.SmoothScroller","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Dom.Css_1"],function(t,e,n,i,o){"use strict";var r=window.requestAnimationFrame||function(t){return setTimeout(t,10)},s=window.cancelAnimationFrame||function(t){clearTimeout(t)},a={speed:10,changeHash:!0,margin:0,scroll:function(t,e){var i=Math.round(n.scrollHeight()),o=Math.round(t-(e.margin||0));i+=o>i?Math.ceil((o-i)/e.speed):(o-i)/e.speed,s(a.interval),i!==o&&a.offsetTop!==i?a.interval=r(Ink.bindMethod(a,"scroll",t,e),document.body):a.onDone(e),window.scrollTo(0,i),a.offsetTop=i},init:function(t){e.on(document,"click",t||"a.scrollableLink, a.ink-smooth-scroll",a.onClick)},render:function(){},onClick:function(e){var i=e.currentTarget,r=(location+"").replace(/#.*?$/,""),s=(i.href+"").replace(/#.*?$/,"");if(s===r){var l=i.getAttribute("data-hash")||(i.getAttribute("href")||"").replace(/^.*?#/,"");if(l){e.preventDefault();var h='a[name="'+l+'"],#'+l,u=Ink.s(h),c=n.findUpwardsBySelector(i,"ul");if(c){var d=Ink.s("li.active",c);o.removeClassName(d,"active")}if(u){i.parentNode&&"li"===i.parentNode.tagName.toLowerCase()&&o.addClassName(i.parentNode,"active");var p=t.options("SmoothScroller link options",{margin:["Number",a.margin],speed:["Number",a.speed],changeHash:["Boolean",a.changeHash]},{},i);a.hash=l,a.scroll(n.offsetTop(u),p)}}}},onDone:function(t){t.changeHash===!0&&(window.location.hash=a.hash),a.hash=a.offsetTop=null}};return a}),Ink.createModule("Ink.UI.SortableList","1",["Ink.UI.Common_1","Ink.Dom.Css_1","Ink.Dom.Event_1","Ink.Dom.Element_1","Ink.Dom.Selector_1"],function(t,e,n,i,o){"use strict";function r(){t.BaseUIComponent.apply(this,arguments)}var s="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0;return r._name="SortableList_1",r._optionDefinition={placeholderClass:["String","placeholder"],draggedClass:["String","hide-all"],draggingClass:["String","dragging"],dragSelector:["String","> li"],handleSelector:["String",":not(button, button *, a[href], a[href] *)"],moveSelector:["String",!1],swap:["Boolean",!1],cancelMouseOut:["Boolean",!1],onDrop:["Function",function(){}]},r.prototype={_init:function(){this._handlers={down:Ink.bind(this._onDown,this),move:Ink.bind(this._onMove,this),up:Ink.bind(this._onUp,this)},this._isMoving=!1,this._down=s?"touchstart mousedown":"mousedown",this._move=s?"touchmove mousemove":"mousemove",this._up=s?"touchend mouseup":"mouseup",this._observe()},_observe:function(){n.on(this._element,this._down,this._options.dragSelector,this._handlers.down),n.on(this._element,this._move,this._options.dragSelector,this._handlers.move),this._options.cancelMouseOut&&n.on(this._element,"mouseleave",Ink.bind(this.stopMoving,this)),n.on(document.documentElement,this._up,this._handlers.up)},_onDown:function(t){if(!this._isMoving&&!this._placeholder){var e=t.currentTarget;if(this._options.handleSelector&&Ink.s(this._options.handleSelector,this._currentTarget)){var n=i.findUpwardsBySelector(t.target,this._options.handleSelector);if(!n||!i.isAncestorOf(e,n)&&e!==n)return}return this._isMoving=e,this._placeholder=e.cloneNode(!0),this._movePlaceholder(e),this._addMovingClasses(),!1}},_onMove:function(t){var e=t.currentTarget;if("touchmove"===t.type){var n=t.touches[0];e=document.elementFromPoint(n.clientX,n.clientY),e=i.findUpwardsBySelector(e,this._options.dragSelector)}this.validateMove(e),t.preventDefault()},_onUp:function(t){if(this._isMoving&&this._placeholder&&t.currentTarget!==this._isMoving&&t.currentTarget!==this._placeholder)return i.insertBefore(this._isMoving,this._placeholder),this.stopMoving(),this._options.onDrop.call(this,{droppedElement:t.currentTarget}),!1},_addMovingClasses:function(){e.addClassName(this._placeholder,this._options.placeholderClass),e.addClassName(this._isMoving,this._options.draggedClass),e.addClassName(document.documentElement,this._options.draggingClass)},_removeMovingClasses:function(){this._isMoving&&e.removeClassName(this._isMoving,this._options.draggedClass),this._placeholder&&e.removeClassName(this._placeholder,this._options.placeholderClass),e.removeClassName(document.documentElement,this._options.draggingClass)},_movePlaceholder:function(t){var e,n,o,r,s=this._placeholder;s?this._options.swap?(i.insertAfter(s,t),i.insertBefore(t,this._isMoving),i.insertBefore(this._isMoving,s)):(e=i.offset(t),n=i.offset(this._placeholder),o=e[1]>n[1],r=e[0]>n[0],o&&r||!o&&!r?i.insertBefore(s,t):i.insertAfter(s,t),i.insertBefore(this._isMoving,s)):i.insertAfter(s,t)},destroy:t.destroyComponent,stopMoving:function(){this._removeMovingClasses(),i.remove(this._placeholder),this._placeholder=!1,this._isMoving=!1},validateMove:function(t){t&&this._isMoving&&this._placeholder&&t!==this._placeholder&&t!==this._isMoving&&(!this._options.moveSelector||o.matchesSelector(t,this._options.moveSelector)?this._movePlaceholder(t):this.stopMoving())}},t.createUIComponent(r),r}),Ink.createModule("Ink.UI.Spy","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1"],function(t,e,n,i,o){"use strict";function r(t){for(var e=0,n=d.length;e<n;e++)if(d[e][0]===t)return e;return null}function s(t,e,n){var i=r(e);null===i?d.push([e,[t],n]):d[i][1].push(t)}function a(){p||(p=!0,e.observe(document,"scroll",e.throttle(l,300)))}function l(){for(var t=0,e=d.length;t<e;t++)h(d[t][0],d[t][1],d[t][2])}function h(t,e,r){for(var s=u(e,r),a=o.select("li.active",t),l=0,h=a.length;l<h;l++)n.removeClassName(a[l],"active");if(null!==s){var c='a[href$="#'+(s.name||s.id)+'"]',d=o.select(c,t);for(l=0,h=d.length;l<h;l++)n.addClassName(i.findUpwardsByTag(d[l],"li"),"active")}}function u(t,e){for(var n,i,o=-(1/0),r=0,s=t.length;r<s;r++)i=t[r].getBoundingClientRect().top,e.margin&&(i-=e.margin),i<=0&&i>o&&(o=i,n=r);return void 0===n?null:t[n]}function c(){t.BaseUIComponent.apply(this,arguments)}var d=[],p=!1;return c._name="Spy_1",c._optionDefinition={target:["Element",void 0],margin:["Number",0]},c.prototype={_init:function(){s(this._element,this._options.target,this._options),a(),l()}},t.createUIComponent(c),c}),Ink.createModule("Ink.UI.Stacker",1,["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Element_1"],function(t,e,n){"use strict";function i(){t.BaseUIComponent.apply(this,arguments)}return i._name="Stacker_1",i._optionDefinition={column:["String",".stacker-column"],item:["String",".stacker-item"],customBreakPoints:["Object",null],largeMax:["Number",Number.MAX_VALUE],largeMin:["Number",961],mediumMax:["Number",960],mediumMin:["Number",651],smallMax:["Number",650],smallMin:["Number",0],largeCols:["Integer",3],mediumCols:["Integer",2],smallCols:["Integer",1],isOrdered:["Boolean",!0],onRunCallback:["Function",null],onResizeCallback:["Function",null],onAPIReloadCallback:["Function",null]},i.prototype={_init:function(){this._aList=[],this._curLayout="large",this._runFirstTime=!1,this._getPageItemsToList(),!this._canApplyLayoutChange()&&this._runFirstTime||(this._runFirstTime=!0,this._applyLayoutChange(),"function"==typeof this._options.onRunCallback&&this._options.onRunCallback(this._curLayout)),this._addEvents()},addItem:function(t){this._aList.push(t)},reloadItems:function(){this._applyLayoutChange(),"function"==typeof this._options.onAPIReloadCallback&&this._options.onAPIReloadCallback(this._curLayout)},_addEvents:function(){e.observe(window,"resize",Ink.bindEvent(this._onResize,this))},_onResize:function(){this._canApplyLayoutChange()&&(this._removeDomItems(),this._applyLayoutChange(),"function"==typeof this._options.onResizeCallback&&this._options.onResizeCallback(this._curLayout))},_setCurLayout:function(){var t=n.viewportWidth();if(this._options.customBreakpoints&&"object"==typeof this._options.customBreakPoints){for(var e in this._options.customBreakPoints)if(this._options.customBreakPoints.hasOwnProperty(e)&&t>=Number(this._options.customBreakPoints[e].min)&&t<=Number(this._options.customBreakPoints[e].max)&&this._curLayout!==e)return void(this._curLayout=e)}else t<=Number(this._options.largeMax)&&t>=Number(this._options.largeMin)&&"large"!==this._curLayout?this._curLayout="large":t>=Number(this._options.mediumMin)&&t<=Number(this._options.mediumMax)&&"medium"!==this._curLayout?this._curLayout="medium":t>=Number(this._options.smallMin)&&t<=Number(this._options.smallMax)&&"small"!==this._curLayout&&(this._curLayout="small")},_getColumnsToShow:function(){return this._options.customBreakPoints&&"object"==typeof this._options.customBreakPoints?Number(this._options.customBreakPoints[this._curLayout].cols):Number(this._options[this._curLayout+"Cols"])},_canApplyLayoutChange:function(){var t=this._curLayout;return this._setCurLayout(),t!==this._curLayout},_getPageItemsToList:function(){this._aColumn=Ink.ss(this._options.column,this._element);var t=this._aColumn.length,e=0;if(t>0){for(var n=0;n<this._aColumn.length;n++)for(var i=Ink.ss(this._options.item,this._aColumn[n]),o=0;o<i.length;o++)this._options.isOrdered&&(e=n+o*t),this._aList[e]=i[o],this._options.isOrdered||e++,i[o].parentNode.removeChild(i[o]);if(this._aList.length>0&&this._options.isOrdered){for(var r=[],s=0;s<this._aList.length;s++)"undefined"!=typeof this._aList[s]&&r.push(this._aList[s]);this._aList=r}}},_removeDomItems:function(){var t=this._aColumn.length;if(t>0)for(var e=0;e<t;e++)for(var n=Ink.ss(this._options.item,this._aColumn[e]),i=n.length-1;i>=0;i--)n[i].parentNode.removeChild(n[i])},_applyLayoutChange:function(){var t=this._getColumnsToShow(),e=this._aList.length,n=0,i=0;if(t>0)for(;i<t;){if(this._aColumn[i].appendChild(this._aList[n]),n++,i++,n===e)return;i===t&&(i=0)}}},t.createUIComponent(i),i}),Ink.createModule("Ink.UI.Sticky","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Element_1","Ink.Dom.Css_1"],function(t,e,n,i){"use strict";function o(){t.BaseUIComponent.apply(this,arguments)}return o._name="Sticky_1",o._optionDefinition={offsetBottom:["Integer",0],offsetTop:["Integer",0],topElement:["Element",null],wrapperClass:["String","ink-sticky-wrapper"],stickyClass:["String","ink-sticky-stuck"],inlineDimensions:["Boolean",!0],inlinePosition:["Boolean",!0],bottomElement:["Element",null],activateInLayouts:["String",null]},o.prototype={_init:function(){this._options.activateInLayouts&&(this._options.activateInLayouts=this._options.activateInLayouts.toString()),this._dims=null,this._options.offsetTop=parseInt(this._options.offsetTop,10)||0,this._options.offsetBottom=parseInt(this._options.offsetBottom,10)||0,this._options.topElement&&(this._options.topElement=t.elOrSelector(this._options.topElement,"Top Element")),this._options.bottomElement&&(this._options.bottomElement=t.elOrSelector(this._options.bottomElement,"Sticky bottom Element")),this._wrapper=n.create("div",{className:this._options.wrapperClass}),n.wrap(this._element,this._wrapper);var i=document.addEventListener?document:window;this._onScroll=Ink.bind(e.throttle(this._onScroll,33),this),e.observe(i,"scroll",this._onScroll),e.observe(window,"resize",Ink.bindEvent(e.throttle(this._onResize,100),this)),this._onScroll()},_isDisabledInLayout:function(){if(!this._options.activateInLayouts)return!1;var e=t.currentLayout();return!!e&&this._options.activateInLayouts.indexOf(e)===-1},_onScroll:function(){var t=this._getDims(),e=n.scrollHeight(),i=this._isDisabledInLayout()||e<=t.top-this._options.offsetTop||this._options.topElement&&this._options.topElement.getBoundingClientRect().bottom+this._options.offsetTop>0;if(i)return void this._unstick();var o=this._options.offsetTop+t.height+n.scrollHeight(),r=document.body.scrollHeight;this._options.bottomElement&&(r=this._options.bottomElement.getBoundingClientRect().top+n.scrollHeight()),r-=this._options.offsetBottom,o<r?this._stickTo("screen"):this._stickTo("bottom")},_stickTo:function(t){var e=this._element.style,o=this._getDims();if(i.addClassName(this._element,this._options.stickyClass),this._wrapper.style.height=o.height+"px",this._inlineDimensions(o.height+"px",o.width+"px"),this._options.inlinePosition!==!1)if(e.left=o.left+"px","screen"===t)e.bottom=null,e.top=this._options.offsetTop+"px";else if("bottom"===t){var r=this._getBottomOffset(),s=n.scrollHeight()+n.viewportHeight(),a=n.pageHeight()-s;e.bottom=r-a+"px",e.top="auto"}},_unstick:function(){i.removeClassName(this._element,this._options.stickyClass),this._inlineDimensions(null,null),this._options.inlinePosition&&(this._element.style.left=null,this._element.style.top=null,this._element.style.bottom=null),this._wrapper.style.height=null,this._wrapper.style.width=null,this._dims=null},_onResize:function(){this._dims=null,this._onScroll()},_getDims:function(){if(null!==this._dims)return this._dims;var t=this._element.style,e=t.position,i=t.width;t.position="static",t.width=null;var o=n.outerDimensions(this._element),r=this._wrapper.getBoundingClientRect();return this._dims={height:o[1],width:o[0],left:r.left+n.scrollWidth(),top:r.top+n.scrollHeight()},t.position=e,t.width=i,this._dims},_inlineDimensions:function(t,e){this._options.inlineDimensions&&(this._element.style.height=t,this._element.style.width=e)},_getBottomOffset:function(){var t=this._options.offsetBottom;return this._options.bottomElement&&(t+=n.pageHeight()-n.offsetTop(this._options.bottomElement)),t}},t.createUIComponent(o),o}),Ink.createModule("Ink.UI.Swipe","1",["Ink.Dom.Event_1","Ink.Dom.Element_1","Ink.UI.Common_1"],function(t,e,n){"use strict";function i(){"function"==typeof arguments[1]&&(arguments[1]={onEnd:arguments[1]}),n.BaseUIComponent.apply(this,arguments)}return i._name="Swipe_1",i._optionDefinition={onEnd:["Function",void 0],onStart:["Function",void 0],onMove:["Function",void 0],minDist:["Number",void 0],maxDist:["Number",void 0],minDuration:["Number",void 0],maxDuration:["Number",void 0],axis:["String",void 0],storeGesture:["Boolean",!1],stopEvents:["Boolean",!0]},i.prototype={_supported:"ontouchstart"in document.documentElement,_init:function(){this._handlers={down:Ink.bindEvent(this._onDown,this),move:Ink.bindEvent(this._onMove,this),up:Ink.bindEvent(this._onUp,this)};var e=document.body;t.observe(e,"touchstart",this._handlers.down),(this._options.storeGesture||this._options.onMove)&&t.observe(e,"touchmove",this._handlers.move),t.observe(e,"touchend",this._handlers.up),this._isOn=!1},_isMeOrParent:function(t,e){if(t){do{if(t===e)return!0;t=t.parentNode}while(t);return!1}},_pushGesture:function(t,e){this._options.storeGesture&&(this._gesture.push(t),this._time.push(e))},_onDown:function(e){1===e.changedTouches.length&&this._isMeOrParent(e.target,this._element)&&(this._options.stopEvents===!0&&t.stop(e),e=e.changedTouches[0],this._isOn=!0,this._target=e.target,this._t0=+new Date,this._p0=[e.pageX,e.pageY],this._options.storeGesture&&(this._gesture=[],this._time=[]),this._pushGesture(this._p0,0),this._options.onStart&&this._options.onStart({event:e,element:this._element,instance:this,position:this._p0,dt:0}))},_onMove:function(e){if(this._isOn&&1===e.changedTouches.length){this._options.stopEvents===!0&&t.stop(e),e=e.changedTouches[0];var n=+new Date,i=n-this._t0,o=[e.pageX,e.pageY];this._pushGesture(o,i),this._options.onMove&&this._options.onMove({event:e,element:this._element,instance:this,position:o,dt:i})}},_onUp:function(e){if(this._isOn&&1===e.changedTouches.length){this._options.stopEvents===!0&&t.stop(e),e=e.changedTouches[0],this._isOn=!1;var n=+new Date,i=[e.pageX,e.pageY],o=n-this._t0,r=[i[0]-this._p0[0],i[1]-this._p0[1]],s=Math.sqrt(r[0]*r[0]+r[1]*r[1]),a=Math.abs(r[0])>Math.abs(r[1])?"x":"y",l=this._options;l.minDist&&s<l.minDist||l.maxDist&&s>l.maxDist||l.minDuration&&o<l.minDuration||l.maxDuration&&o>l.maxDuration||l.axis&&a!==l.axis||this._options.onEnd&&this._options.onEnd({event:e,element:this._element,instance:this,gesture:this._gesture,time:this._time,axis:a,overallMovement:r,overallTime:o})}}},n.createUIComponent(i),i}),Ink.createModule("Ink.UI.Table","1",["Ink.Util.Url_1","Ink.UI.Pagination_1","Ink.Net.Ajax_1","Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1","Ink.Util.String_1","Ink.Util.Json_1"],function(t,e,n,i,o,r,s,a,l,h,u){"use strict";function c(t){return!isNaN(t)&&g.test(t)?parseInt(t,10):isNaN(t)?t:parseFloat(t)}function d(t,e){return t===e?0:t>e?1:-1}function p(t,e){var n=c(s.textContent(t)),i=c(s.textContent(e));return typeof n==typeof i?d(n,i):"number"==typeof n?1:-1}function f(t){if("undefined"!=typeof Object.keys)return Object.keys(t);var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}function m(){i.BaseUIComponent.apply(this,arguments)}function _(t){return t}var g=/\d/g;return m._name="Table_1",m._optionDefinition={pageSize:["Integer",null],caretUpClass:["String","fa fa-caret-up"],caretDownClass:["String","fa fa-caret-down"],endpoint:["String",null],createEndpointUrl:["Function",null],createEndpointURL:["Function",null],getDataFromEndPoint:["Function",null],getDataFromEndpoint:["Function",null],processJSONRows:["Function",function(t){return"number"==typeof t.length?t:t.rows||null}],processJSONRow:["Function",_],processJSONField:["Function",_],processJSONHeaders:["Function",function(t){return t.fields}],processJSONTotalRows:["Function",function(t){return t.totalRows||t.length}],getSortKey:["Function",null],pagination:["Element",null],allowResetSorting:["Boolean",!1],visibleFields:["String",null],tdClassNames:["Object",{}],paginationOptions:["Object",null]},m.prototype={_validate:function(){if("table"!==this._element.nodeName.toLowerCase())throw new Error("[Ink.UI.Table] :: The element is not a table")},_init:function(){this._options.createEndpointUrl&&(this._options.createEndpointURL=this._options.createEndpointUrl),this._options.getDataFromEndPoint&&(this._options.getDataFromEndpoint=this._options.getDataFromEndpoint),this._markupMode=!(this._options.endpoint||this._options.createEndpointURL),this._options.visibleFields&&(this._options.visibleFields=this._options.visibleFields.toString().split(/[, ]+/g)),this._thead=this._element.tHead||this._element.createTHead(),this._headers=a.select("th",this._thead),this._handlers={thClick:null},this._originalFields=[],this._sortableFields={},this._originalData=this._data=[],this._pagination=null,this._totalRows=0,this._handlers.thClick=o.on(this._element,"click",'thead th[data-sortable="true"]',Ink.bindMethod(this,"_onThClick")),this._markupMode?(this._resetSortOrder(),this._addHeadersClasses(),this._data=a.select("tbody tr",this._element),this._originalData=this._data.slice(0),this._totalRows=this._data.length,this._setPagination()):this._getData()},_addHeadersClasses:function(){for(var t,e,n=0,i=this._headers.length;n<i;n++)t=s.textContent(this._headers[n]),e=this._options.tdClassNames[t],e&&r.addClassName(this._headers[n],e)},_onThClick:function(t){var e=o.element(t),n=void 0!==this._options.pageSize;o.stopDefault(t);var i=l.keyValue(e,this._headers,!0),r=i!==!1&&void 0!==this._sortableFields[i];if(r)if(!this._markupMode&&n)this._invertSortOrder(i,!1);else{"desc"===this._sortableFields[i]&&this._options.allowResetSorting?(this._setSortOrderOfColumn(i,null),this._data=this._originalData.slice(0)):this._invertSortOrder(i,!0);var s=a.select("tbody",this._element)[0];l.each(this._data,function(t){s.appendChild(t)}),this._pagination&&(this._pagination.setCurrent(0),this._paginate(1))}},_invertSortOrder:function(t,e){for(var n="asc"===this._sortableFields[t],i=0,o=this._headers.length;i<o;i++)this._setSortOrderOfColumn(i,null);this._setSortOrderOfColumn(t,!n),e?(this._sort(t),n&&this._data.reverse()):this._getData()},_setSortOrderOfColumn:function(t,e){var n=this._headers[t],i=[""],o="none";e===!0?(i=['<i class="',this._options.caretUpClass,'"></i>'],o="asc"):e===!1&&(i=['<i class="',this._options.caretDownClass,'"></i>'],o="desc"),this._sortableFields[t]=o,n.innerHTML=s.textContent(n)+i.join("")},_paginate:function(t){if(this._pagination){var e=this._options.pageSize,n=(t-1)*e,i=n+e;l.each(this._data,function(t,e){e>=n&&e<i?r.removeClassName(t,"hide-all"):r.addClassName(t,"hide-all")})}},_registerFieldNames:function(t){this._originalFields=[],l.forEach(t,Ink.bind(function(t){this._fieldIsVisible(t)&&this._originalFields.push(t)},this))},_fieldIsVisible:function(t){return!this._options.visibleFields||this._options.visibleFields.indexOf(t)!==-1},_sort:function(t){function e(e){return i.call(o,{columnIndex:t,columnName:n,data:s.textContent(e),element:e})}var n=s.textContent(this._headers[t]),i=this._options.getSortKey;i&&(i="function"==typeof i[n]?i[n]:"function"==typeof i?i:null);var o=this;this._data.sort(function(n,o){var r=Ink.ss("td",n)[t],s=Ink.ss("td",o)[t];return i?d(e(r),e(s)):p(r,s,t)})},_createHeadersFromJson:function(t){if(this._registerFieldNames(f(t)),!this._thead.children.length)for(var e,n=this._thead.insertRow(0),i=0,o=t.length;i<o;i++)this._fieldIsVisible(t[i])&&(e=s.create("th"),e=this._createSingleHeaderFromJson(t[i],e),n.appendChild(e),this._headers.push(e))},_createSingleHeaderFromJson:function(t,e){return t.sortable&&e.setAttribute("data-sortable","true"),t.label&&s.setTextContent(e,t.label),e},_resetSortOrder:function(){for(var t=0,e=this._headers.length;t<e;t++){var n=s.data(this._headers[t]);n.sortable&&"true"===n.sortable.toString()&&(this._sortableFields[t]="none")}},_createRowsFromJSON:function(t){var e=a.select("tbody",this._element)[0];e?s.setHTML(e,""):(e=document.createElement("tbody"),this._element.appendChild(e)),this._data=[];var n;for(var i in t)t.hasOwnProperty(i)&&(n=this._options.processJSONRow(t[i]),this._createSingleRowFromJson(e,n,i));this._originalData=this._data.slice(0)},_createSingleRowFromJson:function(t,e,n){var i=document.createElement("tr");t.appendChild(i);for(var o in e)e.hasOwnProperty(o)&&this._createFieldFromJson(i,e[o],o,n);this._data.push(i)},_createFieldFromJson:function(t,e,n,i){if(this._fieldIsVisible(n)){var o,s=this._options.processJSONField[n]||this._options.processJSONField;o="function"==typeof s?s(e,n,i):e;var a=this._elOrFieldData(o),l=this._options.tdClassNames[n];l&&r.addClassName(a,l),t.appendChild(a)}},_elOrFieldData:function(t){if(i.isDOMElement(t))return t;var e="string"==typeof t,n="number"==typeof t,o=s.create("td");if(e&&/^\s*?</.test(t))s.setHTML(o,t);else{if(!e&&!n)throw new Error("Ink.UI.Table Unknown result from processJSONField: "+t);s.setTextContent(o,t)}return o},setEndpoint:function(t,e){this._markupMode||(this._options.endpoint=t,this._pagination&&this._pagination.setCurrent(e?parseInt(e,10):0))},_setPagination:function(){if(null!=this._options.pageSize){var t=this._options.pagination;if(t instanceof e)return void(this._pagination=t);t||(t=s.create("nav",{className:"ink-navigation",insertAfter:this._element}),s.create("ul",{className:"pagination",insertBottom:t}));var n=Ink.extendObj({totalItemCount:this._totalRows,itemsPerPage:this._options.pageSize,onChange:Ink.bind(function(t,e){this._paginate(e+1)},this)},this._options.paginationOptions||{});this._pagination=new e(t,n),this._paginate(1)}},_getData:function(){var t=this._getSortOrder()||null,e=null;this._options.pageSize&&(e={size:this._options.pageSize,page:this._pagination?this._pagination.getCurrent()+1:1}),this._getDataViaAjax(this._getUrl(t,e))},_getSortOrder:function(){var t;for(t in this._sortableFields)if(this._sortableFields.hasOwnProperty(t)&&"none"!==this._sortableFields[t])break;return t?{field:this._originalFields[t]||s.textContent(this._headers[t]),order:this._sortableFields[t]}:null},_getUrl:function(e,n){var i=this._options.createEndpointURL||function(e,n,i){return e=t.parseUrl(e),e.query=e.query||{},n&&(e.query.sortOrder=n.order,e.query.sortField=n.field),i&&(e.query.rows_per_page=i.size,e.query.page=i.page),t.format(e)},o=i(this._options.endpoint,e,n);if("string"!=typeof o)throw new TypeError("Ink.UI.Table_1: createEndpointUrl did not return a string!");return o},_getDataViaAjax:function(t){var e=Ink.bind(function(t){this._onAjaxSuccess(t)},this);this._options.getDataFromEndpoint?this._options.getDataFromEndpoint(t,e):new n(t,{method:"GET",contentType:"application/json",sanitizeJSON:!0,onSuccess:Ink.bind(function(t){200===t.status&&e(u.parse(t.responseText))},this)})},_onAjaxSuccess:function(t){var e=null!=this._options.pageSize,n=this._options.processJSONRows(t);if(this._headers=a.select("th",this._thead),0===this._headers.length){var i=this._options.processJSONHeaders(t);if(!i||!i.length||!i[0])throw new Error("Ink.UI.Table: processJSONHeaders option must return an array of objects!");this._createHeadersFromJson(i),this._resetSortOrder(),this._addHeadersClasses()}else this._resetSortOrder();this._createRowsFromJSON(n),this._totalRows=this._rowLength=n.length,e&&(this._totalRows=this._options.processJSONTotalRows(t),this._setPagination())}},i.createUIComponent(m),m}),Ink.createModule("Ink.UI.Tabs","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1"],function(t,e,n,i,o){"use strict";function r(){t.BaseUIComponent.apply(this,arguments)}return r._name="Tabs_1",r._optionDefinition={preventUrlChange:["Boolean",!1],active:["String",void 0],onBeforeChange:["Function",void 0],onChange:["Function",void 0],menuSelector:["String",".tabs-nav"],contentSelector:["String",".tabs-content"],triggerEventsOnLoad:["Boolean",!0]},r.prototype={_init:function(){return this._menu=o.select(this._options.menuSelector,this._element)[0],this._menu?(this._initializeDom(),e.on(this._menu,"click","a",Ink.bindMethod(this,"_onTabClickedGeneric")),void this._setFirstActive()):void Ink.warn('Ink.UI.Tabs: An element selected by "'+this._options.menuSelector+'" needs to exist inside the element!')},_initializeDom:function(){for(var t=o.select(this._options.contentSelector,this._element),e=0;e<t.length;e++)n.addClassName(t[e],"hide-all")},_setFirstActive:function(){var t=window.location.hash,e=this._findLinkByHref(t)||this._options.active&&this._findLinkByHref(this._options.active)||o.select(".active a",this._menu)[0]||o.select("a",this._menu)[0];e&&(this._firstTime=!0,this._changeTab(e,this._options.triggerEventsOnLoad),this._firstTime=!1)},_changeTab:function(t,e){e&&"undefined"!=typeof this._options.onBeforeChange&&this._options.onBeforeChange(this);var i=t.getAttribute("href"),r=i.substr(i.indexOf("#"));window.location.hash===r||this._options.preventUrlChange||this._firstTime||(window.location.hash=r);for(var s=o.select("> li.active",this._menu),a=0,l=s.length;a<l;a++)s[a]!==t&&n.removeClassName(s[a],"active");return this._activeMenuTab&&(n.removeClassName(this._activeMenuTab,"active"),n.removeClassName(this._activeSection,"active"),n.addClassName(this._activeSection,"hide-all")),this._activeMenuLink=t,this._activeMenuTab=this._activeMenuLink.parentNode,this._activeSection=o.select(r,this._element)[0],this._activeSection?(n.addClassName(this._activeMenuTab,"active"),n.addClassName(this._activeSection,"active"),n.removeClassName(this._activeSection,"hide-all"),void(e&&"undefined"!=typeof this._options.onChange&&this._options.onChange(this))):void(this._activeMenuLink=this._activeMenuTab=this._activeSection=null)},_onTabClickedGeneric:function(t){t.preventDefault();var e=!n.hasClassName(t.currentTarget,"ink-disabled")&&t.currentTarget!==this._activeMenuLink;e&&this._onTabClicked(t.currentTarget)},_onTabClicked:function(t){var e=t.getAttribute("href")||"";e=e.substr(e.indexOf("#")),e&&null!==Ink.i(this._dehashify(e))&&t!==this._activeMenuLink&&this.changeTab(t)},_hashify:function(t){return t?0===t.indexOf("#")?t:"#"+t:""},_dehashify:function(t){return t?(""+t).replace(/^#/,""):""},_findLinkByHref:function(t){if(!t)return null;if(1===t.nodeType){if(i.isAncestorOf(t,this._element))return null;for(var e=o.select("a",this._menu),n=t.getAttribute("id"),r=0,s=e.length;r<s;r++){if(e[r]===t||i.isAncestorOf(t,e[r]))return e[r];if(n&&n===this._dehashify(e[r].hash))return e[r]}return null}return t=this._hashify(t),o.select('a[href$="'+t+'"]',this._menu)[0]||null},changeTab:function(t){t=this._findLinkByHref(t),t&&!n.hasClassName(t,"ink-disabled")&&this._changeTab(t,!0)},disable:function(t){n.addClassName(this._findLinkByHref(t),"ink-disabled")},enable:function(t){n.removeClassName(this._findLinkByHref(t),"ink-disabled")},activeTab:function(){return this._activeSection.getAttribute("id")},activeMenuLink:function(){return this._activeMenuLink},activeSection:function(){return this._activeSection},destroy:t.destroyComponent},t.createUIComponent(r),r}),Ink.createModule("Ink.UI.TagField","1",["Ink.Dom.Element_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Browser_1","Ink.UI.Droppable_1","Ink.Util.Array_1","Ink.Dom.Selector_1","Ink.UI.Common_1"],function(t,e,n,i,o,r,s,a){"use strict";function l(){a.BaseUIComponent.apply(this,arguments)}var h=13,u=8,c=function(t){return!!t},d=1==="s,".split(/,/g).length,p=function(){var t,e=String.prototype.split,n=void 0===/()??/.exec("")[1];return t=function(t,i,o){if("[object RegExp]"!==Object.prototype.toString.call(i))return e.call(t,i,o);var r,s,a,l,h=[],u=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.extended?"x":"")+(i.sticky?"y":""),c=0,i=new RegExp(i.source,u+"g");for(t+="",n||(r=new RegExp("^"+i.source+"$(?!\\s)",u)),o=void 0===o?-1>>>0:o>>>0;(s=i.exec(t))&&(a=s.index+s[0].length,!(a>c&&(h.push(t.slice(c,s.index)),!n&&s.length>1&&s[0].replace(r,function(){for(var t=1;t<arguments.length-2;t++)void 0===arguments[t]&&(s[t]=void 0)}),s.length>1&&s.index<t.length&&Array.prototype.push.apply(h,s.slice(1)),l=s[0].length,c=a,h.length>=o)));)i.lastIndex===s.index&&i.lastIndex++;return c===t.length?!l&&i.test("")||h.push(""):h.push(t.slice(c)),h.length>o?h.slice(0,o):h}}();return l._name="TagField_1",l._optionDefinition={tags:["String",[]],allowRepeated:["Boolean",!1],maxTags:["Integer",-1],outSeparator:["String",","],separator:["String",/[,; ]+/g],autoSplit:["Boolean",!0]},l.prototype={_init:function(){var i=this._options;"string"==typeof i.separator&&(i.separator=new RegExp(i.separator,"g")),"string"==typeof i.tags&&(i.tags=this._readInput(i.tags)),n.addClassName(this._element,"hide-all"),this._viewElm=t.create("div",{className:"ink-tagfield",insertAfter:this._element}),this._input=t.create("input",{type:"text",className:"new-tag-input",
insertBottom:this._viewElm});var o=[].concat(i.tags,this._tagsFromMarkup(this._element));this._tags=[],r.each(o,Ink.bindMethod(this,"_addTag")),e.observe(this._input,"keyup",Ink.bindEvent(this._onKeyUp,this)),e.observe(this._input,"change",Ink.bindEvent(this._onKeyUp,this)),e.observe(this._input,"keydown",Ink.bindEvent(this._onKeyDown,this)),e.observe(this._input,"blur",Ink.bindEvent(this._onBlur,this)),e.observe(this._viewElm,"click",Ink.bindEvent(this._refocus,this))},destroy:function(){t.remove(this._viewElm),n.removeClassName(this._element,"hide-all")},_tagsFromMarkup:function(e){var n=e.tagName.toLowerCase();if("input"===n)return this._readInput(e.value);if("select"===n)return r.map(e.getElementsByTagName("option"),function(e){return t.textContent(e)});throw new Error("Cannot read tags from a "+n+" tag. Unknown tag")},_tagsToMarkup:function(e,n){var i=n.tagName.toLowerCase();if("input"===i)this._options.separator&&(n.value=e.join(this._options.outSeparator));else{if("select"!==i)throw new Error("TagField: Cannot read tags from a "+i+" tag. Unknown tag");n.innerHTML="",r.each(e,function(e){var i=t.create("option",{selected:"selected"});t.setTextContent(i,e),n.appendChild(i)})}},_addTag:function(n){if(!(this._options.maxTags!==-1&&this._tags.length>=this._options.maxTags)){if(!this._options.allowRepeated&&r.inArray(n,this._tags,n)||!n)return!1;var i=t.create("span",{className:"ink-tag",setTextContent:n+" "}),o=t.create("span",{className:"remove fa fa-times",insertBottom:i});e.observe(o,"click",Ink.bindEvent(this._removeTag,this,null));var s=document.createTextNode(" ");this._tags.push(n),this._viewElm.insertBefore(i,this._input),this._viewElm.insertBefore(s,this._input),this._tagsToMarkup(this._tags,this._element)}},_readInput:function(t){return this._options.separator?r.filter(t.split(this._options.separator),c):[t]},_onKeyUp:function(){if(this._options.autoSplit){var t;if(t=d?p(this._input.value,this._options.separator):this._input.value.split(this._options.separator),!(t.length<=1)){var e=t[t.length-1];t=t.splice(0,t.length-1),t=r.filter(t,c),r.each(t,Ink.bind(this._addTag,this)),this._input.value=e}}},_onKeyDown:function(t){return t.which===h?this._onEnterKeyDown(t):t.which===u?this._onBackspaceKeyDown():void(this._removeConfirm&&this._unsetRemovingVisual(this._tags.length-1))},_onBackspaceKeyDown:function(){this._input.value||(this._removeConfirm?(this._unsetRemovingVisual(this._tags.length-1),this._removeTag(this._tags.length-1),this._removeConfirm=null):this._setRemovingVisual(this._tags.length-1))},_onEnterKeyDown:function(t){var n=this._input.value;n&&(this._addTag(n),this._input.value=""),e.stopDefault(t)},_onBlur:function(){this._addTag(this._input.value),this._input.value=""},_setRemovingVisual:function(t){var i=this._viewElm.children[t];i&&(n.addClassName(i,"tag-deleting"),this._removeRemovingVisualTimeout=setTimeout(Ink.bindMethod(this,"_unsetRemovingVisual",t),4e3),e.observe(this._input,"blur",Ink.bindMethod(this,"_unsetRemovingVisual",t)),this._removeConfirm=!0)},_unsetRemovingVisual:function(t){var e=this._viewElm.children[t];e&&(n.removeClassName(e,"tag-deleting"),clearTimeout(this._removeRemovingVisualTimeout)),this._removeConfirm=null},_removeTag:function(n){var i;if("object"==typeof n){var o=e.element(n).parentNode;i=t.parentIndexOf(this._viewElm,o)}else"number"==typeof n&&(i=n);this._tags=r.remove(this._tags,i,1),t.remove(this._viewElm.children[i]),this._tagsToMarkup(this._tags,this._element)},_refocus:function(t){return this._input.focus(),e.stop(t),!1}},a.createUIComponent(l),l}),Ink.createModule("Ink.UI.Toggle","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1"],function(t,e,n,i,o,r){"use strict";function s(){t.BaseUIComponent.apply(this,arguments)}return s._name="Toggle_1",s._optionDefinition={target:["Elements"],triggerEvent:["String","click"],closeOnClick:["Boolean",null],canToggleAnAncestor:["Boolean",!1],isAccordion:["Boolean",!1],initialState:["Boolean",null],classNameOn:["String","show-all"],classNameOff:["String","hide-all"],closeOnInsideClick:["String","a[href]"],onChangeState:["Function",null]},s.prototype={_init:function(){var e,o;if(this._targets=t.elsOrSelector(this._options.target),null===this._options.closeOnClick&&(this._options.closeOnClick=!this._options.isAccordion&&!this._options.canToggleAnAncestor),null===this._options.initialState&&(this._options.initialState=n.hasClassName(this._targets[0],this._options.classNameOn)),"show-all"!==this._options.classNameOn||"hide-all"!==this._options.classNameOff)for(e=0,o=this._targets.length;e<o;e++)n.removeClassName(this._targets[e],"show-all"),n.removeClassName(this._targets[e],"hide-all");if(this._options.isAccordion&&(this._accordionContainer=i.findUpwardsByClass(this._element,"accordion"),this._accordionContainer||Ink.warn('Ink.UI.Toggle_1: This toggle has the isAccordion option set to `true`, but is not a descendant of an element with the class "accordion"! Because of this, it won\'t be able to find other toggles in the same accordion and cooperate with them.')),this._constructing=!0,this._bindEvents(),null!==this._options.initialState)this.setState(this._options.initialState,!0);else{var r="none"!==n.getStyle(this._targets[0],"display");this.setState(r,!0)}for(e=0,o=this._targets.length;e<o;e++)this._targets[e].style.display&&(this._targets[e].style.display="");this._element.setAttribute("data-is-toggle-trigger","true"),this._constructing=!1},_bindEvents:function(){if(this._options.triggerEvent&&e.on(this._element,this._options.triggerEvent,Ink.bind(this._onTriggerEvent,this)),this._options.closeOnClick&&e.observe(document,"click",Ink.bind(this._onOutsideClick,this)),this._options.closeOnInsideClick){var t=this._options.closeOnInsideClick;"true"===t.toString()&&(t="*"),e.observeMulti(this._targets,"click",Ink.bind(function(n){i.findUpwardsBySelector(e.element(n),t)&&this.setState(!1,!0)},this))}},_onTriggerEvent:function(t){var n=e.element(t),o=r.some(this._targets,function(t){return t===n||i.isAncestorOf(t,n)});if(this._options.canToggleAnAncestor||!o){var s=this.getState();this.setState(!s,!0),!s&&this._firstTime&&(this._firstTime=!1),e.stopDefault(t)}},_updateAccordion:function(){if(this._accordionContainer&&this.getState()!==!1)for(var t=o.select("[data-is-toggle-trigger]",this._accordionContainer),e=0;e<t.length;e++){var n=s.getInstance(t[e]);n&&n!==this&&n.getState()===!0&&n.setState(!1,!0)}},_onOutsideClick:function(t){var n,o=e.element(t);if(i.isAncestorOf(document.documentElement,o)){var s=r.some(this._targets,function(t){return i.isAncestorOf(t,o)||t===o});if(this._element!==o&&!i.isAncestorOf(this._element,o)&&!s){if((n=Ink.ss(".ink-shade")).length)for(var a=n.length,l=0;l<a;l++)if(i.isAncestorOf(n[l],o)&&i.isAncestorOf(n[l],this._element))return;this.setState(!1,!0)}}},setState:function(t,e){if(t!==this.getState()||this._constructing){var i,o;if(this._group&&t)for(i=0,o=this._group.length;i<o;i++)this._group[i].getState()===!0&&this._group[i].setState(!1,!0);if(e&&"function"==typeof this._options.onChangeState){var r=this._options.onChangeState.call(this,t,{element:this._element});if(r===!1)return!1}for(i=0,o=this._targets.length;i<o;i++)n.addRemoveClassName(this._targets[i],this._options.classNameOn,t),n.addRemoveClassName(this._targets[i],this._options.classNameOff,!t);n.addRemoveClassName(this._element,"active",t),this._accordionContainer&&this._updateAccordion()}},getState:function(){return n.hasClassName(this._element,"active")}},t.createUIComponent(s),s}),Ink.createModule("Ink.UI.Tooltip","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1","Ink.Dom.Css_1","Ink.Dom.Browser_1"],function(t,e,n,i,o,r){"use strict";function s(t,e){this._init(t,e||{})}function a(t,e){this._init(t,e)}var l,h,u;!function(){for(var t=document.createElement("DIV"),e=["transition","oTransition","msTransition","mozTransition","webkitTransition"],n=0;n<e.length;n++)if("undefined"!=typeof t.style[e[n]+"Duration"]){l=e[n]+"Duration",h=e[n]+"Property",u=e[n]+"TimingFunction";break}}();var c=document.getElementsByTagName("body"),d=c.length?c[0]:document.documentElement;return s.prototype={_init:function(t,e){var n;if(this.options=Ink.extendObj({where:"up",zIndex:1e4,left:10,top:10,spacing:8,forever:0,color:"",timeout:0,delay:0,template:null,templatefield:null,fade:.3,text:""},e||{}),"string"==typeof t)n=i.select(t);else{if("object"!=typeof t)throw"Element expected";n=[t]}this.tooltips=[];for(var o=0,r=n.length;o<r;o++)this.tooltips[o]=new a(this,n[o])},destroy:function(){o.each(this.tooltips,function(t){t._destroy()}),this.tooltips=null,this.options=null}},a.prototype={_oppositeDirections:{left:"right",right:"left",up:"down",down:"up"},_init:function(n,i){e.observe(i,"mouseover",Ink.bindEvent(this._onMouseOver,this)),e.observe(i,"focus",Ink.bindEvent(this._onMouseOver,this)),e.observe(i,"mouseout",Ink.bindEvent(this._onMouseOut,this)),e.observe(i,"blur",Ink.bindEvent(this._onMouseOut,this)),e.observe(i,"mousemove",Ink.bindEvent(this._onMouseMove,this)),this.root=n,this.element=i,this._delayTimeout=null,this.tooltip=null,t.registerInstance(this,this.element)},_makeTooltip:function(t){if(!this._getOpt("text")&&!this._getOpt("html")&&!n.hasAttribute(this.element,"title"))return!1;var i=this._createTooltipElement();this.tooltip&&this._removeTooltip(),this.tooltip=i,this._fadeInTooltipElement(i),this._placeTooltipElement(i,t),e.observe(i,"mouseover",Ink.bindEvent(this._onTooltipMouseOver,this));var o=this._getFloatOpt("timeout");o&&setTimeout(Ink.bind(function(){this.tooltip===i&&this._removeTooltip()},this),1e3*o)},_createTooltipElement:function(){var e,o,s=this._getOpt("template"),a=this._getOpt("templatefield");if(s){var l=document.createElement("DIV");if(l.innerHTML=t.elOrSelector(s,"options.template").outerHTML,e=l.firstChild,a){if(o=i.select(a,e),!o)throw"options.templatefield must be a valid selector within options.template";o=o[0]}else o=e}else e=document.createElement("DIV"),r.addClassName(e,"ink-tooltip"),r.addClassName(e,this._getOpt("color")),o=document.createElement("DIV"),r.addClassName(o,"content"),e.appendChild(o);return this._getOpt("html")?o.innerHTML=this._getOpt("html"):this._getOpt("text")?n.setTextContent(o,this._getOpt("text")):n.setTextContent(o,this.element.getAttribute("title")),e.style.display="block",e.style.position="absolute",e.style.zIndex=this._getIntOpt("zIndex"),e},_fadeInTooltipElement:function(t){var e=this._getFloatOpt("fade");l&&e&&(t.style.opacity="0",t.style[l]=e+"s",t.style[h]="opacity",t.style[u]="ease-in-out",setTimeout(function(){t.style.opacity="1"},0))},_placeTooltipElement:function(t,e){var i=this._getOpt("where");if(null!==e||"mousemove"!==i&&"mousefix"!==i||(i="up"),"mousemove"===i||"mousefix"===i){var o=e;this._setPos(o[0],o[1]),d.appendChild(t)}else if(i.match(/(up|down|left|right)/)){d.appendChild(t);var s=n.offset(this.element),a=s[0],l=s[1],h=n.elementWidth(this.element)/2-n.elementWidth(t)/2,u=n.elementHeight(this.element)/2-n.elementHeight(t)/2,c=this._getIntOpt("spacing"),p=n.elementDimensions(t),f=n.elementDimensions(this.element),m=n.scrollWidth()+n.viewportWidth(),_=n.scrollHeight()+n.viewportHeight();i=this._getWhereValueInsideViewport(i,{left:a-p[0],right:a+p[0],top:l+p[1],bottom:l+p[1]},{right:m,bottom:_}),"up"===i?(l-=p[1],l-=c,a+=h):"down"===i?(l+=f[1],l+=c,a+=h):"left"===i?(a-=p[0],a-=c,l+=u):"right"===i&&(a+=f[0],a+=c,l+=u);var g=null;i.match(/(up|down|left|right)/)&&(g=document.createElement("SPAN"),r.addClassName(g,"arrow"),r.addClassName(g,this._oppositeDirections[i]),t.appendChild(g));var v=a,y=l,b=y+p[1]-_,k=v+p[0]-m,I=0-v,C=0-y;b>0?(g&&(g.style.top=p[1]/2+b+"px"),y-=b):C>0?(g&&(g.style.top=p[1]/2-C+"px"),y+=C):k>0?(g&&(g.style.left=p[0]/2+k+"px"),v-=k):I>0&&(g&&(g.style.left=p[0]/2-I+"px"),v+=I),t.style.left=v+"px",t.style.top=y+"px"}},_getWhereValueInsideViewport:function(t,e,n){return"left"===t&&e.left<0?"right":"right"===t&&e.right>n.right?"left":"up"===t&&e.top<0?"down":"down"===t&&e.bottom>n.bottom?"up":t},_removeTooltip:function(){var t=this.tooltip;if(t){var e=Ink.bind(n.remove,{},t);"mousemove"!==this._getOpt("where")&&l?(t.style.opacity=0,setTimeout(e,1e3*this._getFloatOpt("fade"))):e(),this.tooltip=null}},_getOpt:function(t){var e=n.data(this.element)[n._camelCase("tip-"+t)];if(e)return e;var i=this.root.options[t];return"undefined"!=typeof i?i:void 0},_getIntOpt:function(t){return parseInt(this._getOpt(t),10)},_getFloatOpt:function(t){return parseFloat(this._getOpt(t),10)},_destroy:function(){this.tooltip&&n.remove(this.tooltip),this.root=null,this.element=null,this.tooltip=null},_onMouseOver:function(t){var e;e="mouseover"!==t.type?null:this._getMousePosition(t);var n=this._getFloatOpt("delay");n?this._delayTimeout=setTimeout(Ink.bind(function(){this.tooltip||this._makeTooltip(e),this._delayTimeout=null},this),1e3*n):this._makeTooltip(e)},_onMouseMove:function(t){if("mousemove"===this._getOpt("where")&&this.tooltip){var e=this._getMousePosition(t);this._setPos(e[0],e[1])}},_onMouseOut:function(){this._getIntOpt("forever")||this._removeTooltip(),this._delayTimeout&&(clearTimeout(this._delayTimeout),this._delayTimeout=null)},_onTooltipMouseOver:function(){this.tooltip&&this._removeTooltip()},_setPos:function(t,e){t+=this._getIntOpt("left"),e+=this._getIntOpt("top");var i=this._getPageXY();if(this.tooltip){var o=[n.elementWidth(this.tooltip),n.elementHeight(this.tooltip)],r=this._getScroll();o[0]+t-r[0]>=i[0]-20&&(t=t-o[0]-this._getIntOpt("left")-10),o[1]+e-r[1]>=i[1]-20&&(e=e-o[1]-this._getIntOpt("top")-10),this.tooltip.style.left=t+"px",this.tooltip.style.top=e+"px"}},_getPageXY:function(){var t=0,e=0;return"number"==typeof window.innerWidth?(t=window.innerWidth,e=window.innerHeight):document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?(t=document.documentElement.clientWidth,e=document.documentElement.clientHeight):document.body&&(document.body.clientWidth||document.body.clientHeight)&&(t=document.body.clientWidth,e=document.body.clientHeight),[parseInt(t,10),parseInt(e,10)]},_getScroll:function(){var t=document.documentElement,e=document.body;return t&&(t.scrollLeft||t.scrollTop)?[t.scrollLeft,t.scrollTop]:e?[e.scrollLeft,e.scrollTop]:[0,0]},_getMousePosition:function(t){return[parseInt(e.pointerX(t),10),parseInt(e.pointerY(t),10)]}},s}),Ink.createModule("Ink.UI.TreeView","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1"],function(t,e,n,i,o,r){"use strict";function s(){t.BaseUIComponent.apply(this,arguments)}return s._name="TreeView_1",s._optionDefinition={node:["String","li"],children:["String","ul"],parentClass:["String","parent"],openNodeClass:["String","open"],openClass:["String","fa fa-minus-circle"],closedClass:["String","fa fa-plus-circle"],hideClass:["String","hide-all"],iconTag:["String","i"],stopDefault:["Boolean",!0]},s.prototype={_init:function(){this._handlers={click:Ink.bindEvent(this._onClick,this)},e.on(this._element,"click",this._options.node,this._handlers.click),r.each(Ink.ss(this._options.node,this._element),Ink.bind(function(t){if(this.isParent(t)){n.addClassName(t,this._options.parentClass);var e=this.isOpen(t);this._getIcon(t)||i.create(this._options.iconTag,{insertTop:t}),this._setNodeOpen(t,e)}},this))},_getIcon:function(t){return Ink.s("> "+this._options.iconTag,t)},isOpen:function(t){if(!this._getChild(t))throw new Error("not a node!");return"true"===t.getAttribute("data-open")||n.hasClassName(t,this._options.openNodeClass)},isParent:function(t){return n.hasClassName(t,this._options.parentClass)||null!=this._getChild(t)},_setNodeOpen:function(t,e){var i=this._getChild(t);if(i){n.setClassName(i,this._options.hideClass,!e);var o=this._getIcon(t);t.setAttribute("data-open",e);var r=e?this._options.openClass:this._options.closedClass,s=e?this._options.closedClass:this._options.openClass;n.removeClassName(o,s),n.addClassName(o,r),n.setClassName(t,this._options.openNodeClass,e)}else Ink.error("Ink.UI.TreeView: node",t,"is not a node!")},open:function(t){this._setNodeOpen(t,!0)},close:function(t){this._setNodeOpen(t,!1)},toggle:function(t){this.isOpen(t)?this.close(t):this.open(t)},_getChild:function(t){return o.select(this._options.children,t)[0]||null},_onClick:function(t){!this.isParent(t.currentTarget)||o.matchesSelector(t.target,this._options.node)||o.matchesSelector(t.target,this._options.children)||(this._options.stopDefault&&t.preventDefault(),this.toggle(t.currentTarget))}},t.createUIComponent(s),s}),Ink.createModule("Ink.UI.Upload","1",["Ink.Dom.Event_1","Ink.Dom.Element_1","Ink.Dom.Browser_1","Ink.UI.Common_1"],function(t,e,n,i){"use strict";var o=function(t){this.init(t)};o.prototype={init:function(t){this._options=Ink.extendObj({entry:void 0,maxDepth:10},t||{});try{this._read()}catch(t){Ink.error(t)}},_read:function(){if(!this._options.entry)return void Ink.error("You must specify the entry!");try{this._readDirectories()}catch(t){Ink.error(t)}},_readDirectories:function(){var t=[],e=!1,n=0,i=Ink.bind(function(o){var r=o.createReader();e=!0,r.readEntries(Ink.bind(function(o){if(o.length>0){for(var r=0,s=o.length;r<s;r++)t.push(o[r]),o[r].isDirectory&&(n=this.clearArray(o[r].fullPath.split("/")),n.shift(),n=n.length,n<=this._options.maxDepth&&i(o[r]));this._stopActivityTimeout&&clearTimeout(this._stopActivityTimeout),this._stopActivityTimeout=setTimeout(function(){e=!1},250)}o.length||(e=!1)},this),Ink.bind(function(t){this._options.readError(t,o)},this))},this);i(this._options.entry);var o,r=function(){return!e&&(clearInterval(o),this._options.readComplete&&"function"==typeof this._options.readComplete&&this._options.readComplete(t),!0)};o=setInterval(Ink.bind(r,this),250)},clearArray:function(t){for(var e=t.length-1;e>=0;e--)"undefined"!=typeof t[e]&&null!==t[e]&&""!==t[e]||t.splice(e,1);return t}};var r={lists:[],items:[],create:function(t){var e;return t=String(t),this.lists.push({name:t}),e=this.lists.length-1},getItems:function(t){if(!t)return this.items;for(var e=[],n=0,i=this.items.length;n<i;n++)this.items[n].parentId===t&&e.push(this.items[n]);return e},purge:function(t,e){if("number"!=typeof t||isNaN(Number(t)))return!1;try{for(var n=this.items.length;n>=0;n--)this.items[n]&&t===this.items[n].parentId&&this.remove(this.items[n].parentId,this.items[n].pid);return e||this.lists.splice(t,1),!0}catch(t){return Ink.error("Purge: invalid id"),!1}},add:function(t,e,n){if(!this.lists[t])return!1;"object"!=typeof e&&(e=String(e));var i=parseInt(Math.round(1e5*Math.random())+""+Math.round(1e5*Math.random()),10);return n=n||0,this.items.push({parentId:t,item:e,priority:n||0,pid:i}),i},view:function(t,e){var n=this._searchByPid(t,e);return n!==!1&&this.items[n]},remove:function(t,e){try{var n=this._searchByPid(t,e);return n!==!1&&(this.items.splice(n,1),!0)}catch(t){return Ink.error("Remove: invalid id"),!1}},_searchByPid:function(t,e){if(!t&&"boolean"==typeof t||!e)return!1;if(t=parseInt(t,10),e=parseInt(e,10),isNaN(t)||isNaN(e))return!1;for(var n=0,i=this.items.length;n<i;n++)if(this.items[n].parentId===t&&this.items[n].pid===e)return n;return!1}},s=function(t){this.Upload=t,this.init()};s.prototype={init:function(){this._fileButton=this.Upload._options.fileButton,this._dropzone=this.Upload._options.dropzone,this._setDropEvent(),this._setFileButton()},_setDropEvent:function(){var t=this._dropzone;if(t)for(var e=0,n=t.length;e<n;e++)t[e].ondrop=Ink.bindEvent(this.Upload._dropEventHandler,this.Upload),t[e].ondragleave=Ink.bindEvent(this._onDragLeave,this),t[e].ondragend=Ink.bindEvent(this._onDragEndEventHandler,this),t[e].ondragdrop=Ink.bindEvent(this._onDragEndEventHandler,this),t[e].ondragenter=Ink.bindEvent(this._onDragEnterHandler,this),t[e].ondragover=Ink.bindEvent(this._onDragOverHandler,this)},_onDragEnterHandler:function(t){return t&&t.stopPropagation&&t.stopPropagation(),t&&t.preventDefault&&t.preventDefault(),t&&(t.returnValue=!1),this.Upload.publish("DragEnter",t),!1},_onDragOverHandler:function(t){return!!t&&(t.preventDefault(),t.stopPropagation(),t.returnValue=!1,!0)},_onDragLeave:function(t){return this.Upload.publish("DragLeave",t)},_onDragEndEventHandler:function(t){return this.Upload.publish("DragEnd",t)},_setFileButton:function(){var e=this._fileButton;e&&t.observeMulti(e,"change",Ink.bindEvent(this._fileChangeHandler,this))},_fileChangeHandler:function(n){var i=t.element(n),o=i.files,r=e.findUpwardsByTag(i,"form");return o&&window.FormData&&"withCredentials"in new XMLHttpRequest?(this.Upload._addFilesToQueue(o),void(i.value="")):(r.parentNode.submit(),!1)}};var a=function(t){this.Queue=r,this.init(t),this._events={}};return a.prototype={init:function(t){if("string"==typeof t&&(t=e.data(i.elOrSelector(t,"1st argument"))),this._options=Ink.extendObj({dropzone:void 0,fileButton:void 0,fileFormName:"Ink_Filelist",endpoint:"",maxFilesize:300<<20,INVALID_FILE_NAME:void 0,extraData:{},useChunks:!1,chunkSize:4194304,minSizeToUseChunks:20971520,endpointChunk:"",endpointChunkCommit:"",foldersEnabled:!1,directoryMaxDepth:10},t||{}),this._queueId=r.create("Ink_UPLOAD"),this._queueRunning=!1,this._folders={},this._options.dropzone&&(this._options.dropzone=i.elsOrSelector(this._options.dropzone,"Ink.UI.Upload - dropzone")),this._options.fileButton&&(this._options.fileButton=i.elsOrSelector(this._options.fileButton,"Ink.UI.Upload - fileButton")),!this._options.dropzone&&!this._options.fileButton)throw new TypeError("Ink.UI.Upload: Specify a fileButton or a Dropzone!");new s(this)},_supportChunks:function(t){return this._options.useChunks&&"Blob"in window&&(new Blob).slice&&t>this._options.minSizeToUseChunks},_dropEventHandler:function(e){t.stopDefault(e),this.publish("DropComplete",e.dataTransfer);var n=e.dataTransfer;if(!n||!n.files||!n.files.length)return!1;if(this._files=n.files,this._files=Array.prototype.slice.call(this._files||[],0),n.items&&n.items[0]&&n.items[0].webkitGetAsEntry){if(!this._options.foldersEnabled)return setTimeout(Ink.bind(this._addFilesToQueue,this,this._files),0);for(var i,o=[],r=e.dataTransfer.items.length-1;r>=0;r--)i=e.dataTransfer.items[r].webkitGetAsEntry(),i&&i.isDirectory&&(o.push(i),this._files[r].isDirectory=!0,this._files.splice(r,1));this._addFolderToQueue(o,Ink.bind(function(){setTimeout(Ink.bind(this._addFilesToQueue,this,this._files),0)},this))}else setTimeout(Ink.bind(this._addFilesToQueue,this,this._files),0);return!0},_addFolderToQueue:function(t,e){var n=[],i={};if(!t||!t.length)return e(),n;var r=function(t){for(var e=[],n=0,i=t.length;n<i;n++)t[n].isFile&&e.push(t[n]);return e},s=function(t,e){var i;return e=e||0,this._files[e]?"fileentry"!==this._files[e].constructor.name.toLowerCase()?s.apply(this,[t,++e]):void this._files[e].file(Ink.bind(function(n){i=this._files[e].fullPath,this._files[e]=n,this._files[e].hasParent=!0,this._files[e].fullPath||(this._files[e].fullPath=i),s.apply(this,[t,++e])},this),Ink.bind(function(){this._files.splice(e,1),s.apply(this,[t,e])},this)):(t(),n)},a=Ink.bind(function(l){return t[l]?void new o({entry:t[l],maxDepth:this._options.directoryMaxDepth,readComplete:Ink.bind(function(e){if(n=n.concat(r(e)),t[l]&&!(t[l].fullPath in this._folders)){this._folders[t[l].fullPath]={items:e,files:n,length:e.length,created:!1,root:!0};for(var o=0,s=e.length;o<s;o++)e[o].isFile||(e[o].fullPath in i?delete i[e[o].fullPath]:this._folders[e[o].fullPath]={created:!1,root:!1});a(++l)}},this),readError:Ink.bind(function(t,e){i[e.fullPath]={},i[e.fullPath].error=t},this)}):(this._files=this._files.concat(n),s.call(this,e),!1)},this);return a(0),n},_addFilesToQueue:function(t){for(var e,i,o,s=0,a=t.length;s<a;s++)e=t[s],e.isDirectory||null!==e&&(e.type||e.size%4096!==0||n.CHROME&&this._options.foldersEnabled)?e.size>this._options.maxFilesize?this.publish("MaxSizeFailure",e,this._options.maxFilesize):(i=parseInt(Math.round(1e5*Math.random())+""+Math.round(1e5*Math.random()),10),o={id:s,data:e,fileID:i,directory:e.isDirectory},r.add(this._queueId,o),this.publish("FileAddedToQueue",o)):this.publish("InvalidFile",e,"size");this._processQueue(!0),this._files=[]},_processQueue:function(t){if(this._queueRunning)return!1;this.running=0;var e,n=1,i=0,o=r.items.length;this._queueRunning=!0,this.interval=setInterval(Ink.bind(function(){if(r.items.length===i&&0===this.running&&(r.purge(this._queueId,!0),this._queueRunning=!1,clearInterval(this.interval),this.publish("QueueEnd",this._queueId,o)),e=r.getItems(this._queueId),this.running<n&&e[i]){if(e[i].canceled)for(var a=i;e[a]&&e[a].canceled;)i++,a++;else s.call(this,e[i].pid,e[i].item.data,e[i].item.fileID,e[i].item.directory,t),this.running++,i++;return!0}return!1},this),100);var s=function(t,e,n,i,o){var r={file:e,fileID:n,cb:Ink.bind(function(){this.running--},this)};o&&(i?r.cb():this._upload(r))};return!0},_upload:function(t){var e=t.file,n=new XMLHttpRequest,i=t.fileID;this.publish("BeforeUpload",e,this._options.extraData,i,n,this._supportChunks(e.size));var o=function(o){t.cb&&("function"===t.cb,!0)&&t.cb(),this.publish("OnProgress",{length:e.size,lengthComputable:!0,loaded:e.size,total:e.size},e,i),this.publish("EndUpload",e,i,!o||{error:!0}),this.publish("InvalidFile",e,"name"),n.abort()};if(this._options.INVALID_FILE_NAME&&this._options.INVALID_FILE_NAME instanceof RegExp&&this._options.INVALID_FILE_NAME.test(t.file.name))return void o.call(this);if(!e.lastModifiedDate&&!Ink.Dom.Browser.OPERA)return void o.call(this,!0);n.upload.onprogress=Ink.bind(this.publish,this,"OnProgress",e,i);var r,s;this._supportChunks(e.size)?e.size<=e.chunk_offset?(r=this._options.endpointChunkCommit,s="POST"):(r=this._options.endpointChunk,e.chunk_upload_id&&(r+="?upload_id="+e.chunk_upload_id),e.chunk_offset&&(r+="&offset="+e.chunk_offset),s="PUT"):(r=this._options.endpoint,s="POST"),n.open(s,r,!0),n.withCredentials=!0,n.setRequestHeader("x-requested-with","XMLHttpRequest"),this._supportChunks(e.size)&&n.setRequestHeader("Content-type","application/x-www-form-urlencoded");var a,l=new FormData;if("Blob"in window&&"function"==typeof Blob?(a=new Blob([e],{type:e.type}),this._supportChunks(e.size)?(e.chunk_offset=e.chunk_offset||0,a=a.slice(e.chunk_offset,e.chunk_offset+this._options.chunkSize)):l.append(this._options.fileFormName,a,e.name)):l.append(this._options.fileFormName,e),this._supportChunks(e.size))l.append("upload_id",e.chunk_upload_id),l.append("path",e.upload_path);else for(var h in this._options.extraData)this._options.extraData.hasOwnProperty(h)&&l.append(h,this._options.extraData[h]);e.hasParent?this.publish("cbCreateFolder",e.parentID,e.fullPath,this._options.extraData,this._folders,e.rootPath,Ink.bind(function(){this._supportChunks(e.size)?e.size<=e.chunk_offset?n.send("upload_id="+e.chunk_upload_id+"&path="+e.upload_path+"/"+e.name):n.send(a):n.send(l)},this)):this._supportChunks(e.size)?e.size<=e.chunk_offset?n.send("upload_id="+e.chunk_upload_id+"&path="+e.upload_path+"/"+e.name):n.send(a):n.send(l),n.onload=Ink.bindEvent(function(){if(this._supportChunks(e.size)&&e.size>e.chunk_offset){if(n.response){var o=JSON.parse(n.response),r=e.chunk_offset&&o.offset!==e.chunk_offset+this._options.chunkSize&&e.size!==o.offset;r?(t.cb&&t.cb(),this.publish("ErrorUpload",e,i)):(e.chunk_upload_id=o.upload_id,e.chunk_offset=o.offset,e.chunk_expires=o.expires,this._upload(t))}else t.cb&&t.cb(),this.publish("ErrorUpload",e,i);return n=null}return t.cb&&t.cb(),n.responseText&&n.status<400?this.publish("EndUpload",e,i,n.responseText):this.publish("ErrorUpload",e,i),n=null},this),n.onerror=Ink.bindEvent(function(){t.cb&&t.cb(),this.publish("ErrorUpload",e,i)},this),n.onabort=Ink.bindEvent(function(){t.cb&&t.cb(),this.publish("AbortUpload",e,i,{abortAll:Ink.bind(this.abortAll,this),abortOne:Ink.bind(this.abortOne,this)})},this)},abortAll:function(){return!!this._queueRunning&&(clearInterval(this.interval),this._queueRunning=!1,r.purge(this._queueId,!0),!0)},abortOne:function(t,e){for(var n,i=r.getItems(0),o=0,s=i.length;o<s;o++)if(i[o].item.fileID===t)return n={id:i[o].item.fileID,name:i[o].item.data.name,size:i[o].item.data.size,hasParent:i[o].item.data.hasParent},r.remove(0,i[o].pid),e&&e(n),!0;return!1},subscribe:function(t,e){return this._events[t]||(this._events[t]=[]),this._events[t].push(e),this._events[t]},publish:function(t){var e=this._events[t],n=Array.prototype.slice.call(arguments||[],0);if(e)for(var i=0,o=e.length;i<o;i++)try{e[i].apply(this,n.splice(1,n.length))}catch(e){Ink.error(t+": "+e)}}},a})}});